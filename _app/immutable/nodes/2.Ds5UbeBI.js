import"../chunks/CWj6FrbW.js";import"../chunks/CXH91RZL.js";import{ad as Ka,b as En,j as dt,h as H,X as Le,d as cn,q as M,w as Qa,r as za,g as Ga,i as ts,k as Xe,n as he,a5 as Gs,a8 as Ya,l as Ys,m as Mt,p as Za,av as Jt,ab as Zs,a1 as un,aw as ei,ar as ti,ax as ns,a3 as er,ay as ni,az as si,Y as ri,aA as ai,aB as At,aC as ii,aD as oi,a6 as tr,Q as It,aE as li,a9 as ci,a7 as ui,ae as ss,aF as fi,ap as kn,aG as di,aH as hi,aI as mi,v as pi,aJ as gi,aK as _i,aL as yi,aM as wi,aN as bi,aO as vi,B as xi,aq as Si,O as we,a as Y,N as nr,I as Ai,c as rs,f as as,R as sr,as as pe,u as oe,aP as Ii,aQ as Ci,T as V,V as X,aR as Ri,W as Ie,aS as Ei,au as Xt}from"../chunks/CmnC5Er6.js";import{l as rr,i as ki,c as Oi,d as On,a as $i,n as Ti,b as Pi,o as Ni,e as Mi,s as ar,r as Li}from"../chunks/BUV8r5ey.js";import{i as Ve,r as Fi,p as is}from"../chunks/JyaI-QpN.js";function Di(n,e,t,s){for(var r=[],a=e.length,i=0;i<a;i++)si(e[i].e,r,!0);var o=a>0&&r.length===0&&t!==null;if(o){var l=t.parentNode;ri(l),l.append(t),s.clear(),fe(n,e[0].prev,e[a-1].next)}ai(r,()=>{for(var c=0;c<a;c++){var f=e[c];o||(s.delete(f.k),fe(n,f.prev,f.next)),At(f.e,!o)}})}function Bi(n,e,t,s,r,a=null){var i=n,o={flags:e,items:new Map,first:null};{var l=n;i=H?dt(Le(l)):l.appendChild(Ka())}H&&cn();var c=null,f=!1,u=Qa(()=>{var h=t();return er(h)?h:h==null?[]:Zs(h)});En(()=>{var h=M(u),m=h.length;if(f&&m===0)return;f=m===0;let g=!1;if(H){var y=za(i)===Ga;y!==(m===0)&&(i=ts(),dt(i),Xe(!1),g=!0)}if(H){for(var w=null,b,p=0;p<m;p++){if(he.nodeType===Gs&&he.data===Ya){i=he,g=!0,Xe(!1);break}var v=h[p],_=s(v,p);b=ir(he,o,w,null,v,_,p,r,e,t),o.items.set(_,b),w=b}m>0&&dt(ts())}H||ji(h,o,i,r,e,s,t),a!==null&&(m===0?c?Ys(c):c=Mt(()=>a(i)):c!==null&&Za(c,()=>{c=null})),g&&Xe(!0),M(u)}),H&&(i=he)}function ji(n,e,t,s,r,a,i){var o=n.length,l=e.items,c=e.first,f=c,u,h=null,m=[],g=[],y,w,b,p;for(p=0;p<o;p+=1){if(y=n[p],w=a(y,p),b=l.get(w),b===void 0){var v=f?f.e.nodes_start:t;h=ir(v,e,h,h===null?e.first:h.next,y,w,p,s,r,i),l.set(w,h),m=[],g=[],f=h.next;continue}if(Ui(b,y,p),(b.e.f&Jt)!==0&&Ys(b.e),b!==f){if(u!==void 0&&u.has(b)){if(m.length<g.length){var _=g[0],C;h=_.prev;var A=m[0],S=m[m.length-1];for(C=0;C<m.length;C+=1)os(m[C],_,t);for(C=0;C<g.length;C+=1)u.delete(g[C]);fe(e,A.prev,S.next),fe(e,h,A),fe(e,S,_),f=_,h=S,p-=1,m=[],g=[]}else u.delete(b),os(b,f,t),fe(e,b.prev,b.next),fe(e,b,h===null?e.first:h.next),fe(e,h,b),h=b;continue}for(m=[],g=[];f!==null&&f.k!==w;)(f.e.f&Jt)===0&&(u??(u=new Set)).add(f),g.push(f),f=f.next;if(f===null)continue;b=f}m.push(b),h=b,f=b.next}if(f!==null||u!==void 0){for(var N=u===void 0?[]:Zs(u);f!==null;)(f.e.f&Jt)===0&&N.push(f),f=f.next;var O=N.length;if(O>0){var T=o===0?t:null;Di(e,N,T,l)}}un.first=e.first&&e.first.e,un.last=h&&h.e}function Ui(n,e,t,s){ei(n.v,e),n.i=t}function ir(n,e,t,s,r,a,i,o,l,c){var f=(l&ii)!==0,u=(l&oi)===0,h=f?u?ti(r,!1,!1):ns(r):r,m=(l&ni)===0?i:ns(i),g={i:m,v:h,k:a,a:null,e:null,prev:t,next:s};try{return g.e=Mt(()=>o(n,h,m,c),H),g.e.prev=t&&t.e,g.e.next=s&&s.e,t===null?e.first=g:(t.next=g,t.e.next=g.e),s!==null&&(s.prev=g,s.e.prev=g.e),g}finally{}}function os(n,e,t){for(var s=n.next?n.next.e.nodes_start:t,r=e?e.e.nodes_start:t,a=n.e.nodes_start;a!==s;){var i=tr(a);r.before(a),a=i}}function fe(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Wi(n,e,t=!1,s=!1,r=!1){var a=n,i="";It(()=>{var o=un;if(i===(i=e()??"")){H&&cn();return}if(o.nodes_start!==null&&(li(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),i!==""){if(H){he.data;for(var l=cn(),c=l;l!==null&&(l.nodeType!==Gs||l.data!=="");)c=l,l=tr(l);if(l===null)throw ci(),ui;ss(he,c),a=dt(l);return}var f=i+"";t?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var u=fi(f);if((t||s)&&(u=Le(u)),ss(Le(u),u.lastChild),t||s)for(;Le(u);)a.before(Le(u));else a.before(u)}})}function qi(n,e){var t=void 0,s;En(()=>{t!==(t=e())&&(s&&(At(s),s=null),t&&(s=Mt(()=>{kn(()=>t(n))})))})}function or(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=or(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Hi(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=or(n))&&(s&&(s+=" "),s+=e);return s}function Ji(n){return typeof n=="object"?Hi(n):n??""}const ls=[...` 	
\r\fÂ \v\uFEFF`];function Xi(n,e,t){var s=n==null?"":""+n;if(t){for(var r in t)if(t[r])s=s?s+" "+r:r;else if(s.length)for(var a=r.length,i=0;(i=s.indexOf(r,i))>=0;){var o=i+a;(i===0||ls.includes(s[i-1]))&&(o===s.length||ls.includes(s[o]))?s=(i===0?"":s.substring(0,i))+s.substring(o+1):i=o}}return s===""?null:s}function cs(n,e=!1){var t=e?" !important;":";",s="";for(var r in n){var a=n[r];a!=null&&a!==""&&(s+=" "+r+": "+a+t)}return s}function Vt(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function Vi(n,e){if(e){var t="",s,r;if(Array.isArray(e)?(s=e[0],r=e[1]):s=e,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,i=0,o=!1,l=[];s&&l.push(...Object.keys(s).map(Vt)),r&&l.push(...Object.keys(r).map(Vt));var c=0,f=-1;const y=n.length;for(var u=0;u<y;u++){var h=n[u];if(o?h==="/"&&n[u-1]==="*"&&(o=!1):a?a===h&&(a=!1):h==="/"&&n[u+1]==="*"?o=!0:h==='"'||h==="'"?a=h:h==="("?i++:h===")"&&i--,!o&&a===!1&&i===0){if(h===":"&&f===-1)f=u;else if(h===";"||u===y-1){if(f!==-1){var m=Vt(n.substring(c,f).trim());if(!l.includes(m)){h!==";"&&u++;var g=n.substring(c,u).trim();t+=" "+g+";"}}c=u+1,f=-1}}}}return s&&(t+=cs(s)),r&&(t+=cs(r,!0)),t=t.trim(),t===""?null:t}return n==null?null:String(n)}function Ki(n,e,t,s,r,a){var i=n.__className;if(H||i!==t||i===void 0){var o=Xi(t,s,a);(!H||o!==n.getAttribute("class"))&&(o==null?n.removeAttribute("class"):e?n.className=o:n.setAttribute("class",o)),n.__className=t}else if(a&&r!==a)for(var l in a){var c=!!a[l];(r==null||c!==!!r[l])&&n.classList.toggle(l,c)}return a}function Kt(n,e={},t,s){for(var r in t){var a=t[r];e[r]!==a&&(t[r]==null?n.style.removeProperty(r):n.style.setProperty(r,a,s))}}function Qi(n,e,t,s){var r=n.__style;if(H||r!==e){var a=Vi(e,s);(!H||a!==n.getAttribute("style"))&&(a==null?n.removeAttribute("style"):n.style.cssText=a),n.__style=e}else s&&(Array.isArray(s)?(Kt(n,t==null?void 0:t[0],s[0]),Kt(n,t==null?void 0:t[1],s[1],"important")):Kt(n,t,s));return s}function Ct(n,e,t){if(n.multiple){if(e==null)return;if(!er(e))return hi();for(var s of n.options)s.selected=e.includes(Ke(s));return}for(s of n.options){var r=Ke(s);if(mi(r,e)){s.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function lr(n){var e=new MutationObserver(()=>{Ct(n,n.__value)});e.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),di(()=>{e.disconnect()})}function zi(n,e,t=e){var s=!0;rr(n,"change",r=>{var a=r?"[selected]":":checked",i;if(n.multiple)i=[].map.call(n.querySelectorAll(a),Ke);else{var o=n.querySelector(a)??n.querySelector("option:not([disabled])");i=o&&Ke(o)}t(i)}),kn(()=>{var r=e();if(Ct(n,r,s),s&&r===void 0){var a=n.querySelector(":checked");a!==null&&(r=Ke(a),t(r))}n.__value=r,s=!1}),lr(n)}function Ke(n){return"__value"in n?n.__value:n.value}const Te=Symbol("class"),Pe=Symbol("style"),cr=Symbol("is custom element"),ur=Symbol("is html");function Gi(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function us(n,e,t,s){var r=fr(n);H&&(r[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||r[e]!==(r[e]=t)&&(e==="loading"&&(n[wi]=t),t==null?n.removeAttribute(e):typeof t!="string"&&dr(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Yi(n,e,t,s,r=!1){var a=fr(n),i=a[cr],o=!a[ur];let l=H&&i;l&&Xe(!1);var c=e||{},f=n.tagName==="OPTION";for(var u in e)u in t||(t[u]=null);t.class?t.class=Ji(t.class):t[Te]&&(t.class=null),t[Pe]&&(t.style??(t.style=null));var h=dr(n);for(const v in t){let _=t[v];if(f&&v==="value"&&_==null){n.value=n.__value="",c[v]=_;continue}if(v==="class"){var m=n.namespaceURI==="http://www.w3.org/1999/xhtml";Ki(n,m,_,s,e==null?void 0:e[Te],t[Te]),c[v]=_,c[Te]=t[Te];continue}if(v==="style"){Qi(n,_,e==null?void 0:e[Pe],t[Pe]),c[v]=_,c[Pe]=t[Pe];continue}var g=c[v];if(!(_===g&&!(_===void 0&&n.hasAttribute(v)))){c[v]=_;var y=v[0]+v[1];if(y!=="$$")if(y==="on"){const C={},A="$$"+v;let S=v.slice(2);var w=Pi(S);if(ki(S)&&(S=S.slice(0,-7),C.capture=!0),!w&&g){if(_!=null)continue;n.removeEventListener(S,c[A],C),c[A]=null}if(_!=null)if(w)n[`__${S}`]=_,On([S]);else{let N=function(O){c[v].call(this,O)};c[A]=Oi(S,n,N,C)}else w&&(n[`__${S}`]=void 0)}else if(v==="style")us(n,v,_);else if(v==="autofocus")$i(n,!!_);else if(!i&&(v==="__value"||v==="value"&&_!=null))n.value=n.__value=_;else if(v==="selected"&&f)Gi(n,_);else{var b=v;o||(b=Ti(b));var p=b==="defaultValue"||b==="defaultChecked";if(_==null&&!i&&!p)if(a[v]=null,b==="value"||b==="checked"){let C=n;const A=e===void 0;if(b==="value"){let S=C.defaultValue;C.removeAttribute(b),C.defaultValue=S,C.value=C.__value=A?S:null}else{let S=C.defaultChecked;C.removeAttribute(b),C.defaultChecked=S,C.checked=A?S:!1}}else n.removeAttribute(v);else p||h.includes(b)&&(i||typeof _!="string")?n[b]=_:typeof _!="function"&&us(n,b,_)}}}return l&&Xe(!0),c}function fs(n,e,t=[],s,r=!1,a=pi){const i=t.map(a);var o=void 0,l={},c=n.nodeName==="SELECT",f=!1;if(En(()=>{var h=e(...i.map(M)),m=Yi(n,o,h,s,r);f&&c&&"value"in h&&Ct(n,h.value,!1);for(let y of Object.getOwnPropertySymbols(l))h[y]||At(l[y]);for(let y of Object.getOwnPropertySymbols(h)){var g=h[y];y.description===gi&&(!o||g!==o[y])&&(l[y]&&At(l[y]),l[y]=Mt(()=>qi(n,()=>g))),m[y]=g}o=m}),c){var u=n;kn(()=>{Ct(u,o.value),lr(u)})}f=!0}function fr(n){return n.__attributes??(n.__attributes={[cr]:n.nodeName.includes("-"),[ur]:n.namespaceURI===_i})}var ds=new Map;function dr(n){var e=ds.get(n.nodeName);if(e)return e;ds.set(n.nodeName,e=[]);for(var t,s=n,r=Element.prototype;r!==s;){t=bi(s);for(var a in t)t[a].set&&e.push(a);s=yi(s)}return e}function Zi(n,e,t=e){var s=vi();rr(n,"input",r=>{var a=r?n.defaultValue:n.value;if(a=Qt(n)?zt(a):a,t(a),s&&a!==(a=e())){var i=n.selectionStart,o=n.selectionEnd;n.value=a??"",o!==null&&(n.selectionStart=i,n.selectionEnd=Math.min(o,n.value.length))}}),(H&&n.defaultValue!==n.value||xi(e)==null&&n.value)&&t(Qt(n)?zt(n.value):n.value),Si(()=>{var r=e();Qt(n)&&r===zt(n.value)||n.type==="date"&&!r&&!n.value||r!==n.value&&(n.value=r??"")})}function Qt(n){var e=n.type;return e==="number"||e==="range"}function zt(n){return n===""?null:+n}var eo=we('<h1 class="mx-2 mb-10 text-center text-4xl text-gray-800">AI-Powered Translation Assistant</h1>');function to(n){var e=eo();Y(n,e)}const hr=/^[a-z0-9]+(-[a-z0-9]+)*$/,Lt=(n,e,t,s="")=>{const r=n.split(":");if(n.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;s=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const o=r.pop(),l=r.pop(),c={provider:r.length>0?r[0]:s,prefix:l,name:o};return e&&!ht(c)?null:c}const a=r[0],i=a.split("-");if(i.length>1){const o={provider:s,prefix:i.shift(),name:i.join("-")};return e&&!ht(o)?null:o}if(t&&s===""){const o={provider:s,prefix:"",name:a};return e&&!ht(o,t)?null:o}return null},ht=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1,mr=Object.freeze({left:0,top:0,width:16,height:16}),Rt=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Ft=Object.freeze({...mr,...Rt}),fn=Object.freeze({...Ft,body:"",hidden:!1});function no(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const s=((n.rotate||0)+(e.rotate||0))%4;return s&&(t.rotate=s),t}function hs(n,e){const t=no(n,e);for(const s in fn)s in Rt?s in n&&!(s in t)&&(t[s]=Rt[s]):s in e?t[s]=e[s]:s in n&&(t[s]=n[s]);return t}function so(n,e){const t=n.icons,s=n.aliases||Object.create(null),r=Object.create(null);function a(i){if(t[i])return r[i]=[];if(!(i in r)){r[i]=null;const o=s[i]&&s[i].parent,l=o&&a(o);l&&(r[i]=[o].concat(l))}return r[i]}return Object.keys(t).concat(Object.keys(s)).forEach(a),r}function ro(n,e,t){const s=n.icons,r=n.aliases||Object.create(null);let a={};function i(o){a=hs(s[o]||r[o],a)}return i(e),t.forEach(i),hs(n,a)}function pr(n,e){const t=[];if(typeof n!="object"||typeof n.icons!="object")return t;n.not_found instanceof Array&&n.not_found.forEach(r=>{e(r,null),t.push(r)});const s=so(n);for(const r in s){const a=s[r];a&&(e(r,ro(n,r,a)),t.push(r))}return t}const ao={provider:"",aliases:{},not_found:{},...mr};function Gt(n,e){for(const t in e)if(t in n&&typeof n[t]!=typeof e[t])return!1;return!0}function gr(n){if(typeof n!="object"||n===null)return null;const e=n;if(typeof e.prefix!="string"||!n.icons||typeof n.icons!="object"||!Gt(n,ao))return null;const t=e.icons;for(const r in t){const a=t[r];if(!r||typeof a.body!="string"||!Gt(a,fn))return null}const s=e.aliases||Object.create(null);for(const r in s){const a=s[r],i=a.parent;if(!r||typeof i!="string"||!t[i]&&!s[i]||!Gt(a,fn))return null}return e}const ms=Object.create(null);function io(n,e){return{provider:n,prefix:e,icons:Object.create(null),missing:new Set}}function Oe(n,e){const t=ms[n]||(ms[n]=Object.create(null));return t[e]||(t[e]=io(n,e))}function _r(n,e){return gr(e)?pr(e,(t,s)=>{s?n.icons[t]=s:n.missing.add(t)}):[]}function oo(n,e,t){try{if(typeof t.body=="string")return n.icons[e]={...t},!0}catch{}return!1}let Ye=!1;function yr(n){return typeof n=="boolean"&&(Ye=n),Ye}function lo(n){const e=typeof n=="string"?Lt(n,!0,Ye):n;if(e){const t=Oe(e.provider,e.prefix),s=e.name;return t.icons[s]||(t.missing.has(s)?null:void 0)}}function co(n,e){const t=Lt(n,!0,Ye);if(!t)return!1;const s=Oe(t.provider,t.prefix);return e?oo(s,t.name,e):(s.missing.add(t.name),!0)}function uo(n,e){if(typeof n!="object")return!1;if(typeof e!="string"&&(e=n.provider||""),Ye&&!e&&!n.prefix){let r=!1;return gr(n)&&(n.prefix="",pr(n,(a,i)=>{co(a,i)&&(r=!0)})),r}const t=n.prefix;if(!ht({prefix:t,name:"a"}))return!1;const s=Oe(e,t);return!!_r(s,n)}const wr=Object.freeze({width:null,height:null}),br=Object.freeze({...wr,...Rt}),fo=/(-?[0-9.]*[0-9]+[0-9.]*)/g,ho=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function ps(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const s=n.split(fo);if(s===null||!s.length)return n;const r=[];let a=s.shift(),i=ho.test(a);for(;;){if(i){const o=parseFloat(a);isNaN(o)?r.push(a):r.push(Math.ceil(o*e*t)/t)}else r.push(a);if(a=s.shift(),a===void 0)return r.join("");i=!i}}function mo(n,e="defs"){let t="";const s=n.indexOf("<"+e);for(;s>=0;){const r=n.indexOf(">",s),a=n.indexOf("</"+e);if(r===-1||a===-1)break;const i=n.indexOf(">",a);if(i===-1)break;t+=n.slice(r+1,a).trim(),n=n.slice(0,s).trim()+n.slice(i+1)}return{defs:t,content:n}}function po(n,e){return n?"<defs>"+n+"</defs>"+e:e}function go(n,e,t){const s=mo(n);return po(s.defs,e+s.content+t)}const _o=n=>n==="unset"||n==="undefined"||n==="none";function yo(n,e){const t={...Ft,...n},s={...br,...e},r={left:t.left,top:t.top,width:t.width,height:t.height};let a=t.body;[t,s].forEach(y=>{const w=[],b=y.hFlip,p=y.vFlip;let v=y.rotate;b?p?v+=2:(w.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),w.push("scale(-1 1)"),r.top=r.left=0):p&&(w.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),w.push("scale(1 -1)"),r.top=r.left=0);let _;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:_=r.height/2+r.top,w.unshift("rotate(90 "+_.toString()+" "+_.toString()+")");break;case 2:w.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:_=r.width/2+r.left,w.unshift("rotate(-90 "+_.toString()+" "+_.toString()+")");break}v%2===1&&(r.left!==r.top&&(_=r.left,r.left=r.top,r.top=_),r.width!==r.height&&(_=r.width,r.width=r.height,r.height=_)),w.length&&(a=go(a,'<g transform="'+w.join(" ")+'">',"</g>"))});const i=s.width,o=s.height,l=r.width,c=r.height;let f,u;i===null?(u=o===null?"1em":o==="auto"?c:o,f=ps(u,l/c)):(f=i==="auto"?l:i,u=o===null?ps(f,c/l):o==="auto"?c:o);const h={},m=(y,w)=>{_o(w)||(h[y]=w.toString())};m("width",f),m("height",u);const g=[r.left,r.top,l,c];return h.viewBox=g.join(" "),{attributes:h,viewBox:g,body:a}}const wo=/\sid="(\S+)"/g,bo="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let vo=0;function xo(n,e=bo){const t=[];let s;for(;s=wo.exec(n);)t.push(s[1]);if(!t.length)return n;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(a=>{const i=typeof e=="function"?e(a):e+(vo++).toString(),o=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+i+r+"$3")}),n=n.replace(new RegExp(r,"g"),""),n}const dn=Object.create(null);function So(n,e){dn[n]=e}function hn(n){return dn[n]||dn[""]}function $n(n){let e;if(typeof n.resources=="string")e=[n.resources];else if(e=n.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:n.path||"/",maxURL:n.maxURL||500,rotate:n.rotate||750,timeout:n.timeout||5e3,random:n.random===!0,index:n.index||0,dataAfterTimeout:n.dataAfterTimeout!==!1}}const Tn=Object.create(null),Ne=["https://api.simplesvg.com","https://api.unisvg.com"],mt=[];for(;Ne.length>0;)Ne.length===1||Math.random()>.5?mt.push(Ne.shift()):mt.push(Ne.pop());Tn[""]=$n({resources:["https://api.iconify.design"].concat(mt)});function Ao(n,e){const t=$n(e);return t===null?!1:(Tn[n]=t,!0)}function Pn(n){return Tn[n]}const Io=()=>{let n;try{if(n=fetch,typeof n=="function")return n}catch{}};let gs=Io();function Co(n,e){const t=Pn(n);if(!t)return 0;let s;if(!t.maxURL)s=0;else{let r=0;t.resources.forEach(i=>{r=Math.max(r,i.length)});const a=e+".json?icons=";s=t.maxURL-r-t.path.length-a.length}return s}function Ro(n){return n===404}const Eo=(n,e,t)=>{const s=[],r=Co(n,e),a="icons";let i={type:a,provider:n,prefix:e,icons:[]},o=0;return t.forEach((l,c)=>{o+=l.length+1,o>=r&&c>0&&(s.push(i),i={type:a,provider:n,prefix:e,icons:[]},o=l.length),i.icons.push(l)}),s.push(i),s};function ko(n){if(typeof n=="string"){const e=Pn(n);if(e)return e.path}return"/"}const Oo=(n,e,t)=>{if(!gs){t("abort",424);return}let s=ko(e.provider);switch(e.type){case"icons":{const a=e.prefix,o=e.icons.join(","),l=new URLSearchParams({icons:o});s+=a+".json?"+l.toString();break}case"custom":{const a=e.uri;s+=a.slice(0,1)==="/"?a.slice(1):a;break}default:t("abort",400);return}let r=503;gs(n+s).then(a=>{const i=a.status;if(i!==200){setTimeout(()=>{t(Ro(i)?"abort":"next",i)});return}return r=501,a.json()}).then(a=>{if(typeof a!="object"||a===null){setTimeout(()=>{a===404?t("abort",a):t("next",r)});return}setTimeout(()=>{t("success",a)})}).catch(()=>{t("next",r)})},$o={prepare:Eo,send:Oo};function To(n){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);n.sort((r,a)=>r.provider!==a.provider?r.provider.localeCompare(a.provider):r.prefix!==a.prefix?r.prefix.localeCompare(a.prefix):r.name.localeCompare(a.name));let s={provider:"",prefix:"",name:""};return n.forEach(r=>{if(s.name===r.name&&s.prefix===r.prefix&&s.provider===r.provider)return;s=r;const a=r.provider,i=r.prefix,o=r.name,l=t[a]||(t[a]=Object.create(null)),c=l[i]||(l[i]=Oe(a,i));let f;o in c.icons?f=e.loaded:i===""||c.missing.has(o)?f=e.missing:f=e.pending;const u={provider:a,prefix:i,name:o};f.push(u)}),e}function vr(n,e){n.forEach(t=>{const s=t.loaderCallbacks;s&&(t.loaderCallbacks=s.filter(r=>r.id!==e))})}function Po(n){n.pendingCallbacksFlag||(n.pendingCallbacksFlag=!0,setTimeout(()=>{n.pendingCallbacksFlag=!1;const e=n.loaderCallbacks?n.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const s=n.provider,r=n.prefix;e.forEach(a=>{const i=a.icons,o=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==r)return!0;const c=l.name;if(n.icons[c])i.loaded.push({provider:s,prefix:r,name:c});else if(n.missing.has(c))i.missing.push({provider:s,prefix:r,name:c});else return t=!0,!0;return!1}),i.pending.length!==o&&(t||vr([n],a.id),a.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),a.abort))})}))}let No=0;function Mo(n,e,t){const s=No++,r=vr.bind(null,t,s);if(!e.pending.length)return r;const a={id:s,icons:e,callback:n,abort:r};return t.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(a)}),r}function Lo(n,e=!0,t=!1){const s=[];return n.forEach(r=>{const a=typeof r=="string"?Lt(r,e,t):r;a&&s.push(a)}),s}var Fo={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Do(n,e,t,s){const r=n.resources.length,a=n.random?Math.floor(Math.random()*r):n.index;let i;if(n.random){let A=n.resources.slice(0);for(i=[];A.length>1;){const S=Math.floor(Math.random()*A.length);i.push(A[S]),A=A.slice(0,S).concat(A.slice(S+1))}i=i.concat(A)}else i=n.resources.slice(a).concat(n.resources.slice(0,a));const o=Date.now();let l="pending",c=0,f,u=null,h=[],m=[];typeof s=="function"&&m.push(s);function g(){u&&(clearTimeout(u),u=null)}function y(){l==="pending"&&(l="aborted"),g(),h.forEach(A=>{A.status==="pending"&&(A.status="aborted")}),h=[]}function w(A,S){S&&(m=[]),typeof A=="function"&&m.push(A)}function b(){return{startTime:o,payload:e,status:l,queriesSent:c,queriesPending:h.length,subscribe:w,abort:y}}function p(){l="failed",m.forEach(A=>{A(void 0,f)})}function v(){h.forEach(A=>{A.status==="pending"&&(A.status="aborted")}),h=[]}function _(A,S,N){const O=S!=="success";switch(h=h.filter(T=>T!==A),l){case"pending":break;case"failed":if(O||!n.dataAfterTimeout)return;break;default:return}if(S==="abort"){f=N,p();return}if(O){f=N,h.length||(i.length?C():p());return}if(g(),v(),!n.random){const T=n.resources.indexOf(A.resource);T!==-1&&T!==n.index&&(n.index=T)}l="completed",m.forEach(T=>{T(N)})}function C(){if(l!=="pending")return;g();const A=i.shift();if(A===void 0){if(h.length){u=setTimeout(()=>{g(),l==="pending"&&(v(),p())},n.timeout);return}p();return}const S={status:"pending",resource:A,callback:(N,O)=>{_(S,N,O)}};h.push(S),c++,u=setTimeout(C,n.rotate),t(A,e,S.callback)}return setTimeout(C),b}function xr(n){const e={...Fo,...n};let t=[];function s(){t=t.filter(o=>o().status==="pending")}function r(o,l,c){const f=Do(e,o,l,(u,h)=>{s(),c&&c(u,h)});return t.push(f),f}function a(o){return t.find(l=>o(l))||null}return{query:r,find:a,setIndex:o=>{e.index=o},getIndex:()=>e.index,cleanup:s}}function _s(){}const Yt=Object.create(null);function Bo(n){if(!Yt[n]){const e=Pn(n);if(!e)return;const t=xr(e),s={config:e,redundancy:t};Yt[n]=s}return Yt[n]}function jo(n,e,t){let s,r;if(typeof n=="string"){const a=hn(n);if(!a)return t(void 0,424),_s;r=a.send;const i=Bo(n);i&&(s=i.redundancy)}else{const a=$n(n);if(a){s=xr(a);const i=n.resources?n.resources[0]:"",o=hn(i);o&&(r=o.send)}}return!s||!r?(t(void 0,424),_s):s.query(e,r,t)().abort}function ys(){}function Uo(n){n.iconsLoaderFlag||(n.iconsLoaderFlag=!0,setTimeout(()=>{n.iconsLoaderFlag=!1,Po(n)}))}function Wo(n){const e=[],t=[];return n.forEach(s=>{(s.match(hr)?e:t).push(s)}),{valid:e,invalid:t}}function Me(n,e,t){function s(){const r=n.pendingIcons;e.forEach(a=>{r&&r.delete(a),n.icons[a]||n.missing.add(a)})}if(t&&typeof t=="object")try{if(!_r(n,t).length){s();return}}catch(r){console.error(r)}s(),Uo(n)}function ws(n,e){n instanceof Promise?n.then(t=>{e(t)}).catch(()=>{e(null)}):e(n)}function qo(n,e){n.iconsToLoad?n.iconsToLoad=n.iconsToLoad.concat(e).sort():n.iconsToLoad=e,n.iconsQueueFlag||(n.iconsQueueFlag=!0,setTimeout(()=>{n.iconsQueueFlag=!1;const{provider:t,prefix:s}=n,r=n.iconsToLoad;if(delete n.iconsToLoad,!r||!r.length)return;const a=n.loadIcon;if(n.loadIcons&&(r.length>1||!a)){ws(n.loadIcons(r,s,t),f=>{Me(n,r,f)});return}if(a){r.forEach(f=>{const u=a(f,s,t);ws(u,h=>{const m=h?{prefix:s,icons:{[f]:h}}:null;Me(n,[f],m)})});return}const{valid:i,invalid:o}=Wo(r);if(o.length&&Me(n,o,null),!i.length)return;const l=s.match(hr)?hn(t):null;if(!l){Me(n,i,null);return}l.prepare(t,s,i).forEach(f=>{jo(t,f,u=>{Me(n,f.icons,u)})})}))}const Ho=(n,e)=>{const t=Lo(n,!0,yr()),s=To(t);if(!s.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(s.loaded,s.missing,s.pending,ys)}),()=>{l=!1}}const r=Object.create(null),a=[];let i,o;return s.pending.forEach(l=>{const{provider:c,prefix:f}=l;if(f===o&&c===i)return;i=c,o=f,a.push(Oe(c,f));const u=r[c]||(r[c]=Object.create(null));u[f]||(u[f]=[])}),s.pending.forEach(l=>{const{provider:c,prefix:f,name:u}=l,h=Oe(c,f),m=h.pendingIcons||(h.pendingIcons=new Set);m.has(u)||(m.add(u),r[c][f].push(u))}),a.forEach(l=>{const c=r[l.provider][l.prefix];c.length&&qo(l,c)}),e?Mo(e,s,a):ys};function Jo(n,e){const t={...n};for(const s in e){const r=e[s],a=typeof r;s in wr?(r===null||r&&(a==="string"||a==="number"))&&(t[s]=r):a===typeof t[s]&&(t[s]=s==="rotate"?r%4:r)}return t}const Xo=/[\s,]+/;function Vo(n,e){e.split(Xo).forEach(t=>{switch(t.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0;break}})}function Ko(n,e=0){const t=n.replace(/^-?[0-9.]*/,"");function s(r){for(;r<0;)r+=4;return r%4}if(t===""){const r=parseInt(n);return isNaN(r)?0:s(r)}else if(t!==n){let r=0;switch(t){case"%":r=25;break;case"deg":r=90}if(r){let a=parseFloat(n.slice(0,n.length-t.length));return isNaN(a)?0:(a=a/r,a%1===0?s(a):0)}}return e}function Qo(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in e)t+=" "+s+'="'+e[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}function zo(n){return n.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Go(n){return"data:image/svg+xml,"+zo(n)}function Yo(n){return'url("'+Go(n)+'")'}const bs={...br,inline:!1},Zo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},el={display:"inline-block"},mn={"background-color":"currentColor"},Sr={"background-color":"transparent"},vs={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},xs={"-webkit-mask":mn,mask:mn,background:Sr};for(const n in xs){const e=xs[n];for(const t in vs)e[n+"-"+t]=vs[t]}function tl(n){return n+(n.match(/^[-0-9.]+$/)?"px":"")}function nl(n,e){const t=Jo(bs,e),s=e.mode||"svg",r=s==="svg"?{...Zo}:{};n.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let a=typeof e.style=="string"?e.style:"";for(let b in e){const p=e[b];if(p!==void 0)switch(b){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":t[b]=p===!0||p==="true"||p===1;break;case"flip":typeof p=="string"&&Vo(t,p);break;case"color":a=a+(a.length>0&&a.trim().slice(-1)!==";"?";":"")+"color: "+p+"; ";break;case"rotate":typeof p=="string"?t[b]=Ko(p):typeof p=="number"&&(t[b]=p);break;case"ariaHidden":case"aria-hidden":p!==!0&&p!=="true"&&delete r["aria-hidden"];break;default:if(b.slice(0,3)==="on:")break;bs[b]===void 0&&(r[b]=p)}}const i=yo(n,t),o=i.attributes;if(t.inline&&(a="vertical-align: -0.125em; "+a),s==="svg"){Object.assign(r,o),a!==""&&(r.style=a);let b=0,p=e.id;return typeof p=="string"&&(p=p.replace(/-/g,"_")),{svg:!0,attributes:r,body:xo(i.body,p?()=>p+"ID"+b++:"iconifySvelte")}}const{body:l,width:c,height:f}=n,u=s==="mask"||(s==="bg"?!1:l.indexOf("currentColor")!==-1),h=Qo(l,{...o,width:c+"",height:f+""}),g={"--svg":Yo(h)},y=b=>{const p=o[b];p&&(g[b]=tl(p))};y("width"),y("height"),Object.assign(g,el,u?mn:Sr);let w="";for(const b in g)w+=b+": "+g[b]+";";return r.style=w+a,{svg:!1,attributes:r}}yr(!0);So("",$o);if(typeof document<"u"&&typeof window<"u"){const n=window;if(n.IconifyPreload!==void 0){const e=n.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!uo(s))&&console.error(t)}catch{console.error(t)}})}if(n.IconifyProviders!==void 0){const e=n.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const s="IconifyProviders["+t+"] is invalid.";try{const r=e[t];if(typeof r!="object"||!r||r.resources===void 0)continue;Ao(t,r)||console.error(s)}catch{console.error(s)}}}}function sl(n,e,t,s,r){function a(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof n=="object"&&n!==null&&typeof n.body=="string")return e.name="",a(),{data:{...Ft,...n}};let i;if(typeof n!="string"||(i=Lt(n,!1,!0))===null)return a(),null;const o=lo(i);if(!o)return t&&(!e.loading||e.loading.name!==n)&&(a(),e.name="",e.loading={name:n,abort:Ho([i],s)}),null;a(),e.name!==n&&(e.name=n,r&&!e.destroyed&&r(n));const l=["iconify"];return i.prefix!==""&&l.push("iconify--"+i.prefix),i.provider!==""&&l.push("iconify--"+i.provider),{data:o,classes:l}}function rl(n,e){return n?nl({...Ft,...n},e):null}var al=Ci("<svg><!></svg>"),il=we("<span></span>");function Ss(n,e){nr(e,!0);const t={name:"",loading:null,destroyed:!1},s=Fi(e,["$$slots","$$events","$$legacy"]);let r=pe(!1),a=pe(0),i=pe(null);Ai(()=>{M(a);const u=!!e.ssr||M(r),h=sl(e.icon,t,u,o,e.onload),m=h?rl(h.data,s):null;m&&h.classes&&(m.attributes.class=(typeof s.class=="string"?s.class+" ":"")+h.classes.join(" ")),oe(i,m,!0)});function o(){Ii(a)}Ni(()=>{oe(r,!0)}),Mi(()=>{t.destroyed=!0,t.loading&&(t.loading.abort(),t.loading=null)});var l=rs(),c=as(l);{var f=u=>{var h=rs(),m=as(h);{var g=w=>{var b=al();fs(b,()=>({...M(i).attributes}));var p=V(b);Wi(p,()=>M(i).body,!0),X(b),Y(w,b)},y=w=>{var b=il();fs(b,()=>({...M(i).attributes})),Y(w,b)};Ve(m,w=>{M(i).svg?w(g):w(y,!1)})}Y(u,h)};Ve(c,u=>{M(i)&&u(f)})}Y(n,l),sr()}function E(n,e,t,s,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function d(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)}let Ar=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Ar=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};function pn(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const gn=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class R extends Error{}class W extends R{constructor(e,t,s,r){super(`${W.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.requestID=r==null?void 0:r.get("x-request-id"),this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Dt({message:s,cause:gn(t)});const a=t==null?void 0:t.error;return e===400?new Ir(e,a,s,r):e===401?new Cr(e,a,s,r):e===403?new Rr(e,a,s,r):e===404?new Er(e,a,s,r):e===409?new kr(e,a,s,r):e===422?new Or(e,a,s,r):e===429?new $r(e,a,s,r):e>=500?new Tr(e,a,s,r):new W(e,a,s,r)}}class ee extends W{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Dt extends W{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Nn extends Dt{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ir extends W{}class Cr extends W{}class Rr extends W{}class Er extends W{}class kr extends W{}class Or extends W{}class $r extends W{}class Tr extends W{}class Pr extends R{constructor(){super("Could not parse response content as the length limit was reached")}}class Nr extends R{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Fe extends Error{constructor(e){super(e)}}const ol=/^[a-z][a-z0-9+.-]*:/i,ll=n=>ol.test(n);let K=n=>(K=Array.isArray,K(n)),As=K;function cl(n){return typeof n!="object"?{}:n??{}}function ul(n){if(!n)return!0;for(const e in n)return!1;return!0}function fl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Zt(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const dl=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new R(`${n} must be an integer`);if(e<0)throw new R(`${n} must be a positive integer`);return e},hl=n=>{try{return JSON.parse(n)}catch{return}},et=n=>new Promise(e=>setTimeout(e,n)),Ce="5.8.2",ml=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function pl(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const gl=()=>{var t;const n=pl();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ce,"X-Stainless-OS":Cs(Deno.build.os),"X-Stainless-Arch":Is(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ce,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ce,"X-Stainless-OS":Cs(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Is(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=_l();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ce,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ce,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function _l(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,a=s[2]||0,i=s[3]||0;return{browser:e,version:`${r}.${a}.${i}`}}}return null}const Is=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Cs=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Rs;const yl=()=>Rs??(Rs=gl());function wl(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Mr(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function Lr(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Mr({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function Fr(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function bl(n){var s,r;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((r=(s=n[Symbol.asyncIterator]()).return)==null?void 0:r.call(s));return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const vl=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Dr="RFC3986",Br=n=>String(n),Es={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:Br},xl="RFC1738";let _n=(n,e)=>(_n=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),_n(n,e));const ne=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),en=1024,Sl=(n,e,t,s,r)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<a.length;o+=en){const l=a.length>=en?a.slice(o,o+en):a,c=[];for(let f=0;f<l.length;++f){let u=l.charCodeAt(f);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||r===xl&&(u===40||u===41)){c[c.length]=l.charAt(f);continue}if(u<128){c[c.length]=ne[u];continue}if(u<2048){c[c.length]=ne[192|u>>6]+ne[128|u&63];continue}if(u<55296||u>=57344){c[c.length]=ne[224|u>>12]+ne[128|u>>6&63]+ne[128|u&63];continue}f+=1,u=65536+((u&1023)<<10|l.charCodeAt(f)&1023),c[c.length]=ne[240|u>>18]+ne[128|u>>12&63]+ne[128|u>>6&63]+ne[128|u&63]}i+=c.join("")}return i};function Al(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function ks(n,e){if(K(n)){const t=[];for(let s=0;s<n.length;s+=1)t.push(e(n[s]));return t}return e(n)}const jr={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},Ur=function(n,e){Array.prototype.push.apply(n,K(e)?e:[e])};let Os;const B={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Sl,encodeValuesOnly:!1,format:Dr,formatter:Br,indices:!1,serializeDate(n){return(Os??(Os=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function Il(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const tn={};function Wr(n,e,t,s,r,a,i,o,l,c,f,u,h,m,g,y,w,b){let p=n,v=b,_=0,C=!1;for(;(v=v.get(tn))!==void 0&&!C;){const T=v.get(n);if(_+=1,typeof T<"u"){if(T===_)throw new RangeError("Cyclic object value");C=!0}typeof v.get(tn)>"u"&&(_=0)}if(typeof c=="function"?p=c(e,p):p instanceof Date?p=h==null?void 0:h(p):t==="comma"&&K(p)&&(p=ks(p,function(T){return T instanceof Date?h==null?void 0:h(T):T})),p===null){if(a)return l&&!y?l(e,B.encoder,w,"key",m):e;p=""}if(Il(p)||Al(p)){if(l){const T=y?e:l(e,B.encoder,w,"key",m);return[(g==null?void 0:g(T))+"="+(g==null?void 0:g(l(p,B.encoder,w,"value",m)))]}return[(g==null?void 0:g(e))+"="+(g==null?void 0:g(String(p)))]}const A=[];if(typeof p>"u")return A;let S;if(t==="comma"&&K(p))y&&l&&(p=ks(p,l)),S=[{value:p.length>0?p.join(",")||null:void 0}];else if(K(c))S=c;else{const T=Object.keys(p);S=f?T.sort(f):T}const N=o?String(e).replace(/\./g,"%2E"):String(e),O=s&&K(p)&&p.length===1?N+"[]":N;if(r&&K(p)&&p.length===0)return O+"[]";for(let T=0;T<S.length;++T){const P=S[T],le=typeof P=="object"&&typeof P.value<"u"?P.value:p[P];if(i&&le===null)continue;const L=u&&o?P.replace(/\./g,"%2E"):P,Z=K(p)?typeof t=="function"?t(O,L):O:O+(u?"."+L:"["+L+"]");b.set(n,_);const be=new WeakMap;be.set(tn,b),Ur(A,Wr(le,Z,t,s,r,a,i,o,t==="comma"&&y&&K(p)?null:l,c,f,u,h,m,g,y,w,be))}return A}function Cl(n=B){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||B.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=Dr;if(typeof n.format<"u"){if(!_n(Es,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const s=Es[t];let r=B.filter;(typeof n.filter=="function"||K(n.filter))&&(r=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in jr?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=B.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:B.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:B.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:B.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:B.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?B.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:B.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:B.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:B.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:B.encodeValuesOnly,filter:r,format:t,formatter:s,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:B.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:B.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:B.strictNullHandling}}function Rl(n,e={}){let t=n;const s=Cl(e);let r,a;typeof s.filter=="function"?(a=s.filter,t=a("",t)):K(s.filter)&&(a=s.filter,r=a);const i=[];if(typeof t!="object"||t===null)return"";const o=jr[s.arrayFormat],l=o==="comma"&&s.commaRoundTrip;r||(r=Object.keys(t)),s.sort&&r.sort(s.sort);const c=new WeakMap;for(let h=0;h<r.length;++h){const m=r[h];s.skipNulls&&t[m]===null||Ur(i,Wr(t[m],m,o,l,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,c))}const f=i.join(s.delimiter);let u=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?u+="utf8=%26%2310003%3B&":u+="utf8=%E2%9C%93&"),f.length>0?u+f:""}function El(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let $s;function Mn(n){let e;return($s??(e=new globalThis.TextEncoder,$s=e.encode.bind(e)))(n)}let Ts;function Ps(n){let e;return(Ts??(e=new globalThis.TextDecoder,Ts=e.decode.bind(e)))(n)}var Q,z;class Bt{constructor(){Q.set(this,void 0),z.set(this,void 0),E(this,Q,new Uint8Array),E(this,z,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Mn(e):e;E(this,Q,El([d(this,Q,"f"),t]));const s=[];let r;for(;(r=kl(d(this,Q,"f"),d(this,z,"f")))!=null;){if(r.carriage&&d(this,z,"f")==null){E(this,z,r.index);continue}if(d(this,z,"f")!=null&&(r.index!==d(this,z,"f")+1||r.carriage)){s.push(Ps(d(this,Q,"f").subarray(0,d(this,z,"f")-1))),E(this,Q,d(this,Q,"f").subarray(d(this,z,"f"))),E(this,z,null);continue}const a=d(this,z,"f")!==null?r.preceding-1:r.preceding,i=Ps(d(this,Q,"f").subarray(0,a));s.push(i),E(this,Q,d(this,Q,"f").subarray(r.index)),E(this,z,null)}return s}flush(){return d(this,Q,"f").length?this.decode(`
`):[]}}Q=new WeakMap,z=new WeakMap;Bt.NEWLINE_CHARS=new Set([`
`,"\r"]);Bt.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kl(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Ol(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}class re{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;async function*r(){if(s)throw new R("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const i of $l(e,t))if(!a){if(i.data.startsWith("[DONE]")){a=!0;continue}if(i.event===null||i.event.startsWith("response.")||i.event.startsWith("transcript.")){let o;try{o=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(o&&o.error)throw new W(void 0,o.error,void 0,e.headers);yield o}else{let o;try{o=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(i.event=="error")throw new W(void 0,o.error,o.message,void 0);yield{event:i.event,data:o}}}a=!0}catch(i){if(pn(i))return;throw i}finally{a||t.abort()}}return new re(r,t)}static fromReadableStream(e,t){let s=!1;async function*r(){const i=new Bt,o=Fr(e);for await(const l of o)for(const c of i.decode(l))yield c;for(const l of i.flush())yield l}async function*a(){if(s)throw new R("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let i=!1;try{for await(const o of r())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(pn(o))return;throw o}finally{i||t.abort()}}return new re(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=a=>({next:()=>{if(a.length===0){const i=s.next();e.push(i),t.push(i)}return a.shift()}});return[new re(()=>r(e),this.controller),new re(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;return Mr({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:a}=await t.next();if(a)return s.close();const i=Mn(JSON.stringify(r)+`
`);s.enqueue(i)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)==null?void 0:s.call(t))}})}}async function*$l(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new R("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new R("Attempted to iterate over a response with no body");const t=new Pl,s=new Bt,r=Fr(n.body);for await(const a of Tl(r))for(const i of s.decode(a)){const o=t.decode(i);o&&(yield o)}for(const a of s.flush()){const i=t.decode(a);i&&(yield i)}}async function*Tl(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Mn(t):t;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let a;for(;(a=Ol(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class Pl{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=Nl(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function Nl(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const Et={off:0,error:200,warn:300,info:400,debug:500},Ns=(n,e,t)=>{if(n){if(fl(Et,n))return n;q(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Et))}`)}};function De(){}function at(n,e,t){return!e||Et[n]>Et[t]?De:e[n].bind(e)}const Ml={error:De,warn:De,info:De,debug:De};let Ms=new WeakMap;function q(n){const e=n.logger,t=n.logLevel??"off";if(!e)return Ml;const s=Ms.get(e);if(s&&s[0]===t)return s[1];const r={error:at("error",e,t),warn:at("warn",e,t),info:at("info",e,t),debug:at("debug",e,t)};return Ms.set(e,[t,r]),r}const de=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);async function qr(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:a}=e,i=await(async()=>{var u;if(e.options.stream)return q(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):re.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const o=t.headers.get("content-type"),l=(u=o==null?void 0:o.split(";")[0])==null?void 0:u.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const h=await t.json();return Hr(h,t)}return await t.text()})();return q(n).debug(`[${s}] response parsed`,de({retryOfRequestLogID:r,url:t.url,status:t.status,body:i,durationMs:Date.now()-a})),i}function Hr(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Be;class jt extends Promise{constructor(e,t,s=qr){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,Be.set(this,void 0),E(this,Be,e)}_thenUnwrap(e){return new jt(d(this,Be,"f"),this.responsePromise,async(t,s)=>Hr(e(await this.parseResponse(t,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(d(this,Be,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Be=new WeakMap;var it;class Jr{constructor(e,t,s,r){it.set(this,void 0),E(this,it,e),this.options=r,this.response=t,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new R("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await d(this,it,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(it=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Ll extends jt{constructor(e,t,s){super(e,t,async(r,a)=>new s(r,a.response,await qr(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class Ut extends Jr{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class F extends Jr{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),t=(s=e[e.length-1])==null?void 0:s.id;return t?{...this.options,query:{...cl(this.options.query),after:t}}:null}}const Xr=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Qe(n,e,t){return Xr(),new File(n,e??"unknown_file",t)}function pt(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const Vr=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",ye=async(n,e)=>({...n,body:await Dl(n.body,e)}),Ls=new WeakMap;function Fl(n){const e=typeof n=="function"?n:n.fetch,t=Ls.get(e);if(t)return t;const s=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return Ls.set(e,s),s}const Dl=async(n,e)=>{if(!await Fl(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([s,r])=>yn(t,s,r))),t},Bl=n=>n instanceof Blob&&"name"in n,yn=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,Qe([await t.blob()],pt(t)));else if(Vr(t))n.append(e,Qe([await new Response(Lr(t)).blob()],pt(t)));else if(Bl(t))n.append(e,t,pt(t));else if(Array.isArray(t))await Promise.all(t.map(s=>yn(n,e+"[]",s)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([s,r])=>yn(n,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},Kr=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",jl=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Kr(n),Ul=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Wl(n,e,t){if(Xr(),n=await n,jl(n))return n instanceof File?n:Qe([await n.arrayBuffer()],n.name);if(Ul(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Qe(await wn(r),e,t)}const s=await wn(n);if(e||(e=pt(n)),!(t!=null&&t.type)){const r=s.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t={...t,type:r})}return Qe(s,e,t)}async function wn(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(Kr(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(Vr(n))for await(const s of n)e.push(...await wn(s));else{const s=(t=n==null?void 0:n.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof n}${s?`; constructor: ${s}`:""}${ql(n)}`)}return e}function ql(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class k{constructor(e){this._client=e}}function Qr(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Hl=(n=Qr)=>function(t,...s){if(t.length===1)return t[0];let r=!1;const a=t.reduce((f,u,h)=>(/[?#]/.test(u)&&(r=!0),f+u+(h===s.length?"":(r?encodeURIComponent:n)(String(s[h])))),""),i=a.split(/[?#]/,1)[0],o=[],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(i))!==null;)o.push({start:c.index,length:c[0].length});if(o.length>0){let f=0;const u=o.reduce((h,m)=>{const g=" ".repeat(m.start-f),y="^".repeat(m.length);return f=m.start+m.length,h+g+y},"");throw new R(`Path parameters result in path with invalid segments:
${a}
${u}`)}return a},x=Hl(Qr);let zr=class extends k{list(e,t={},s){return this._client.getAPIList(x`/chat/completions/${e}/messages`,F,{query:t,...s})}};function Jl(n){return typeof n.parse=="function"}const kt=n=>(n==null?void 0:n.role)==="assistant",Gr=n=>(n==null?void 0:n.role)==="tool";var bn,gt,_t,je,Ue,yt,We,ie,qe,Ot,$t,Re,Yr;class Ln{constructor(){bn.add(this),this.controller=new AbortController,gt.set(this,void 0),_t.set(this,()=>{}),je.set(this,()=>{}),Ue.set(this,void 0),yt.set(this,()=>{}),We.set(this,()=>{}),ie.set(this,{}),qe.set(this,!1),Ot.set(this,!1),$t.set(this,!1),Re.set(this,!1),E(this,gt,new Promise((e,t)=>{E(this,_t,e,"f"),E(this,je,t,"f")})),E(this,Ue,new Promise((e,t)=>{E(this,yt,e,"f"),E(this,We,t,"f")})),d(this,gt,"f").catch(()=>{}),d(this,Ue,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},d(this,bn,"m",Yr).bind(this))},0)}_connected(){this.ended||(d(this,_t,"f").call(this),this._emit("connect"))}get ended(){return d(this,qe,"f")}get errored(){return d(this,Ot,"f")}get aborted(){return d(this,$t,"f")}abort(){this.controller.abort()}on(e,t){return(d(this,ie,"f")[e]||(d(this,ie,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=d(this,ie,"f")[e];if(!s)return this;const r=s.findIndex(a=>a.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(d(this,ie,"f")[e]||(d(this,ie,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{E(this,Re,!0),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){E(this,Re,!0),await d(this,Ue,"f")}_emit(e,...t){if(d(this,qe,"f"))return;e==="end"&&(E(this,qe,!0),d(this,yt,"f").call(this));const s=d(this,ie,"f")[e];if(s&&(d(this,ie,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!d(this,Re,"f")&&!(s!=null&&s.length)&&Promise.reject(r),d(this,je,"f").call(this,r),d(this,We,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!d(this,Re,"f")&&!(s!=null&&s.length)&&Promise.reject(r),d(this,je,"f").call(this,r),d(this,We,"f").call(this,r),this._emit("end")}}_emitFinal(){}}gt=new WeakMap,_t=new WeakMap,je=new WeakMap,Ue=new WeakMap,yt=new WeakMap,We=new WeakMap,ie=new WeakMap,qe=new WeakMap,Ot=new WeakMap,$t=new WeakMap,Re=new WeakMap,bn=new WeakSet,Yr=function(e){if(E(this,Ot,!0),e instanceof Error&&e.name==="AbortError"&&(e=new ee),e instanceof ee)return E(this,$t,!0),this._emit("abort",e);if(e instanceof R)return this._emit("error",e);if(e instanceof Error){const t=new R(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new R(String(e)))};function Fn(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function tt(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function Xl(n,e){return!e||!Zr(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:Dn(n,e)}function Dn(n,e){const t=n.choices.map(s=>{var r;if(s.finish_reason==="length")throw new Pr;if(s.finish_reason==="content_filter")throw new Nr;return{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((r=s.message.tool_calls)==null?void 0:r.map(a=>Kl(e,a)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?Vl(e,s.message.content):null}}});return{...n,choices:t}}function Vl(n,e){var t,s;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((s=n.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function Kl(n,e){var s;const t=(s=n.tools)==null?void 0:s.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:tt(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function Ql(n,e){var s;if(!n)return!1;const t=(s=n.tools)==null?void 0:s.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return tt(t)||(t==null?void 0:t.function.strict)||!1}function Zr(n){var e;return Fn(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>tt(t)||t.type==="function"&&t.function.strict===!0))??!1}function zl(n){for(const e of n??[]){if(e.type!=="function")throw new R(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new R(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var J,vn,Tt,xn,Sn,An,ea,ta;const Gl=10;class na extends Ln{constructor(){super(...arguments),J.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(s=e.choices[0])==null?void 0:s.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),Gr(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(kt(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new R("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),d(this,J,"m",vn).call(this)}async finalMessage(){return await this.done(),d(this,J,"m",Tt).call(this)}async finalFunctionToolCall(){return await this.done(),d(this,J,"m",xn).call(this)}async finalFunctionToolCallResult(){return await this.done(),d(this,J,"m",Sn).call(this)}async totalUsage(){return await this.done(),d(this,J,"m",An).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=d(this,J,"m",Tt).call(this);t&&this._emit("finalMessage",t);const s=d(this,J,"m",vn).call(this);s&&this._emit("finalContent",s);const r=d(this,J,"m",xn).call(this);r&&this._emit("finalFunctionToolCall",r);const a=d(this,J,"m",Sn).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",d(this,J,"m",An).call(this))}async _createChatCompletion(e,t,s){const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),d(this,J,"m",ea).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Dn(a,t))}async _runChatCompletion(e,t,s){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,s)}async _runTools(e,t,s){var m,g,y;const r="tool",{tool_choice:a="auto",stream:i,...o}=t,l=typeof a!="string"&&((m=a==null?void 0:a.function)==null?void 0:m.name),{maxChatCompletions:c=Gl}=s||{},f=t.tools.map(w=>{if(tt(w)){if(!w.$callback)throw new R("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),u={};for(const w of f)w.type==="function"&&(u[w.function.name||w.function.function.name]=w.function);const h="tools"in t?f.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of t.messages)this._addMessage(w,!1);for(let w=0;w<c;++w){const p=(g=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:h,messages:[...this.messages]},s)).choices[0])==null?void 0:g.message;if(!p)throw new R("missing message in ChatCompletion response");if(!((y=p.tool_calls)!=null&&y.length))return;for(const v of p.tool_calls){if(v.type!=="function")continue;const _=v.id,{name:C,arguments:A}=v.function,S=u[C];if(S){if(l&&l!==C){const P=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:_,content:P});continue}}else{const P=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(u).map(le=>JSON.stringify(le)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:_,content:P});continue}let N;try{N=Jl(S)?await S.parse(A):A}catch(P){const le=P instanceof Error?P.message:String(P);this._addMessage({role:r,tool_call_id:_,content:le});continue}const O=await S.function(N,this),T=d(this,J,"m",ta).call(this,O);if(this._addMessage({role:r,tool_call_id:_,content:T}),l)return}}}}J=new WeakSet,vn=function(){return d(this,J,"m",Tt).call(this).content??null},Tt=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(kt(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new R("stream ended without producing a ChatCompletionMessage with role=assistant")},xn=function(){var e,t;for(let s=this.messages.length-1;s>=0;s--){const r=this.messages[s];if(kt(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},Sn=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Gr(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(s=>{var r;return s.role==="assistant"&&((r=s.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},An=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},ea=function(e){if(e.n!=null&&e.n>1)throw new R("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ta=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Bn extends na{static runTools(e,t,s){const r=new Bn,a={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),kt(e)&&e.content&&this._emit("content",e.content)}}const sa=1,ra=2,aa=4,ia=8,oa=16,la=32,ca=64,ua=128,fa=256,da=ua|fa,ha=oa|la|da|ca,ma=sa|ra|ha,pa=aa|ia,Yl=ma|pa,j={STR:sa,NUM:ra,ARR:aa,OBJ:ia,NULL:oa,BOOL:la,NAN:ca,INFINITY:ua,MINUS_INFINITY:fa,INF:da,SPECIAL:ha,ATOM:ma,COLLECTION:pa,ALL:Yl};class Zl extends Error{}class ec extends Error{}function tc(n,e=j.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return nc(n.trim(),e)}const nc=(n,e)=>{const t=n.length;let s=0;const r=h=>{throw new Zl(`${h} at position ${s}`)},a=h=>{throw new ec(`${h} at position ${s}`)},i=()=>(u(),s>=t&&r("Unexpected end of input"),n[s]==='"'?o():n[s]==="{"?l():n[s]==="["?c():n.substring(s,s+4)==="null"||j.NULL&e&&t-s<4&&"null".startsWith(n.substring(s))?(s+=4,null):n.substring(s,s+4)==="true"||j.BOOL&e&&t-s<4&&"true".startsWith(n.substring(s))?(s+=4,!0):n.substring(s,s+5)==="false"||j.BOOL&e&&t-s<5&&"false".startsWith(n.substring(s))?(s+=5,!1):n.substring(s,s+8)==="Infinity"||j.INFINITY&e&&t-s<8&&"Infinity".startsWith(n.substring(s))?(s+=8,1/0):n.substring(s,s+9)==="-Infinity"||j.MINUS_INFINITY&e&&1<t-s&&t-s<9&&"-Infinity".startsWith(n.substring(s))?(s+=9,-1/0):n.substring(s,s+3)==="NaN"||j.NAN&e&&t-s<3&&"NaN".startsWith(n.substring(s))?(s+=3,NaN):f()),o=()=>{const h=s;let m=!1;for(s++;s<t&&(n[s]!=='"'||m&&n[s-1]==="\\");)m=n[s]==="\\"?!m:!1,s++;if(n.charAt(s)=='"')try{return JSON.parse(n.substring(h,++s-Number(m)))}catch(g){a(String(g))}else if(j.STR&e)try{return JSON.parse(n.substring(h,s-Number(m))+'"')}catch{return JSON.parse(n.substring(h,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},l=()=>{s++,u();const h={};try{for(;n[s]!=="}";){if(u(),s>=t&&j.OBJ&e)return h;const m=o();u(),s++;try{const g=i();Object.defineProperty(h,m,{value:g,writable:!0,enumerable:!0,configurable:!0})}catch(g){if(j.OBJ&e)return h;throw g}u(),n[s]===","&&s++}}catch{if(j.OBJ&e)return h;r("Expected '}' at end of object")}return s++,h},c=()=>{s++;const h=[];try{for(;n[s]!=="]";)h.push(i()),u(),n[s]===","&&s++}catch{if(j.ARR&e)return h;r("Expected ']' at end of array")}return s++,h},f=()=>{if(s===0){n==="-"&&j.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(m){if(j.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(m))}}const h=s;for(n[s]==="-"&&s++;n[s]&&!",]}".includes(n[s]);)s++;s==t&&!(j.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(h,s))}catch{n.substring(h,s)==="-"&&j.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(h,n.lastIndexOf("e")))}catch(g){a(String(g))}}},u=()=>{for(;s<t&&` 
\r	`.includes(n[s]);)s++};return i()},Fs=n=>tc(n,j.ALL^j.NUM);var D,ae,xe,ce,nn,ot,sn,rn,an,lt,on,Ds;class Ze extends na{constructor(e){super(),D.add(this),ae.set(this,void 0),xe.set(this,void 0),ce.set(this,void 0),E(this,ae,e),E(this,xe,[])}get currentChatCompletionSnapshot(){return d(this,ce,"f")}static fromReadableStream(e){const t=new Ze(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,s){const r=new Ze(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,s){var i;super._createChatCompletion;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),d(this,D,"m",nn).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const o of a)d(this,D,"m",sn).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new ee;return this._addChatCompletion(d(this,D,"m",lt).call(this))}async _fromReadableStream(e,t){var i;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),d(this,D,"m",nn).call(this),this._connected();const r=re.fromReadableStream(e,this.controller);let a;for await(const o of r)a&&a!==o.id&&this._addChatCompletion(d(this,D,"m",lt).call(this)),d(this,D,"m",sn).call(this,o),a=o.id;if((i=r.controller.signal)!=null&&i.aborted)throw new ee;return this._addChatCompletion(d(this,D,"m",lt).call(this))}[(ae=new WeakMap,xe=new WeakMap,ce=new WeakMap,D=new WeakSet,nn=function(){this.ended||E(this,ce,void 0)},ot=function(t){let s=d(this,xe,"f")[t.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},d(this,xe,"f")[t.index]=s,s)},sn=function(t){var r,a,i,o,l,c,f,u,h,m,g,y,w,b,p;if(this.ended)return;const s=d(this,D,"m",Ds).call(this,t);this._emit("chunk",t,s);for(const v of t.choices){const _=s.choices[v.index];v.delta.content!=null&&((r=_.message)==null?void 0:r.role)==="assistant"&&((a=_.message)!=null&&a.content)&&(this._emit("content",v.delta.content,_.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:_.message.content,parsed:_.message.parsed})),v.delta.refusal!=null&&((i=_.message)==null?void 0:i.role)==="assistant"&&((o=_.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:_.message.refusal}),((l=v.logprobs)==null?void 0:l.content)!=null&&((c=_.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=v.logprobs)==null?void 0:f.content,snapshot:((u=_.logprobs)==null?void 0:u.content)??[]}),((h=v.logprobs)==null?void 0:h.refusal)!=null&&((m=_.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(g=v.logprobs)==null?void 0:g.refusal,snapshot:((y=_.logprobs)==null?void 0:y.refusal)??[]});const C=d(this,D,"m",ot).call(this,_);_.finish_reason&&(d(this,D,"m",an).call(this,_),C.current_tool_call_index!=null&&d(this,D,"m",rn).call(this,_,C.current_tool_call_index));for(const A of v.delta.tool_calls??[])C.current_tool_call_index!==A.index&&(d(this,D,"m",an).call(this,_),C.current_tool_call_index!=null&&d(this,D,"m",rn).call(this,_,C.current_tool_call_index)),C.current_tool_call_index=A.index;for(const A of v.delta.tool_calls??[]){const S=(w=_.message.tool_calls)==null?void 0:w[A.index];S!=null&&S.type&&((S==null?void 0:S.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(b=S.function)==null?void 0:b.name,index:A.index,arguments:S.function.arguments,parsed_arguments:S.function.parsed_arguments,arguments_delta:((p=A.function)==null?void 0:p.arguments)??""}):(S==null||S.type,void 0))}}},rn=function(t,s){var i,o,l;if(d(this,D,"m",ot).call(this,t).done_tool_calls.has(s))return;const a=(i=t.message.tool_calls)==null?void 0:i[s];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(o=d(this,ae,"f"))==null?void 0:o.tools)==null?void 0:l.find(f=>f.type==="function"&&f.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:s,arguments:a.function.arguments,parsed_arguments:tt(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},an=function(t){var r,a;const s=d(this,D,"m",ot).call(this,t);if(t.message.content&&!s.content_done){s.content_done=!0;const i=d(this,D,"m",on).call(this);this._emit("content.done",{content:t.message.content,parsed:i?i.$parseRaw(t.message.content):null})}t.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},lt=function(){if(this.ended)throw new R("stream has ended, this shouldn't happen");const t=d(this,ce,"f");if(!t)throw new R("request ended without sending any chunks");return E(this,ce,void 0),E(this,xe,[]),sc(t,d(this,ae,"f"))},on=function(){var s;const t=(s=d(this,ae,"f"))==null?void 0:s.response_format;return Fn(t)?t:null},Ds=function(t){var s,r,a,i;let o=d(this,ce,"f");const{choices:l,...c}=t;o?Object.assign(o,c):o=E(this,ce,{...c,choices:[]});for(const{delta:f,finish_reason:u,index:h,logprobs:m=null,...g}of t.choices){let y=o.choices[h];if(y||(y=o.choices[h]={finish_reason:u,index:h,message:{},logprobs:m,...g}),m)if(!y.logprobs)y.logprobs=Object.assign({},m);else{const{content:A,refusal:S,...N}=m;Object.assign(y.logprobs,N),A&&((s=y.logprobs).content??(s.content=[]),y.logprobs.content.push(...A)),S&&((r=y.logprobs).refusal??(r.refusal=[]),y.logprobs.refusal.push(...S))}if(u&&(y.finish_reason=u,d(this,ae,"f")&&Zr(d(this,ae,"f")))){if(u==="length")throw new Pr;if(u==="content_filter")throw new Nr}if(Object.assign(y,g),!f)continue;const{content:w,refusal:b,function_call:p,role:v,tool_calls:_,...C}=f;if(Object.assign(y.message,C),b&&(y.message.refusal=(y.message.refusal||"")+b),v&&(y.message.role=v),p&&(y.message.function_call?(p.name&&(y.message.function_call.name=p.name),p.arguments&&((a=y.message.function_call).arguments??(a.arguments=""),y.message.function_call.arguments+=p.arguments)):y.message.function_call=p),w&&(y.message.content=(y.message.content||"")+w,!y.message.refusal&&d(this,D,"m",on).call(this)&&(y.message.parsed=Fs(y.message.content))),_){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:A,id:S,type:N,function:O,...T}of _){const P=(i=y.message.tool_calls)[A]??(i[A]={});Object.assign(P,T),S&&(P.id=S),N&&(P.type=N),O&&(P.function??(P.function={name:O.name??"",arguments:""})),O!=null&&O.name&&(P.function.name=O.name),O!=null&&O.arguments&&(P.function.arguments+=O.arguments,Ql(d(this,ae,"f"),P)&&(P.function.parsed_arguments=Fs(P.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new re(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function sc(n,e){const{id:t,choices:s,created:r,model:a,system_fingerprint:i,...o}=n,l={...o,id:t,choices:s.map(({message:c,finish_reason:f,index:u,logprobs:h,...m})=>{if(!f)throw new R(`missing finish_reason for choice ${u}`);const{content:g=null,function_call:y,tool_calls:w,...b}=c,p=c.role;if(!p)throw new R(`missing role for choice ${u}`);if(y){const{arguments:v,name:_}=y;if(v==null)throw new R(`missing function_call.arguments for choice ${u}`);if(!_)throw new R(`missing function_call.name for choice ${u}`);return{...m,message:{content:g,function_call:{arguments:v,name:_},role:p,refusal:c.refusal??null},finish_reason:f,index:u,logprobs:h}}return w?{...m,index:u,finish_reason:f,logprobs:h,message:{...b,role:p,content:g,refusal:c.refusal??null,tool_calls:w.map((v,_)=>{const{function:C,type:A,id:S,...N}=v,{arguments:O,name:T,...P}=C||{};if(S==null)throw new R(`missing choices[${u}].tool_calls[${_}].id
${ct(n)}`);if(A==null)throw new R(`missing choices[${u}].tool_calls[${_}].type
${ct(n)}`);if(T==null)throw new R(`missing choices[${u}].tool_calls[${_}].function.name
${ct(n)}`);if(O==null)throw new R(`missing choices[${u}].tool_calls[${_}].function.arguments
${ct(n)}`);return{...N,id:S,type:A,function:{...P,name:T,arguments:O}}})}}:{...m,message:{...b,content:g,role:p,refusal:c.refusal??null},finish_reason:f,index:u,logprobs:h}}),created:r,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return Xl(l,e)}function ct(n){return JSON.stringify(n)}class Pt extends Ze{static fromReadableStream(e){const t=new Pt(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,s){const r=new Pt(t),a={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let jn=class extends k{constructor(){super(...arguments),this.messages=new zr(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(x`/chat/completions/${e}`,t)}update(e,t,s){return this._client.post(x`/chat/completions/${e}`,{body:t,...s})}list(e={},t){return this._client.getAPIList("/chat/completions",F,{query:e,...t})}delete(e,t){return this._client.delete(x`/chat/completions/${e}`,t)}parse(e,t){return zl(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>Dn(s,e))}runTools(e,t){return e.stream?Pt.runTools(this._client,e,t):Bn.runTools(this._client,e,t)}stream(e,t){return Ze.createChatCompletion(this._client,e,t)}};jn.Messages=zr;class Un extends k{constructor(){super(...arguments),this.completions=new jn(this._client)}}Un.Completions=jn;const ga=Symbol("brand.privateNullableHeaders");function*rc(n){if(!n)return;if(ga in n){const{values:s,nulls:r}=n;yield*s.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():As(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=As(s[1])?s[1]:[s[1]];let i=!1;for(const o of a)o!==void 0&&(e&&!i&&(i=!0,yield[r,null]),yield[r,o])}}const I=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[a,i]of rc(s)){const o=a.toLowerCase();r.has(o)||(e.delete(a),r.add(o)),i===null?(e.delete(a),t.add(o)):(e.append(a,i),t.delete(o))}}return{[ga]:!0,values:e,nulls:t}};class _a extends k{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:I([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class ya extends k{create(e,t){return this._client.post("/audio/transcriptions",ye({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class wa extends k{create(e,t){return this._client.post("/audio/translations",ye({body:e,...t,__metadata:{model:e.model}},this._client))}}class nt extends k{constructor(){super(...arguments),this.transcriptions=new ya(this._client),this.translations=new wa(this._client),this.speech=new _a(this._client)}}nt.Transcriptions=ya;nt.Translations=wa;nt.Speech=_a;class ba extends k{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(x`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",F,{query:e,...t})}cancel(e,t){return this._client.post(x`/batches/${e}/cancel`,t)}}class va extends k{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(x`/assistants/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(x`/assistants/${e}`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},t){return this._client.getAPIList("/assistants",F,{query:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(x`/assistants/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class xa extends k{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class Sa extends k{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class Wt extends k{constructor(){super(...arguments),this.sessions=new xa(this._client),this.transcriptionSessions=new Sa(this._client)}}Wt.Sessions=xa;Wt.TranscriptionSessions=Sa;class Aa extends k{create(e,t,s){return this._client.post(x`/threads/${e}/messages`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{thread_id:r}=t;return this._client.get(x`/threads/${r}/messages/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{thread_id:r,...a}=t;return this._client.post(x`/threads/${r}/messages/${e}`,{body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(x`/threads/${e}/messages`,F,{query:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t,s){const{thread_id:r}=t;return this._client.delete(x`/threads/${r}/messages/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class Ia extends k{retrieve(e,t,s){const{thread_id:r,run_id:a,...i}=t;return this._client.get(x`/threads/${r}/runs/${a}/steps/${e}`,{query:i,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t,s){const{thread_id:r,...a}=t;return this._client.getAPIList(x`/threads/${r}/runs/${e}/steps`,F,{query:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const ac=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,s=new Uint8Array(t);for(let r=0;r<t;r++)s[r]=e.charCodeAt(r);return Array.from(new Float32Array(s.buffer))}};var ln={};const Se=n=>{var e,t,s,r;if(typeof globalThis.process<"u")return((e=ln==null?void 0:ln[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(r=(s=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:s.call(t,n))==null?void 0:r.trim()};var U,ge,In,se,wt,te,_e,ke,me,Nt,G,bt,vt,ze,He,Je,Bs,js,Us,Ws,qs,Hs,Js;class Ge extends Ln{constructor(){super(...arguments),U.add(this),In.set(this,[]),se.set(this,{}),wt.set(this,{}),te.set(this,void 0),_e.set(this,void 0),ke.set(this,void 0),me.set(this,void 0),Nt.set(this,void 0),G.set(this,void 0),bt.set(this,void 0),vt.set(this,void 0),ze.set(this,void 0)}[(In=new WeakMap,se=new WeakMap,wt=new WeakMap,te=new WeakMap,_e=new WeakMap,ke=new WeakMap,me=new WeakMap,Nt=new WeakMap,G=new WeakMap,bt=new WeakMap,vt=new WeakMap,ze=new WeakMap,U=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ge;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=re.fromReadableStream(e,this.controller);for await(const i of r)d(this,U,"m",He).call(this,i);if((a=r.controller.signal)!=null&&a.aborted)throw new ee;return this._addRun(d(this,U,"m",Je).call(this))}toReadableStream(){return new re(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,s,r){const a=new ge;return a._run(()=>a._runToolAssistantStream(e,t,s,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,t,s,r){var l;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},o=await e.submitToolOutputs(t,i,{...r,signal:this.controller.signal});this._connected();for await(const c of o)d(this,U,"m",He).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new ee;return this._addRun(d(this,U,"m",Je).call(this))}static createThreadAssistantStream(e,t,s){const r=new ge;return r._run(()=>r._threadAssistantStream(e,t,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,s,r){const a=new ge;return a._run(()=>a._runAssistantStream(e,t,s,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return d(this,bt,"f")}currentRun(){return d(this,vt,"f")}currentMessageSnapshot(){return d(this,te,"f")}currentRunStepSnapshot(){return d(this,ze,"f")}async finalRunSteps(){return await this.done(),Object.values(d(this,se,"f"))}async finalMessages(){return await this.done(),Object.values(d(this,wt,"f"))}async finalRun(){if(await this.done(),!d(this,_e,"f"))throw Error("Final run was not received.");return d(this,_e,"f")}async _createThreadAssistantStream(e,t,s){var o;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},i=await e.createAndRun(a,{...s,signal:this.controller.signal});this._connected();for await(const l of i)d(this,U,"m",He).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new ee;return this._addRun(d(this,U,"m",Je).call(this))}async _createAssistantStream(e,t,s,r){var l;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},o=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const c of o)d(this,U,"m",He).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new ee;return this._addRun(d(this,U,"m",Je).call(this))}static accumulateDelta(e,t){for(const[s,r]of Object.entries(t)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let a=e[s];if(a==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Zt(a)&&Zt(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...r);continue}for(const i of r){if(!Zt(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=a[o];l==null?a.push(i):a[o]=this.accumulateDelta(l,i)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${a}`);e[s]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,s){return await this._createThreadAssistantStream(t,e,s)}async _runAssistantStream(e,t,s,r){return await this._createAssistantStream(t,e,s,r)}async _runToolAssistantStream(e,t,s,r){return await this._createToolAssistantStream(t,e,s,r)}}ge=Ge,He=function(e){if(!this.ended)switch(E(this,bt,e),d(this,U,"m",Us).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":d(this,U,"m",Js).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":d(this,U,"m",js).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":d(this,U,"m",Bs).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Je=function(){if(this.ended)throw new R("stream has ended, this shouldn't happen");if(!d(this,_e,"f"))throw Error("Final run has not been received");return d(this,_e,"f")},Bs=function(e){const[t,s]=d(this,U,"m",qs).call(this,e,d(this,te,"f"));E(this,te,t),d(this,wt,"f")[t.id]=t;for(const r of s){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,i=t.content[r.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=d(this,ke,"f")){if(d(this,me,"f"))switch(d(this,me,"f").type){case"text":this._emit("textDone",d(this,me,"f").text,d(this,te,"f"));break;case"image_file":this._emit("imageFileDone",d(this,me,"f").image_file,d(this,te,"f"));break}E(this,ke,r.index)}E(this,me,t.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(d(this,ke,"f")!==void 0){const r=e.data.content[d(this,ke,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,d(this,te,"f"));break;case"text":this._emit("textDone",r.text,d(this,te,"f"));break}}d(this,te,"f")&&this._emit("messageDone",e.data),E(this,te,void 0)}},js=function(e){const t=d(this,U,"m",Ws).call(this,e);switch(E(this,ze,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of s.step_details.tool_calls)a.index==d(this,Nt,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(d(this,G,"f")&&this._emit("toolCallDone",d(this,G,"f")),E(this,Nt,a.index),E(this,G,t.step_details.tool_calls[a.index]),d(this,G,"f")&&this._emit("toolCallCreated",d(this,G,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":E(this,ze,void 0),e.data.step_details.type=="tool_calls"&&d(this,G,"f")&&(this._emit("toolCallDone",d(this,G,"f")),E(this,G,void 0)),this._emit("runStepDone",e.data,t);break}},Us=function(e){d(this,In,"f").push(e),this._emit("event",e)},Ws=function(e){switch(e.event){case"thread.run.step.created":return d(this,se,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=d(this,se,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=ge.accumulateDelta(t,s.delta);d(this,se,"f")[e.data.id]=r}return d(this,se,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":d(this,se,"f")[e.data.id]=e.data;break}if(d(this,se,"f")[e.data.id])return d(this,se,"f")[e.data.id];throw new Error("No snapshot available")},qs=function(e,t){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let i=t.content[a.index];t.content[a.index]=d(this,U,"m",Hs).call(this,a,i)}else t.content[a.index]=a,s.push(a);return[t,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Hs=function(e,t){return ge.accumulateDelta(t,e)},Js=function(e){switch(E(this,vt,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":E(this,_e,e.data),d(this,G,"f")&&(this._emit("toolCallDone",d(this,G,"f")),E(this,G,void 0));break}};let Wn=class extends k{constructor(){super(...arguments),this.steps=new Ia(this._client)}create(e,t,s){const{include:r,...a}=t;return this._client.post(x`/threads/${e}/runs`,{query:{include:r},body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:t.stream??!1})}retrieve(e,t,s){const{thread_id:r}=t;return this._client.get(x`/threads/${r}/runs/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{thread_id:r,...a}=t;return this._client.post(x`/threads/${r}/runs/${e}`,{body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(x`/threads/${e}/runs`,F,{query:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,t,s){const{thread_id:r}=t;return this._client.post(x`/threads/${r}/runs/${e}/cancel`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const r=await this.create(e,t,s);return await this.poll(r.id,{thread_id:e},s)}createAndStream(e,t,s){return Ge.createAssistantStream(e,this._client.beta.threads.runs,t,s)}async poll(e,t,s){var a;const r=I([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=s==null?void 0:s.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:i,response:o}=await this.retrieve(e,t,{...s,headers:{...s==null?void 0:s.headers,...r}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(s!=null&&s.pollIntervalMs)l=s.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(l=f)}}await et(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,t,s){return Ge.createAssistantStream(e,this._client.beta.threads.runs,t,s)}submitToolOutputs(e,t,s){const{thread_id:r,...a}=t;return this._client.post(x`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,s){const r=await this.submitToolOutputs(e,t,s);return await this.poll(r.id,t,s)}submitToolOutputsStream(e,t,s){return Ge.createToolAssistantStream(e,this._client.beta.threads.runs,t,s)}};Wn.Steps=Ia;class qt extends k{constructor(){super(...arguments),this.runs=new Wn(this._client),this.messages=new Aa(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(x`/threads/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(x`/threads/${e}`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t){return this._client.delete(x`/threads/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const s=await this.createAndRun(e,t);return await this.runs.poll(s.id,{thread_id:s.thread_id},t)}createAndRunStream(e,t){return Ge.createThreadAssistantStream(e,this._client.beta.threads,t)}}qt.Runs=Wn;qt.Messages=Aa;class st extends k{constructor(){super(...arguments),this.realtime=new Wt(this._client),this.assistants=new va(this._client),this.threads=new qt(this._client)}}st.Realtime=Wt;st.Assistants=va;st.Threads=qt;class Ca extends k{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Ra extends k{retrieve(e,t,s){const{container_id:r}=t;return this._client.get(x`/containers/${r}/files/${e}/content`,{...s,headers:I([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}let qn=class extends k{constructor(){super(...arguments),this.content=new Ra(this._client)}create(e,t,s){return this._client.post(x`/containers/${e}/files`,ye({body:t,...s},this._client))}retrieve(e,t,s){const{container_id:r}=t;return this._client.get(x`/containers/${r}/files/${e}`,s)}list(e,t={},s){return this._client.getAPIList(x`/containers/${e}/files`,F,{query:t,...s})}delete(e,t,s){const{container_id:r}=t;return this._client.delete(x`/containers/${r}/files/${e}`,{...s,headers:I([{Accept:"*/*"},s==null?void 0:s.headers])})}};qn.Content=Ra;class Hn extends k{constructor(){super(...arguments),this.files=new qn(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(x`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",F,{query:e,...t})}delete(e,t){return this._client.delete(x`/containers/${e}`,{...t,headers:I([{Accept:"*/*"},t==null?void 0:t.headers])})}}Hn.Files=qn;class Ea extends k{create(e,t){const s=!!e.encoding_format;let r=s?e.encoding_format:"base64";s&&q(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return s?a:(q(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(i=>(i&&i.data&&i.data.forEach(o=>{const l=o.embedding;o.embedding=ac(l)}),i)))}}class ka extends k{retrieve(e,t,s){const{eval_id:r,run_id:a}=t;return this._client.get(x`/evals/${r}/runs/${a}/output_items/${e}`,s)}list(e,t,s){const{eval_id:r,...a}=t;return this._client.getAPIList(x`/evals/${r}/runs/${e}/output_items`,F,{query:a,...s})}}class Jn extends k{constructor(){super(...arguments),this.outputItems=new ka(this._client)}create(e,t,s){return this._client.post(x`/evals/${e}/runs`,{body:t,...s})}retrieve(e,t,s){const{eval_id:r}=t;return this._client.get(x`/evals/${r}/runs/${e}`,s)}list(e,t={},s){return this._client.getAPIList(x`/evals/${e}/runs`,F,{query:t,...s})}delete(e,t,s){const{eval_id:r}=t;return this._client.delete(x`/evals/${r}/runs/${e}`,s)}cancel(e,t,s){const{eval_id:r}=t;return this._client.post(x`/evals/${r}/runs/${e}`,s)}}Jn.OutputItems=ka;class Xn extends k{constructor(){super(...arguments),this.runs=new Jn(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(x`/evals/${e}`,t)}update(e,t,s){return this._client.post(x`/evals/${e}`,{body:t,...s})}list(e={},t){return this._client.getAPIList("/evals",F,{query:e,...t})}delete(e,t){return this._client.delete(x`/evals/${e}`,t)}}Xn.Runs=Jn;let Oa=class extends k{create(e,t){return this._client.post("/files",ye({body:e,...t},this._client))}retrieve(e,t){return this._client.get(x`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",F,{query:e,...t})}delete(e,t){return this._client.delete(x`/files/${e}`,t)}content(e,t){return this._client.get(x`/files/${e}/content`,{...t,headers:I([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:s=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await et(t),i=await this.retrieve(e),Date.now()-a>s)throw new Nn({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return i}};class $a extends k{}let Ta=class extends k{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Vn extends k{constructor(){super(...arguments),this.graders=new Ta(this._client)}}Vn.Graders=Ta;class Pa extends k{create(e,t,s){return this._client.getAPIList(x`/fine_tuning/checkpoints/${e}/permissions`,Ut,{body:t,method:"post",...s})}retrieve(e,t={},s){return this._client.get(x`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...s})}delete(e,t,s){const{fine_tuned_model_checkpoint:r}=t;return this._client.delete(x`/fine_tuning/checkpoints/${r}/permissions/${e}`,s)}}let Kn=class extends k{constructor(){super(...arguments),this.permissions=new Pa(this._client)}};Kn.Permissions=Pa;class Na extends k{list(e,t={},s){return this._client.getAPIList(x`/fine_tuning/jobs/${e}/checkpoints`,F,{query:t,...s})}}class Qn extends k{constructor(){super(...arguments),this.checkpoints=new Na(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(x`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",F,{query:e,...t})}cancel(e,t){return this._client.post(x`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},s){return this._client.getAPIList(x`/fine_tuning/jobs/${e}/events`,F,{query:t,...s})}pause(e,t){return this._client.post(x`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(x`/fine_tuning/jobs/${e}/resume`,t)}}Qn.Checkpoints=Na;class $e extends k{constructor(){super(...arguments),this.methods=new $a(this._client),this.jobs=new Qn(this._client),this.checkpoints=new Kn(this._client),this.alpha=new Vn(this._client)}}$e.Methods=$a;$e.Jobs=Qn;$e.Checkpoints=Kn;$e.Alpha=Vn;class Ma extends k{}class zn extends k{constructor(){super(...arguments),this.graderModels=new Ma(this._client)}}zn.GraderModels=Ma;class La extends k{createVariation(e,t){return this._client.post("/images/variations",ye({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",ye({body:e,...t},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Fa extends k{retrieve(e,t){return this._client.get(x`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Ut,e)}delete(e,t){return this._client.delete(x`/models/${e}`,t)}}class Da extends k{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function ic(n,e){return!e||!lc(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(s=>({...s,parsed:null}))}:t)}:Ba(n,e)}function Ba(n,e){const t=n.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:fc(e,r)};if(r.type==="message"){const a=r.content.map(i=>i.type==="output_text"?{...i,parsed:oc(e,i.text)}:i);return{...r,content:a}}return r}),s=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||Cn(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const r of s.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),s}function oc(n,e){var t,s,r,a;return((s=(t=n.text)==null?void 0:t.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((r=n.text)==null?void 0:r.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function lc(n){var e;return!!Fn((e=n.text)==null?void 0:e.format)}function cc(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function uc(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function fc(n,e){const t=uc(n.tools??[],e.name);return{...e,...e,parsed_arguments:cc(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function Cn(n){const e=[];for(const t of n.output)if(t.type==="message")for(const s of t.content)s.type==="output_text"&&e.push(s.text);n.output_text=e.join("")}var Ae,ut,ue,ft,Xs,Vs,Ks,Qs;class Gn extends Ln{constructor(e){super(),Ae.add(this),ut.set(this,void 0),ue.set(this,void 0),ft.set(this,void 0),E(this,ut,e)}static createResponse(e,t,s){const r=new Gn(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,s){var o;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),d(this,Ae,"m",Xs).call(this);let a,i=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),i=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const l of a)d(this,Ae,"m",Vs).call(this,l,i);if((o=a.controller.signal)!=null&&o.aborted)throw new ee;return d(this,Ae,"m",Ks).call(this)}[(ut=new WeakMap,ue=new WeakMap,ft=new WeakMap,Ae=new WeakSet,Xs=function(){this.ended||E(this,ue,void 0)},Vs=function(t,s){if(this.ended)return;const r=(i,o)=>{(s==null||o.sequence_number>s)&&this._emit(i,o)},a=d(this,Ae,"m",Qs).call(this,t);switch(r("event",t),t.type){case"response.output_text.delta":{const i=a.output[t.output_index];if(!i)throw new R(`missing output at index ${t.output_index}`);if(i.type==="message"){const o=i.content[t.content_index];if(!o)throw new R(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new R(`expected content to be 'output_text', got ${o.type}`);r("response.output_text.delta",{...t,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const i=a.output[t.output_index];if(!i)throw new R(`missing output at index ${t.output_index}`);i.type==="function_call"&&r("response.function_call_arguments.delta",{...t,snapshot:i.arguments});break}default:r(t.type,t);break}},Ks=function(){if(this.ended)throw new R("stream has ended, this shouldn't happen");const t=d(this,ue,"f");if(!t)throw new R("request ended without sending any events");E(this,ue,void 0);const s=dc(t,d(this,ut,"f"));return E(this,ft,s),s},Qs=function(t){let s=d(this,ue,"f");if(!s){if(t.type!=="response.created")throw new R(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return s=E(this,ue,t.response),s}switch(t.type){case"response.output_item.added":{s.output.push(t.item);break}case"response.content_part.added":{const r=s.output[t.output_index];if(!r)throw new R(`missing output at index ${t.output_index}`);r.type==="message"&&r.content.push(t.part);break}case"response.output_text.delta":{const r=s.output[t.output_index];if(!r)throw new R(`missing output at index ${t.output_index}`);if(r.type==="message"){const a=r.content[t.content_index];if(!a)throw new R(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new R(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const r=s.output[t.output_index];if(!r)throw new R(`missing output at index ${t.output_index}`);r.type==="function_call"&&(r.arguments+=t.delta);break}case"response.completed":{E(this,ue,t.response);break}}return s},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=d(this,ft,"f");if(!e)throw new R("stream ended without producing a ChatCompletion");return e}}function dc(n,e){return ic(n,e)}class ja extends k{list(e,t={},s){return this._client.getAPIList(x`/responses/${e}/input_items`,F,{query:t,...s})}}class Yn extends k{constructor(){super(...arguments),this.inputItems=new ja(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Cn(s),s))}retrieve(e,t={},s){return this._client.get(x`/responses/${e}`,{query:t,...s,stream:(t==null?void 0:t.stream)??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Cn(r),r))}delete(e,t){return this._client.delete(x`/responses/${e}`,{...t,headers:I([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(s=>Ba(s,e))}stream(e,t){return Gn.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(x`/responses/${e}/cancel`,t)}}Yn.InputItems=ja;class Ua extends k{create(e,t,s){return this._client.post(x`/uploads/${e}/parts`,ye({body:t,...s},this._client))}}class Zn extends k{constructor(){super(...arguments),this.parts=new Ua(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(x`/uploads/${e}/cancel`,t)}complete(e,t,s){return this._client.post(x`/uploads/${e}/complete`,{body:t,...s})}}Zn.Parts=Ua;const hc=async n=>{const e=await Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};class Wa extends k{create(e,t,s){return this._client.post(x`/vector_stores/${e}/file_batches`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{vector_store_id:r}=t;return this._client.get(x`/vector_stores/${r}/file_batches/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,t,s){const{vector_store_id:r}=t;return this._client.post(x`/vector_stores/${r}/file_batches/${e}/cancel`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const r=await this.create(e,t);return await this.poll(e,r.id,s)}listFiles(e,t,s){const{vector_store_id:r,...a}=t;return this._client.getAPIList(x`/vector_stores/${r}/file_batches/${e}/files`,F,{query:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,t,s){var a;const r=I([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=s==null?void 0:s.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:i,response:o}=await this.retrieve(t,{vector_store_id:e},{...s,headers:r}).withResponse();switch(i.status){case"in_progress":let l=5e3;if(s!=null&&s.pollIntervalMs)l=s.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(l=f)}}await et(l);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:t,fileIds:s=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(r==null?void 0:r.maxConcurrency)??5,i=Math.min(a,t.length),o=this._client,l=t.values(),c=[...s];async function f(h){for(let m of h){const g=await o.files.create({file:m,purpose:"assistants"},r);c.push(g.id)}}const u=Array(i).fill(l).map(f);return await hc(u),await this.createAndPoll(e,{file_ids:c})}}class qa extends k{create(e,t,s){return this._client.post(x`/vector_stores/${e}/files`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{vector_store_id:r}=t;return this._client.get(x`/vector_stores/${r}/files/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{vector_store_id:r,...a}=t;return this._client.post(x`/vector_stores/${r}/files/${e}`,{body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(x`/vector_stores/${e}/files`,F,{query:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t,s){const{vector_store_id:r}=t;return this._client.delete(x`/vector_stores/${r}/files/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const r=await this.create(e,t,s);return await this.poll(e,r.id,s)}async poll(e,t,s){var a;const r=I([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=s==null?void 0:s.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const i=await this.retrieve(t,{vector_store_id:e},{...s,headers:r}).withResponse(),o=i.data;switch(o.status){case"in_progress":let l=5e3;if(s!=null&&s.pollIntervalMs)l=s.pollIntervalMs;else{const c=i.response.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(l=f)}}await et(l);break;case"failed":case"completed":return o}}}async upload(e,t,s){const r=await this._client.files.create({file:t,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,t,s){const r=await this.upload(e,t,s);return await this.poll(e,r.id,s)}content(e,t,s){const{vector_store_id:r}=t;return this._client.getAPIList(x`/vector_stores/${r}/files/${e}/content`,Ut,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class Ht extends k{constructor(){super(...arguments),this.files=new qa(this._client),this.fileBatches=new Wa(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(x`/vector_stores/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(x`/vector_stores/${e}`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",F,{query:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(x`/vector_stores/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,s){return this._client.getAPIList(x`/vector_stores/${e}/search`,Ut,{body:t,method:"post",...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}Ht.Files=qa;Ht.FileBatches=Wa;var Ee,Ha,xt;class Ja extends k{constructor(){super(...arguments),Ee.add(this)}async unwrap(e,t,s=this._client.webhookSecret,r=300){return await this.verifySignature(e,t,s,r),JSON.parse(e)}async verifySignature(e,t,s=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");d(this,Ee,"m",Ha).call(this,s);const a=I([t]).values,i=d(this,Ee,"m",xt).call(this,a,"webhook-signature"),o=d(this,Ee,"m",xt).call(this,a,"webhook-timestamp"),l=d(this,Ee,"m",xt).call(this,a,"webhook-id"),c=parseInt(o,10);if(isNaN(c))throw new Fe("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-c>r)throw new Fe("Webhook timestamp is too old");if(c>f+r)throw new Fe("Webhook timestamp is too new");const u=i.split(" ").map(y=>y.startsWith("v1,")?y.substring(3):y),h=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),m=l?`${l}.${o}.${e}`:`${o}.${e}`,g=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const y of u)try{const w=Buffer.from(y,"base64");if(await crypto.subtle.verify("HMAC",g,w,new TextEncoder().encode(m)))return}catch{continue}throw new Fe("The given webhook signature does not match the expected signature")}}Ee=new WeakSet,Ha=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},xt=function(e,t){if(!e)throw new Error("Headers are required");const s=e.get(t);if(s==null)throw new Error(`Missing required header: ${t}`);return s};var Rn,es,St,Xa;class ${constructor({baseURL:e=Se("OPENAI_BASE_URL"),apiKey:t=Se("OPENAI_API_KEY"),organization:s=Se("OPENAI_ORG_ID")??null,project:r=Se("OPENAI_PROJECT_ID")??null,webhookSecret:a=Se("OPENAI_WEBHOOK_SECRET")??null,...i}={}){if(Rn.add(this),St.set(this,void 0),this.completions=new Ca(this),this.chat=new Un(this),this.embeddings=new Ea(this),this.files=new Oa(this),this.images=new La(this),this.audio=new nt(this),this.moderations=new Da(this),this.models=new Fa(this),this.fineTuning=new $e(this),this.graders=new zn(this),this.vectorStores=new Ht(this),this.webhooks=new Ja(this),this.beta=new st(this),this.batches=new ba(this),this.uploads=new Zn(this),this.responses=new Yn(this),this.evals=new Xn(this),this.containers=new Hn(this),t===void 0)throw new R("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:s,project:r,webhookSecret:a,...i,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&ml())throw new R(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??es.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=Ns(o.logLevel,"ClientOptions.logLevel",this)??Ns(Se("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??wl(),E(this,St,vl),this._options=o,this.apiKey=t,this.organization=s,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}authHeaders(e){return I([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Rl(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ce}`}defaultIdempotencyKey(){return`stainless-node-retry-${Ar()}`}makeStatusError(e,t,s,r){return W.generate(e,t,s,r)}buildURL(e,t,s){const r=!d(this,Rn,"m",Xa).call(this)&&s||this.baseURL,a=ll(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return ul(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new jt(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var b,p;const r=await e,a=r.maxRetries??this.maxRetries;t==null&&(t=a),await this.prepareOptions(r);const{req:i,url:o,timeout:l}=this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(i,{url:o,options:r});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=s===void 0?"":`, retryOf: ${s}`,u=Date.now();if(q(this).debug(`[${c}] sending request`,de({retryOfRequestLogID:s,method:r.method,url:o,options:r,headers:i.headers})),(b=r.signal)!=null&&b.aborted)throw new ee;const h=new AbortController,m=await this.fetchWithTimeout(o,i,l,h).catch(gn),g=Date.now();if(m instanceof Error){const v=`retrying, ${t} attempts remaining`;if((p=r.signal)!=null&&p.aborted)throw new ee;const _=pn(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return q(this).info(`[${c}] connection ${_?"timed out":"failed"} - ${v}`),q(this).debug(`[${c}] connection ${_?"timed out":"failed"} (${v})`,de({retryOfRequestLogID:s,url:o,durationMs:g-u,message:m.message})),this.retryRequest(r,t,s??c);throw q(this).info(`[${c}] connection ${_?"timed out":"failed"} - error; no more retries left`),q(this).debug(`[${c}] connection ${_?"timed out":"failed"} (error; no more retries left)`,de({retryOfRequestLogID:s,url:o,durationMs:g-u,message:m.message})),_?new Nn:new Dt({cause:m})}const y=[...m.headers.entries()].filter(([v])=>v==="x-request-id").map(([v,_])=>", "+v+": "+JSON.stringify(_)).join(""),w=`[${c}${f}${y}] ${i.method} ${o} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${g-u}ms`;if(!m.ok){const v=this.shouldRetry(m);if(t&&v){const O=`retrying, ${t} attempts remaining`;return await bl(m.body),q(this).info(`${w} - ${O}`),q(this).debug(`[${c}] response error (${O})`,de({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,durationMs:g-u})),this.retryRequest(r,t,s??c,m.headers)}const _=v?"error; no more retries left":"error; not retryable";q(this).info(`${w} - ${_}`);const C=await m.text().catch(O=>gn(O).message),A=hl(C),S=A?void 0:C;throw q(this).debug(`[${c}] response error (${_})`,de({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,message:S,durationMs:Date.now()-u})),this.makeStatusError(m.status,A,S,m.headers)}return q(this).info(w),q(this).debug(`[${c}] response start`,de({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,durationMs:g-u})),{response:m,options:r,controller:h,requestLogID:c,retryOfRequestLogID:s,startTime:u}}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}requestAPIList(e,t){const s=this.makeRequest(t,null,void 0);return new Ll(this,s,e)}async fetchWithTimeout(e,t,s,r){const{signal:a,method:i,...o}=t||{};a&&a.addEventListener("abort",()=>r.abort());const l=setTimeout(()=>r.abort(),s),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:r.signal,...c?{duplex:"half"}:{},method:"GET",...o};i&&(f.method=i.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(l)}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){let a;const i=r==null?void 0:r.get("retry-after-ms");if(i){const l=parseFloat(i);Number.isNaN(l)||(a=l)}const o=r==null?void 0:r.get("retry-after");if(o&&!a){const l=parseFloat(o);Number.isNaN(l)?a=Date.parse(o)-Date.now():a=l*1e3}if(!(a&&0<=a&&a<60*1e3)){const l=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,l)}return await et(a),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}buildRequest(e,{retryCount:t=0}={}){const s={...e},{method:r,path:a,query:i,defaultBaseURL:o}=s,l=this.buildURL(a,i,o);"timeout"in s&&dl("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:c,body:f}=this.buildBody({options:s}),u=this.buildHeaders({options:e,method:r,bodyHeaders:c,retryCount:t});return{req:{method:r,headers:u,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...s.fetchOptions??{}},url:l,timeout:s.timeout}}buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const i=I([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...yl(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=I([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Lr(e)}:d(this,St,"f").call(this,{body:e,headers:s})}}es=$,St=new WeakMap,Rn=new WeakSet,Xa=function(){return this.baseURL!=="https://api.openai.com/v1"};$.OpenAI=es;$.DEFAULT_TIMEOUT=6e5;$.OpenAIError=R;$.APIError=W;$.APIConnectionError=Dt;$.APIConnectionTimeoutError=Nn;$.APIUserAbortError=ee;$.NotFoundError=Er;$.ConflictError=kr;$.RateLimitError=$r;$.BadRequestError=Ir;$.AuthenticationError=Cr;$.InternalServerError=Tr;$.PermissionDeniedError=Rr;$.UnprocessableEntityError=Or;$.InvalidWebhookSignatureError=Fe;$.toFile=Wl;$.Completions=Ca;$.Chat=Un;$.Embeddings=Ea;$.Files=Oa;$.Images=La;$.Audio=nt;$.Moderations=Da;$.Models=Fa;$.FineTuning=$e;$.Graders=zn;$.VectorStores=Ht;$.Webhooks=Ja;$.Beta=st;$.Batches=ba;$.Uploads=Zn;$.Responses=Yn;$.Evals=Xn;$.Containers=Hn;const mc=new $({apiKey:"test",dangerouslyAllowBrowser:!0});var pc=we("<option> </option>"),gc=we('<select class="w-28 rounded border-0 border-b-2 border-blue-400 bg-white px-2 py-1 text-blue-600 focus:border-blue-400 focus:ring-0 md:mb-2" style="border-left: none; border-right: none; border-top: none; border-radius: 0; box-shadow: none;"></select>');function zs(n,e){let t=is(e,"value",12),s=is(e,"onChange",8),r=[{name:"English"},{name:"Spanish"},{name:"French"},{name:"German"},{name:"Italian"},{name:"Portuguese"},{name:"Russian"},{name:"Chinese"},{name:"Japanese"},{name:"Arabic"}];var a=gc();It(()=>{t(),Ri(()=>{s()})}),a.__change=function(...i){var o;(o=s())==null||o.apply(this,i)},Bi(a,5,()=>r,({name:i})=>i,(i,o)=>{let l=()=>M(o).name;var c=pc(),f=V(c,!0);X(c);var u={};It(()=>{ar(f,l()),u!==(u=l())&&(c.value=(c.__value=l())??"")}),Y(i,c)}),X(a),zi(a,t),Y(n,a)}On(["change"]);function _c(n,e,t,s){const r=M(e);oe(e,M(t),!0),oe(t,r,!0),s()}var yc=(n,e)=>oe(e,""),wc=we('<button class="absolute top-2 right-2 rounded-full p-1 text-blue-600 hover:bg-blue-100" aria-label="Clear input"><!></button>'),bc=we(`<div class="flex w-full max-w-5xl flex-col px-2"><div class="mb-2 flex items-center justify-between md:mb-0 md:flex-row"><!> <button class="rounded-full p-1 text-blue-600 hover:bg-blue-100" aria-label="Swap languages"><!></button> <!></div> <div class="flex flex-col md:flex-row"><div class="relative mb-1 flex flex-1 flex-col md:mb-0"><div class="relative rounded-md border border-blue-200 bg-white p-4 shadow-md"><textarea rows="4" class="w-full resize-none border-none bg-transparent text-lg text-gray-800 outline-none focus:ring-0 focus:outline-none" style="scrollbar-width: none; -ms-overflow-style: none;" placeholder="Enter text"></textarea> <!></div></div> <div class="flex flex-1 flex-col md:ml-2"><div class="scrollbar-none h-42 max-h-48 overflow-y-auto rounded-md border border-blue-200 bg-blue-50 p-4 shadow" style="scrollbar-width: none; -ms-overflow-style: none;"><div class="flex-1 text-lg break-words whitespace-pre-wrap text-gray-800"><p class="mb-1 text-lg text-gray-800"><!></p></div></div> <style>div[style*='scrollbar-width']::-webkit-scrollbar {
          display: none;
        }</style></div></div></div>`);function vc(n,e){nr(e,!0);const t=2;let s=pe(""),r=pe(""),a=pe("Spanish"),i=pe("English"),o;const l=()=>{M(s).length>t?(clearTimeout(o),o=setTimeout(c,1e3)):clearTimeout(o)},c=async()=>{const L=`Translate the following text from ${M(a)} to ${M(i)}: ${M(s)}`,Z=await mc.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"user",content:L}]});oe(r,Z.choices[0].message.content||"",!0)};var f=bc(),u=V(f),h=V(u);zs(h,{onChange:l,get value(){return M(a)},set value(L){oe(a,L,!0)}});var m=Ie(h,2);m.__click=[_c,a,i,c];var g=V(m);Ss(g,{icon:"mdi:swap-horizontal",width:"28",height:"28"}),X(m);var y=Ie(m,2);zs(y,{onChange:l,get value(){return M(i)},set value(L){oe(i,L,!0)}}),X(u);var w=Ie(u,2),b=V(w),p=V(b),v=V(p);Li(v),v.__input=l;var _=Ie(v,2);{var C=L=>{var Z=wc();Z.__click=[yc,s];var be=V(Z);Ss(be,{icon:"mdi:close",width:"20",height:"20"}),X(Z),Y(L,Z)};Ve(_,L=>{M(s).length>0&&L(C)})}X(p),X(b);var A=Ie(b,2),S=V(A),N=V(S),O=V(N),T=V(O);{var P=L=>{var Z=Xt("Translating...");Y(L,Z)},le=(L,Z)=>{{var be=ve=>{var rt=Xt("Translation");Y(ve,rt)},Va=ve=>{var rt=Xt();It(()=>ar(rt,M(r))),Y(ve,rt)};Ve(L,ve=>{M(r).length===0?ve(be):ve(Va,!1)},Z)}};Ve(T,L=>{M(s).length>t&&M(r)===""?L(P):L(le,!1)})}X(O),X(N),X(S),Ei(2),X(A),X(w),X(f),Zi(v,()=>M(s),L=>oe(s,L)),Y(n,f),sr()}On(["click","input"]);var xc=we('<div class="flex min-h-screen flex-col items-center justify-center bg-white py-12 font-[Quicksand]"><!> <!></div>');function Mc(n){var e=xc(),t=V(e);to(t);var s=Ie(t,2);vc(s,{}),X(e),Y(n,e)}export{Mc as component};
