import"../chunks/CWj6FrbW.js";import"../chunks/CIwVGDIs.js";import{ad as Ja,b as Rn,j as ct,h as q,X as Pe,d as ln,q as M,w as Xa,r as Va,g as Ka,i as es,k as He,n as de,a5 as Qs,a8 as Qa,l as zs,m as Pt,p as za,av as Ht,ab as Gs,a1 as cn,aw as Ga,ar as Ya,ax as ts,a3 as Ys,ay as Za,az as ei,Y as ti,aA as ni,aB as vt,aC as si,aD as ri,a6 as Zs,Q as St,aE as ai,a9 as ii,a7 as oi,ae as ns,aF as li,ap as En,aG as ci,aH as ui,aI as fi,v as di,aJ as hi,aK as mi,aL as pi,aM as gi,aN as _i,aO as yi,B as wi,aq as bi,O as Ce,a as Y,N as er,I as vi,c as ss,f as rs,R as tr,as as me,u as ue,aP as Si,aQ as xi,T as z,V as J,aR as Ai,W as Ne,au as Jt}from"../chunks/DhBfOPfg.js";import{l as nr,i as Ii,c as Ci,d as kn,a as Ri,n as Ei,b as ki,o as Oi,e as $i,s as sr,r as Ti}from"../chunks/Dziu6QCd.js";import{i as xt,r as Pi,p as as}from"../chunks/yjo5bWub.js";function Ni(n,e,t,s){for(var r=[],a=e.length,i=0;i<a;i++)ei(e[i].e,r,!0);var o=a>0&&r.length===0&&t!==null;if(o){var l=t.parentNode;ti(l),l.append(t),s.clear(),ce(n,e[0].prev,e[a-1].next)}ni(r,()=>{for(var c=0;c<a;c++){var f=e[c];o||(s.delete(f.k),ce(n,f.prev,f.next)),vt(f.e,!o)}})}function Mi(n,e,t,s,r,a=null){var i=n,o={flags:e,items:new Map,first:null};{var l=n;i=q?ct(Pe(l)):l.appendChild(Ja())}q&&ln();var c=null,f=!1,u=Xa(()=>{var h=t();return Ys(h)?h:h==null?[]:Gs(h)});Rn(()=>{var h=M(u),m=h.length;if(f&&m===0)return;f=m===0;let g=!1;if(q){var y=Va(i)===Ka;y!==(m===0)&&(i=es(),ct(i),He(!1),g=!0)}if(q){for(var w=null,b,p=0;p<m;p++){if(de.nodeType===Qs&&de.data===Qa){i=de,g=!0,He(!1);break}var v=h[p],_=s(v,p);b=rr(de,o,w,null,v,_,p,r,e,t),o.items.set(_,b),w=b}m>0&&ct(es())}q||Li(h,o,i,r,e,s,t),a!==null&&(m===0?c?zs(c):c=Pt(()=>a(i)):c!==null&&za(c,()=>{c=null})),g&&He(!0),M(u)}),q&&(i=de)}function Li(n,e,t,s,r,a,i){var o=n.length,l=e.items,c=e.first,f=c,u,h=null,m=[],g=[],y,w,b,p;for(p=0;p<o;p+=1){if(y=n[p],w=a(y,p),b=l.get(w),b===void 0){var v=f?f.e.nodes_start:t;h=rr(v,e,h,h===null?e.first:h.next,y,w,p,s,r,i),l.set(w,h),m=[],g=[],f=h.next;continue}if(Fi(b,y,p),(b.e.f&Ht)!==0&&zs(b.e),b!==f){if(u!==void 0&&u.has(b)){if(m.length<g.length){var _=g[0],C;h=_.prev;var A=m[0],x=m[m.length-1];for(C=0;C<m.length;C+=1)is(m[C],_,t);for(C=0;C<g.length;C+=1)u.delete(g[C]);ce(e,A.prev,x.next),ce(e,h,A),ce(e,x,_),f=_,h=x,p-=1,m=[],g=[]}else u.delete(b),is(b,f,t),ce(e,b.prev,b.next),ce(e,b,h===null?e.first:h.next),ce(e,h,b),h=b;continue}for(m=[],g=[];f!==null&&f.k!==w;)(f.e.f&Ht)===0&&(u??(u=new Set)).add(f),g.push(f),f=f.next;if(f===null)continue;b=f}m.push(b),h=b,f=b.next}if(f!==null||u!==void 0){for(var N=u===void 0?[]:Gs(u);f!==null;)(f.e.f&Ht)===0&&N.push(f),f=f.next;var T=N.length;if(T>0){var P=o===0?t:null;Ni(e,N,P,l)}}cn.first=e.first&&e.first.e,cn.last=h&&h.e}function Fi(n,e,t,s){Ga(n.v,e),n.i=t}function rr(n,e,t,s,r,a,i,o,l,c){var f=(l&si)!==0,u=(l&ri)===0,h=f?u?Ya(r,!1,!1):ts(r):r,m=(l&Za)===0?i:ts(i),g={i:m,v:h,k:a,a:null,e:null,prev:t,next:s};try{return g.e=Pt(()=>o(n,h,m,c),q),g.e.prev=t&&t.e,g.e.next=s&&s.e,t===null?e.first=g:(t.next=g,t.e.next=g.e),s!==null&&(s.prev=g,s.e.prev=g.e),g}finally{}}function is(n,e,t){for(var s=n.next?n.next.e.nodes_start:t,r=e?e.e.nodes_start:t,a=n.e.nodes_start;a!==s;){var i=Zs(a);r.before(a),a=i}}function ce(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Di(n,e,t=!1,s=!1,r=!1){var a=n,i="";St(()=>{var o=cn;if(i===(i=e()??"")){q&&ln();return}if(o.nodes_start!==null&&(ai(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),i!==""){if(q){de.data;for(var l=ln(),c=l;l!==null&&(l.nodeType!==Qs||l.data!=="");)c=l,l=Zs(l);if(l===null)throw ii(),oi;ns(de,c),a=ct(l);return}var f=i+"";t?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var u=li(f);if((t||s)&&(u=Pe(u)),ns(Pe(u),u.lastChild),t||s)for(;Pe(u);)a.before(Pe(u));else a.before(u)}})}function Bi(n,e){var t=void 0,s;Rn(()=>{t!==(t=e())&&(s&&(vt(s),s=null),t&&(s=Pt(()=>{En(()=>t(n))})))})}function ar(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=ar(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function ji(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=ar(n))&&(s&&(s+=" "),s+=e);return s}function Ui(n){return typeof n=="object"?ji(n):n??""}const os=[...` 	
\r\fÂ \v\uFEFF`];function Wi(n,e,t){var s=n==null?"":""+n;if(t){for(var r in t)if(t[r])s=s?s+" "+r:r;else if(s.length)for(var a=r.length,i=0;(i=s.indexOf(r,i))>=0;){var o=i+a;(i===0||os.includes(s[i-1]))&&(o===s.length||os.includes(s[o]))?s=(i===0?"":s.substring(0,i))+s.substring(o+1):i=o}}return s===""?null:s}function ls(n,e=!1){var t=e?" !important;":";",s="";for(var r in n){var a=n[r];a!=null&&a!==""&&(s+=" "+r+": "+a+t)}return s}function Xt(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function qi(n,e){if(e){var t="",s,r;if(Array.isArray(e)?(s=e[0],r=e[1]):s=e,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,i=0,o=!1,l=[];s&&l.push(...Object.keys(s).map(Xt)),r&&l.push(...Object.keys(r).map(Xt));var c=0,f=-1;const y=n.length;for(var u=0;u<y;u++){var h=n[u];if(o?h==="/"&&n[u-1]==="*"&&(o=!1):a?a===h&&(a=!1):h==="/"&&n[u+1]==="*"?o=!0:h==='"'||h==="'"?a=h:h==="("?i++:h===")"&&i--,!o&&a===!1&&i===0){if(h===":"&&f===-1)f=u;else if(h===";"||u===y-1){if(f!==-1){var m=Xt(n.substring(c,f).trim());if(!l.includes(m)){h!==";"&&u++;var g=n.substring(c,u).trim();t+=" "+g+";"}}c=u+1,f=-1}}}}return s&&(t+=ls(s)),r&&(t+=ls(r,!0)),t=t.trim(),t===""?null:t}return n==null?null:String(n)}function Hi(n,e,t,s,r,a){var i=n.__className;if(q||i!==t||i===void 0){var o=Wi(t,s,a);(!q||o!==n.getAttribute("class"))&&(o==null?n.removeAttribute("class"):e?n.className=o:n.setAttribute("class",o)),n.__className=t}else if(a&&r!==a)for(var l in a){var c=!!a[l];(r==null||c!==!!r[l])&&n.classList.toggle(l,c)}return a}function Vt(n,e={},t,s){for(var r in t){var a=t[r];e[r]!==a&&(t[r]==null?n.style.removeProperty(r):n.style.setProperty(r,a,s))}}function Ji(n,e,t,s){var r=n.__style;if(q||r!==e){var a=qi(e,s);(!q||a!==n.getAttribute("style"))&&(a==null?n.removeAttribute("style"):n.style.cssText=a),n.__style=e}else s&&(Array.isArray(s)?(Vt(n,t==null?void 0:t[0],s[0]),Vt(n,t==null?void 0:t[1],s[1],"important")):Vt(n,t,s));return s}function At(n,e,t){if(n.multiple){if(e==null)return;if(!Ys(e))return ui();for(var s of n.options)s.selected=e.includes(Je(s));return}for(s of n.options){var r=Je(s);if(fi(r,e)){s.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function ir(n){var e=new MutationObserver(()=>{At(n,n.__value)});e.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ci(()=>{e.disconnect()})}function Xi(n,e,t=e){var s=!0;nr(n,"change",r=>{var a=r?"[selected]":":checked",i;if(n.multiple)i=[].map.call(n.querySelectorAll(a),Je);else{var o=n.querySelector(a)??n.querySelector("option:not([disabled])");i=o&&Je(o)}t(i)}),En(()=>{var r=e();if(At(n,r,s),s&&r===void 0){var a=n.querySelector(":checked");a!==null&&(r=Je(a),t(r))}n.__value=r,s=!1}),ir(n)}function Je(n){return"__value"in n?n.__value:n.value}const ke=Symbol("class"),Oe=Symbol("style"),or=Symbol("is custom element"),lr=Symbol("is html");function Vi(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function cs(n,e,t,s){var r=cr(n);q&&(r[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||r[e]!==(r[e]=t)&&(e==="loading"&&(n[gi]=t),t==null?n.removeAttribute(e):typeof t!="string"&&ur(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Ki(n,e,t,s,r=!1){var a=cr(n),i=a[or],o=!a[lr];let l=q&&i;l&&He(!1);var c=e||{},f=n.tagName==="OPTION";for(var u in e)u in t||(t[u]=null);t.class?t.class=Ui(t.class):t[ke]&&(t.class=null),t[Oe]&&(t.style??(t.style=null));var h=ur(n);for(const v in t){let _=t[v];if(f&&v==="value"&&_==null){n.value=n.__value="",c[v]=_;continue}if(v==="class"){var m=n.namespaceURI==="http://www.w3.org/1999/xhtml";Hi(n,m,_,s,e==null?void 0:e[ke],t[ke]),c[v]=_,c[ke]=t[ke];continue}if(v==="style"){Ji(n,_,e==null?void 0:e[Oe],t[Oe]),c[v]=_,c[Oe]=t[Oe];continue}var g=c[v];if(!(_===g&&!(_===void 0&&n.hasAttribute(v)))){c[v]=_;var y=v[0]+v[1];if(y!=="$$")if(y==="on"){const C={},A="$$"+v;let x=v.slice(2);var w=ki(x);if(Ii(x)&&(x=x.slice(0,-7),C.capture=!0),!w&&g){if(_!=null)continue;n.removeEventListener(x,c[A],C),c[A]=null}if(_!=null)if(w)n[`__${x}`]=_,kn([x]);else{let N=function(T){c[v].call(this,T)};c[A]=Ci(x,n,N,C)}else w&&(n[`__${x}`]=void 0)}else if(v==="style")cs(n,v,_);else if(v==="autofocus")Ri(n,!!_);else if(!i&&(v==="__value"||v==="value"&&_!=null))n.value=n.__value=_;else if(v==="selected"&&f)Vi(n,_);else{var b=v;o||(b=Ei(b));var p=b==="defaultValue"||b==="defaultChecked";if(_==null&&!i&&!p)if(a[v]=null,b==="value"||b==="checked"){let C=n;const A=e===void 0;if(b==="value"){let x=C.defaultValue;C.removeAttribute(b),C.defaultValue=x,C.value=C.__value=A?x:null}else{let x=C.defaultChecked;C.removeAttribute(b),C.defaultChecked=x,C.checked=A?x:!1}}else n.removeAttribute(v);else p||h.includes(b)&&(i||typeof _!="string")?n[b]=_:typeof _!="function"&&cs(n,b,_)}}}return l&&He(!0),c}function us(n,e,t=[],s,r=!1,a=di){const i=t.map(a);var o=void 0,l={},c=n.nodeName==="SELECT",f=!1;if(Rn(()=>{var h=e(...i.map(M)),m=Ki(n,o,h,s,r);f&&c&&"value"in h&&At(n,h.value,!1);for(let y of Object.getOwnPropertySymbols(l))h[y]||vt(l[y]);for(let y of Object.getOwnPropertySymbols(h)){var g=h[y];y.description===hi&&(!o||g!==o[y])&&(l[y]&&vt(l[y]),l[y]=Pt(()=>Bi(n,()=>g))),m[y]=g}o=m}),c){var u=n;En(()=>{At(u,o.value),ir(u)})}f=!0}function cr(n){return n.__attributes??(n.__attributes={[or]:n.nodeName.includes("-"),[lr]:n.namespaceURI===mi})}var fs=new Map;function ur(n){var e=fs.get(n.nodeName);if(e)return e;fs.set(n.nodeName,e=[]);for(var t,s=n,r=Element.prototype;r!==s;){t=_i(s);for(var a in t)t[a].set&&e.push(a);s=pi(s)}return e}function Qi(n,e,t=e){var s=yi();nr(n,"input",r=>{var a=r?n.defaultValue:n.value;if(a=Kt(n)?Qt(a):a,t(a),s&&a!==(a=e())){var i=n.selectionStart,o=n.selectionEnd;n.value=a??"",o!==null&&(n.selectionStart=i,n.selectionEnd=Math.min(o,n.value.length))}}),(q&&n.defaultValue!==n.value||wi(e)==null&&n.value)&&t(Kt(n)?Qt(n.value):n.value),bi(()=>{var r=e();Kt(n)&&r===Qt(n.value)||n.type==="date"&&!r&&!n.value||r!==n.value&&(n.value=r??"")})}function Kt(n){var e=n.type;return e==="number"||e==="range"}function Qt(n){return n===""?null:+n}var zi=Ce('<h1 class="mb-10 text-4xl text-white">AI-Powered Translation Assistant</h1>');function Gi(n){var e=zi();Y(n,e)}const fr=/^[a-z0-9]+(-[a-z0-9]+)*$/,Nt=(n,e,t,s="")=>{const r=n.split(":");if(n.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;s=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const o=r.pop(),l=r.pop(),c={provider:r.length>0?r[0]:s,prefix:l,name:o};return e&&!ut(c)?null:c}const a=r[0],i=a.split("-");if(i.length>1){const o={provider:s,prefix:i.shift(),name:i.join("-")};return e&&!ut(o)?null:o}if(t&&s===""){const o={provider:s,prefix:"",name:a};return e&&!ut(o,t)?null:o}return null},ut=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1,dr=Object.freeze({left:0,top:0,width:16,height:16}),It=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Mt=Object.freeze({...dr,...It}),un=Object.freeze({...Mt,body:"",hidden:!1});function Yi(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const s=((n.rotate||0)+(e.rotate||0))%4;return s&&(t.rotate=s),t}function ds(n,e){const t=Yi(n,e);for(const s in un)s in It?s in n&&!(s in t)&&(t[s]=It[s]):s in e?t[s]=e[s]:s in n&&(t[s]=n[s]);return t}function Zi(n,e){const t=n.icons,s=n.aliases||Object.create(null),r=Object.create(null);function a(i){if(t[i])return r[i]=[];if(!(i in r)){r[i]=null;const o=s[i]&&s[i].parent,l=o&&a(o);l&&(r[i]=[o].concat(l))}return r[i]}return Object.keys(t).concat(Object.keys(s)).forEach(a),r}function eo(n,e,t){const s=n.icons,r=n.aliases||Object.create(null);let a={};function i(o){a=ds(s[o]||r[o],a)}return i(e),t.forEach(i),ds(n,a)}function hr(n,e){const t=[];if(typeof n!="object"||typeof n.icons!="object")return t;n.not_found instanceof Array&&n.not_found.forEach(r=>{e(r,null),t.push(r)});const s=Zi(n);for(const r in s){const a=s[r];a&&(e(r,eo(n,r,a)),t.push(r))}return t}const to={provider:"",aliases:{},not_found:{},...dr};function zt(n,e){for(const t in e)if(t in n&&typeof n[t]!=typeof e[t])return!1;return!0}function mr(n){if(typeof n!="object"||n===null)return null;const e=n;if(typeof e.prefix!="string"||!n.icons||typeof n.icons!="object"||!zt(n,to))return null;const t=e.icons;for(const r in t){const a=t[r];if(!r||typeof a.body!="string"||!zt(a,un))return null}const s=e.aliases||Object.create(null);for(const r in s){const a=s[r],i=a.parent;if(!r||typeof i!="string"||!t[i]&&!s[i]||!zt(a,un))return null}return e}const hs=Object.create(null);function no(n,e){return{provider:n,prefix:e,icons:Object.create(null),missing:new Set}}function Ie(n,e){const t=hs[n]||(hs[n]=Object.create(null));return t[e]||(t[e]=no(n,e))}function pr(n,e){return mr(e)?hr(e,(t,s)=>{s?n.icons[t]=s:n.missing.add(t)}):[]}function so(n,e,t){try{if(typeof t.body=="string")return n.icons[e]={...t},!0}catch{}return!1}let Qe=!1;function gr(n){return typeof n=="boolean"&&(Qe=n),Qe}function ro(n){const e=typeof n=="string"?Nt(n,!0,Qe):n;if(e){const t=Ie(e.provider,e.prefix),s=e.name;return t.icons[s]||(t.missing.has(s)?null:void 0)}}function ao(n,e){const t=Nt(n,!0,Qe);if(!t)return!1;const s=Ie(t.provider,t.prefix);return e?so(s,t.name,e):(s.missing.add(t.name),!0)}function io(n,e){if(typeof n!="object")return!1;if(typeof e!="string"&&(e=n.provider||""),Qe&&!e&&!n.prefix){let r=!1;return mr(n)&&(n.prefix="",hr(n,(a,i)=>{ao(a,i)&&(r=!0)})),r}const t=n.prefix;if(!ut({prefix:t,name:"a"}))return!1;const s=Ie(e,t);return!!pr(s,n)}const _r=Object.freeze({width:null,height:null}),yr=Object.freeze({..._r,...It}),oo=/(-?[0-9.]*[0-9]+[0-9.]*)/g,lo=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function ms(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const s=n.split(oo);if(s===null||!s.length)return n;const r=[];let a=s.shift(),i=lo.test(a);for(;;){if(i){const o=parseFloat(a);isNaN(o)?r.push(a):r.push(Math.ceil(o*e*t)/t)}else r.push(a);if(a=s.shift(),a===void 0)return r.join("");i=!i}}function co(n,e="defs"){let t="";const s=n.indexOf("<"+e);for(;s>=0;){const r=n.indexOf(">",s),a=n.indexOf("</"+e);if(r===-1||a===-1)break;const i=n.indexOf(">",a);if(i===-1)break;t+=n.slice(r+1,a).trim(),n=n.slice(0,s).trim()+n.slice(i+1)}return{defs:t,content:n}}function uo(n,e){return n?"<defs>"+n+"</defs>"+e:e}function fo(n,e,t){const s=co(n);return uo(s.defs,e+s.content+t)}const ho=n=>n==="unset"||n==="undefined"||n==="none";function mo(n,e){const t={...Mt,...n},s={...yr,...e},r={left:t.left,top:t.top,width:t.width,height:t.height};let a=t.body;[t,s].forEach(y=>{const w=[],b=y.hFlip,p=y.vFlip;let v=y.rotate;b?p?v+=2:(w.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),w.push("scale(-1 1)"),r.top=r.left=0):p&&(w.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),w.push("scale(1 -1)"),r.top=r.left=0);let _;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:_=r.height/2+r.top,w.unshift("rotate(90 "+_.toString()+" "+_.toString()+")");break;case 2:w.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:_=r.width/2+r.left,w.unshift("rotate(-90 "+_.toString()+" "+_.toString()+")");break}v%2===1&&(r.left!==r.top&&(_=r.left,r.left=r.top,r.top=_),r.width!==r.height&&(_=r.width,r.width=r.height,r.height=_)),w.length&&(a=fo(a,'<g transform="'+w.join(" ")+'">',"</g>"))});const i=s.width,o=s.height,l=r.width,c=r.height;let f,u;i===null?(u=o===null?"1em":o==="auto"?c:o,f=ms(u,l/c)):(f=i==="auto"?l:i,u=o===null?ms(f,c/l):o==="auto"?c:o);const h={},m=(y,w)=>{ho(w)||(h[y]=w.toString())};m("width",f),m("height",u);const g=[r.left,r.top,l,c];return h.viewBox=g.join(" "),{attributes:h,viewBox:g,body:a}}const po=/\sid="(\S+)"/g,go="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let _o=0;function yo(n,e=go){const t=[];let s;for(;s=po.exec(n);)t.push(s[1]);if(!t.length)return n;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(a=>{const i=typeof e=="function"?e(a):e+(_o++).toString(),o=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+i+r+"$3")}),n=n.replace(new RegExp(r,"g"),""),n}const fn=Object.create(null);function wo(n,e){fn[n]=e}function dn(n){return fn[n]||fn[""]}function On(n){let e;if(typeof n.resources=="string")e=[n.resources];else if(e=n.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:n.path||"/",maxURL:n.maxURL||500,rotate:n.rotate||750,timeout:n.timeout||5e3,random:n.random===!0,index:n.index||0,dataAfterTimeout:n.dataAfterTimeout!==!1}}const $n=Object.create(null),$e=["https://api.simplesvg.com","https://api.unisvg.com"],ft=[];for(;$e.length>0;)$e.length===1||Math.random()>.5?ft.push($e.shift()):ft.push($e.pop());$n[""]=On({resources:["https://api.iconify.design"].concat(ft)});function bo(n,e){const t=On(e);return t===null?!1:($n[n]=t,!0)}function Tn(n){return $n[n]}const vo=()=>{let n;try{if(n=fetch,typeof n=="function")return n}catch{}};let ps=vo();function So(n,e){const t=Tn(n);if(!t)return 0;let s;if(!t.maxURL)s=0;else{let r=0;t.resources.forEach(i=>{r=Math.max(r,i.length)});const a=e+".json?icons=";s=t.maxURL-r-t.path.length-a.length}return s}function xo(n){return n===404}const Ao=(n,e,t)=>{const s=[],r=So(n,e),a="icons";let i={type:a,provider:n,prefix:e,icons:[]},o=0;return t.forEach((l,c)=>{o+=l.length+1,o>=r&&c>0&&(s.push(i),i={type:a,provider:n,prefix:e,icons:[]},o=l.length),i.icons.push(l)}),s.push(i),s};function Io(n){if(typeof n=="string"){const e=Tn(n);if(e)return e.path}return"/"}const Co=(n,e,t)=>{if(!ps){t("abort",424);return}let s=Io(e.provider);switch(e.type){case"icons":{const a=e.prefix,o=e.icons.join(","),l=new URLSearchParams({icons:o});s+=a+".json?"+l.toString();break}case"custom":{const a=e.uri;s+=a.slice(0,1)==="/"?a.slice(1):a;break}default:t("abort",400);return}let r=503;ps(n+s).then(a=>{const i=a.status;if(i!==200){setTimeout(()=>{t(xo(i)?"abort":"next",i)});return}return r=501,a.json()}).then(a=>{if(typeof a!="object"||a===null){setTimeout(()=>{a===404?t("abort",a):t("next",r)});return}setTimeout(()=>{t("success",a)})}).catch(()=>{t("next",r)})},Ro={prepare:Ao,send:Co};function Eo(n){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);n.sort((r,a)=>r.provider!==a.provider?r.provider.localeCompare(a.provider):r.prefix!==a.prefix?r.prefix.localeCompare(a.prefix):r.name.localeCompare(a.name));let s={provider:"",prefix:"",name:""};return n.forEach(r=>{if(s.name===r.name&&s.prefix===r.prefix&&s.provider===r.provider)return;s=r;const a=r.provider,i=r.prefix,o=r.name,l=t[a]||(t[a]=Object.create(null)),c=l[i]||(l[i]=Ie(a,i));let f;o in c.icons?f=e.loaded:i===""||c.missing.has(o)?f=e.missing:f=e.pending;const u={provider:a,prefix:i,name:o};f.push(u)}),e}function wr(n,e){n.forEach(t=>{const s=t.loaderCallbacks;s&&(t.loaderCallbacks=s.filter(r=>r.id!==e))})}function ko(n){n.pendingCallbacksFlag||(n.pendingCallbacksFlag=!0,setTimeout(()=>{n.pendingCallbacksFlag=!1;const e=n.loaderCallbacks?n.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const s=n.provider,r=n.prefix;e.forEach(a=>{const i=a.icons,o=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==r)return!0;const c=l.name;if(n.icons[c])i.loaded.push({provider:s,prefix:r,name:c});else if(n.missing.has(c))i.missing.push({provider:s,prefix:r,name:c});else return t=!0,!0;return!1}),i.pending.length!==o&&(t||wr([n],a.id),a.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),a.abort))})}))}let Oo=0;function $o(n,e,t){const s=Oo++,r=wr.bind(null,t,s);if(!e.pending.length)return r;const a={id:s,icons:e,callback:n,abort:r};return t.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(a)}),r}function To(n,e=!0,t=!1){const s=[];return n.forEach(r=>{const a=typeof r=="string"?Nt(r,e,t):r;a&&s.push(a)}),s}var Po={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function No(n,e,t,s){const r=n.resources.length,a=n.random?Math.floor(Math.random()*r):n.index;let i;if(n.random){let A=n.resources.slice(0);for(i=[];A.length>1;){const x=Math.floor(Math.random()*A.length);i.push(A[x]),A=A.slice(0,x).concat(A.slice(x+1))}i=i.concat(A)}else i=n.resources.slice(a).concat(n.resources.slice(0,a));const o=Date.now();let l="pending",c=0,f,u=null,h=[],m=[];typeof s=="function"&&m.push(s);function g(){u&&(clearTimeout(u),u=null)}function y(){l==="pending"&&(l="aborted"),g(),h.forEach(A=>{A.status==="pending"&&(A.status="aborted")}),h=[]}function w(A,x){x&&(m=[]),typeof A=="function"&&m.push(A)}function b(){return{startTime:o,payload:e,status:l,queriesSent:c,queriesPending:h.length,subscribe:w,abort:y}}function p(){l="failed",m.forEach(A=>{A(void 0,f)})}function v(){h.forEach(A=>{A.status==="pending"&&(A.status="aborted")}),h=[]}function _(A,x,N){const T=x!=="success";switch(h=h.filter(P=>P!==A),l){case"pending":break;case"failed":if(T||!n.dataAfterTimeout)return;break;default:return}if(x==="abort"){f=N,p();return}if(T){f=N,h.length||(i.length?C():p());return}if(g(),v(),!n.random){const P=n.resources.indexOf(A.resource);P!==-1&&P!==n.index&&(n.index=P)}l="completed",m.forEach(P=>{P(N)})}function C(){if(l!=="pending")return;g();const A=i.shift();if(A===void 0){if(h.length){u=setTimeout(()=>{g(),l==="pending"&&(v(),p())},n.timeout);return}p();return}const x={status:"pending",resource:A,callback:(N,T)=>{_(x,N,T)}};h.push(x),c++,u=setTimeout(C,n.rotate),t(A,e,x.callback)}return setTimeout(C),b}function br(n){const e={...Po,...n};let t=[];function s(){t=t.filter(o=>o().status==="pending")}function r(o,l,c){const f=No(e,o,l,(u,h)=>{s(),c&&c(u,h)});return t.push(f),f}function a(o){return t.find(l=>o(l))||null}return{query:r,find:a,setIndex:o=>{e.index=o},getIndex:()=>e.index,cleanup:s}}function gs(){}const Gt=Object.create(null);function Mo(n){if(!Gt[n]){const e=Tn(n);if(!e)return;const t=br(e),s={config:e,redundancy:t};Gt[n]=s}return Gt[n]}function Lo(n,e,t){let s,r;if(typeof n=="string"){const a=dn(n);if(!a)return t(void 0,424),gs;r=a.send;const i=Mo(n);i&&(s=i.redundancy)}else{const a=On(n);if(a){s=br(a);const i=n.resources?n.resources[0]:"",o=dn(i);o&&(r=o.send)}}return!s||!r?(t(void 0,424),gs):s.query(e,r,t)().abort}function _s(){}function Fo(n){n.iconsLoaderFlag||(n.iconsLoaderFlag=!0,setTimeout(()=>{n.iconsLoaderFlag=!1,ko(n)}))}function Do(n){const e=[],t=[];return n.forEach(s=>{(s.match(fr)?e:t).push(s)}),{valid:e,invalid:t}}function Te(n,e,t){function s(){const r=n.pendingIcons;e.forEach(a=>{r&&r.delete(a),n.icons[a]||n.missing.add(a)})}if(t&&typeof t=="object")try{if(!pr(n,t).length){s();return}}catch(r){console.error(r)}s(),Fo(n)}function ys(n,e){n instanceof Promise?n.then(t=>{e(t)}).catch(()=>{e(null)}):e(n)}function Bo(n,e){n.iconsToLoad?n.iconsToLoad=n.iconsToLoad.concat(e).sort():n.iconsToLoad=e,n.iconsQueueFlag||(n.iconsQueueFlag=!0,setTimeout(()=>{n.iconsQueueFlag=!1;const{provider:t,prefix:s}=n,r=n.iconsToLoad;if(delete n.iconsToLoad,!r||!r.length)return;const a=n.loadIcon;if(n.loadIcons&&(r.length>1||!a)){ys(n.loadIcons(r,s,t),f=>{Te(n,r,f)});return}if(a){r.forEach(f=>{const u=a(f,s,t);ys(u,h=>{const m=h?{prefix:s,icons:{[f]:h}}:null;Te(n,[f],m)})});return}const{valid:i,invalid:o}=Do(r);if(o.length&&Te(n,o,null),!i.length)return;const l=s.match(fr)?dn(t):null;if(!l){Te(n,i,null);return}l.prepare(t,s,i).forEach(f=>{Lo(t,f,u=>{Te(n,f.icons,u)})})}))}const jo=(n,e)=>{const t=To(n,!0,gr()),s=Eo(t);if(!s.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(s.loaded,s.missing,s.pending,_s)}),()=>{l=!1}}const r=Object.create(null),a=[];let i,o;return s.pending.forEach(l=>{const{provider:c,prefix:f}=l;if(f===o&&c===i)return;i=c,o=f,a.push(Ie(c,f));const u=r[c]||(r[c]=Object.create(null));u[f]||(u[f]=[])}),s.pending.forEach(l=>{const{provider:c,prefix:f,name:u}=l,h=Ie(c,f),m=h.pendingIcons||(h.pendingIcons=new Set);m.has(u)||(m.add(u),r[c][f].push(u))}),a.forEach(l=>{const c=r[l.provider][l.prefix];c.length&&Bo(l,c)}),e?$o(e,s,a):_s};function Uo(n,e){const t={...n};for(const s in e){const r=e[s],a=typeof r;s in _r?(r===null||r&&(a==="string"||a==="number"))&&(t[s]=r):a===typeof t[s]&&(t[s]=s==="rotate"?r%4:r)}return t}const Wo=/[\s,]+/;function qo(n,e){e.split(Wo).forEach(t=>{switch(t.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0;break}})}function Ho(n,e=0){const t=n.replace(/^-?[0-9.]*/,"");function s(r){for(;r<0;)r+=4;return r%4}if(t===""){const r=parseInt(n);return isNaN(r)?0:s(r)}else if(t!==n){let r=0;switch(t){case"%":r=25;break;case"deg":r=90}if(r){let a=parseFloat(n.slice(0,n.length-t.length));return isNaN(a)?0:(a=a/r,a%1===0?s(a):0)}}return e}function Jo(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in e)t+=" "+s+'="'+e[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}function Xo(n){return n.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Vo(n){return"data:image/svg+xml,"+Xo(n)}function Ko(n){return'url("'+Vo(n)+'")'}const ws={...yr,inline:!1},Qo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},zo={display:"inline-block"},hn={"background-color":"currentColor"},vr={"background-color":"transparent"},bs={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},vs={"-webkit-mask":hn,mask:hn,background:vr};for(const n in vs){const e=vs[n];for(const t in bs)e[n+"-"+t]=bs[t]}function Go(n){return n+(n.match(/^[-0-9.]+$/)?"px":"")}function Yo(n,e){const t=Uo(ws,e),s=e.mode||"svg",r=s==="svg"?{...Qo}:{};n.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let a=typeof e.style=="string"?e.style:"";for(let b in e){const p=e[b];if(p!==void 0)switch(b){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":t[b]=p===!0||p==="true"||p===1;break;case"flip":typeof p=="string"&&qo(t,p);break;case"color":a=a+(a.length>0&&a.trim().slice(-1)!==";"?";":"")+"color: "+p+"; ";break;case"rotate":typeof p=="string"?t[b]=Ho(p):typeof p=="number"&&(t[b]=p);break;case"ariaHidden":case"aria-hidden":p!==!0&&p!=="true"&&delete r["aria-hidden"];break;default:if(b.slice(0,3)==="on:")break;ws[b]===void 0&&(r[b]=p)}}const i=mo(n,t),o=i.attributes;if(t.inline&&(a="vertical-align: -0.125em; "+a),s==="svg"){Object.assign(r,o),a!==""&&(r.style=a);let b=0,p=e.id;return typeof p=="string"&&(p=p.replace(/-/g,"_")),{svg:!0,attributes:r,body:yo(i.body,p?()=>p+"ID"+b++:"iconifySvelte")}}const{body:l,width:c,height:f}=n,u=s==="mask"||(s==="bg"?!1:l.indexOf("currentColor")!==-1),h=Jo(l,{...o,width:c+"",height:f+""}),g={"--svg":Ko(h)},y=b=>{const p=o[b];p&&(g[b]=Go(p))};y("width"),y("height"),Object.assign(g,zo,u?hn:vr);let w="";for(const b in g)w+=b+": "+g[b]+";";return r.style=w+a,{svg:!1,attributes:r}}gr(!0);wo("",Ro);if(typeof document<"u"&&typeof window<"u"){const n=window;if(n.IconifyPreload!==void 0){const e=n.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!io(s))&&console.error(t)}catch{console.error(t)}})}if(n.IconifyProviders!==void 0){const e=n.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const s="IconifyProviders["+t+"] is invalid.";try{const r=e[t];if(typeof r!="object"||!r||r.resources===void 0)continue;bo(t,r)||console.error(s)}catch{console.error(s)}}}}function Zo(n,e,t,s,r){function a(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof n=="object"&&n!==null&&typeof n.body=="string")return e.name="",a(),{data:{...Mt,...n}};let i;if(typeof n!="string"||(i=Nt(n,!1,!0))===null)return a(),null;const o=ro(i);if(!o)return t&&(!e.loading||e.loading.name!==n)&&(a(),e.name="",e.loading={name:n,abort:jo([i],s)}),null;a(),e.name!==n&&(e.name=n,r&&!e.destroyed&&r(n));const l=["iconify"];return i.prefix!==""&&l.push("iconify--"+i.prefix),i.provider!==""&&l.push("iconify--"+i.provider),{data:o,classes:l}}function el(n,e){return n?Yo({...Mt,...n},e):null}var tl=xi("<svg><!></svg>"),nl=Ce("<span></span>");function sl(n,e){er(e,!0);const t={name:"",loading:null,destroyed:!1},s=Pi(e,["$$slots","$$events","$$legacy"]);let r=me(!1),a=me(0),i=me(null);vi(()=>{M(a);const u=!!e.ssr||M(r),h=Zo(e.icon,t,u,o,e.onload),m=h?el(h.data,s):null;m&&h.classes&&(m.attributes.class=(typeof s.class=="string"?s.class+" ":"")+h.classes.join(" ")),ue(i,m,!0)});function o(){Si(a)}Oi(()=>{ue(r,!0)}),$i(()=>{t.destroyed=!0,t.loading&&(t.loading.abort(),t.loading=null)});var l=ss(),c=rs(l);{var f=u=>{var h=ss(),m=rs(h);{var g=w=>{var b=tl();us(b,()=>({...M(i).attributes}));var p=z(b);Di(p,()=>M(i).body,!0),J(b),Y(w,b)},y=w=>{var b=nl();us(b,()=>({...M(i).attributes})),Y(w,b)};xt(m,w=>{M(i).svg?w(g):w(y,!1)})}Y(u,h)};xt(c,u=>{M(i)&&u(f)})}Y(n,l),tr()}function E(n,e,t,s,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function d(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)}let Sr=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Sr=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};function mn(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const pn=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class R extends Error{}class U extends R{constructor(e,t,s,r){super(`${U.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.requestID=r==null?void 0:r.get("x-request-id"),this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Lt({message:s,cause:pn(t)});const a=t==null?void 0:t.error;return e===400?new xr(e,a,s,r):e===401?new Ar(e,a,s,r):e===403?new Ir(e,a,s,r):e===404?new Cr(e,a,s,r):e===409?new Rr(e,a,s,r):e===422?new Er(e,a,s,r):e===429?new kr(e,a,s,r):e>=500?new Or(e,a,s,r):new U(e,a,s,r)}}class Z extends U{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Lt extends U{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Pn extends Lt{constructor({message:e}={}){super({message:e??"Request timed out."})}}class xr extends U{}class Ar extends U{}class Ir extends U{}class Cr extends U{}class Rr extends U{}class Er extends U{}class kr extends U{}class Or extends U{}class $r extends R{constructor(){super("Could not parse response content as the length limit was reached")}}class Tr extends R{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Me extends Error{constructor(e){super(e)}}const rl=/^[a-z][a-z0-9+.-]*:/i,al=n=>rl.test(n);let X=n=>(X=Array.isArray,X(n)),Ss=X;function il(n){return typeof n!="object"?{}:n??{}}function ol(n){if(!n)return!0;for(const e in n)return!1;return!0}function ll(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Yt(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const cl=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new R(`${n} must be an integer`);if(e<0)throw new R(`${n} must be a positive integer`);return e},ul=n=>{try{return JSON.parse(n)}catch{return}},Ge=n=>new Promise(e=>setTimeout(e,n)),ve="5.8.2",fl=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function dl(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const hl=()=>{var t;const n=dl();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":As(Deno.build.os),"X-Stainless-Arch":xs(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":As(globalThis.process.platform??"unknown"),"X-Stainless-Arch":xs(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=ml();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ve,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ml(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,a=s[2]||0,i=s[3]||0;return{browser:e,version:`${r}.${a}.${i}`}}}return null}const xs=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",As=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Is;const pl=()=>Is??(Is=hl());function gl(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Pr(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function Nr(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Pr({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function Mr(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _l(n){var s,r;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((r=(s=n[Symbol.asyncIterator]()).return)==null?void 0:r.call(s));return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const yl=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Lr="RFC3986",Fr=n=>String(n),Cs={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:Fr},wl="RFC1738";let gn=(n,e)=>(gn=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),gn(n,e));const te=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),Zt=1024,bl=(n,e,t,s,r)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<a.length;o+=Zt){const l=a.length>=Zt?a.slice(o,o+Zt):a,c=[];for(let f=0;f<l.length;++f){let u=l.charCodeAt(f);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||r===wl&&(u===40||u===41)){c[c.length]=l.charAt(f);continue}if(u<128){c[c.length]=te[u];continue}if(u<2048){c[c.length]=te[192|u>>6]+te[128|u&63];continue}if(u<55296||u>=57344){c[c.length]=te[224|u>>12]+te[128|u>>6&63]+te[128|u&63];continue}f+=1,u=65536+((u&1023)<<10|l.charCodeAt(f)&1023),c[c.length]=te[240|u>>18]+te[128|u>>12&63]+te[128|u>>6&63]+te[128|u&63]}i+=c.join("")}return i};function vl(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function Rs(n,e){if(X(n)){const t=[];for(let s=0;s<n.length;s+=1)t.push(e(n[s]));return t}return e(n)}const Dr={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},Br=function(n,e){Array.prototype.push.apply(n,X(e)?e:[e])};let Es;const D={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:bl,encodeValuesOnly:!1,format:Lr,formatter:Fr,indices:!1,serializeDate(n){return(Es??(Es=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function Sl(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const en={};function jr(n,e,t,s,r,a,i,o,l,c,f,u,h,m,g,y,w,b){let p=n,v=b,_=0,C=!1;for(;(v=v.get(en))!==void 0&&!C;){const P=v.get(n);if(_+=1,typeof P<"u"){if(P===_)throw new RangeError("Cyclic object value");C=!0}typeof v.get(en)>"u"&&(_=0)}if(typeof c=="function"?p=c(e,p):p instanceof Date?p=h==null?void 0:h(p):t==="comma"&&X(p)&&(p=Rs(p,function(P){return P instanceof Date?h==null?void 0:h(P):P})),p===null){if(a)return l&&!y?l(e,D.encoder,w,"key",m):e;p=""}if(Sl(p)||vl(p)){if(l){const P=y?e:l(e,D.encoder,w,"key",m);return[(g==null?void 0:g(P))+"="+(g==null?void 0:g(l(p,D.encoder,w,"value",m)))]}return[(g==null?void 0:g(e))+"="+(g==null?void 0:g(String(p)))]}const A=[];if(typeof p>"u")return A;let x;if(t==="comma"&&X(p))y&&l&&(p=Rs(p,l)),x=[{value:p.length>0?p.join(",")||null:void 0}];else if(X(c))x=c;else{const P=Object.keys(p);x=f?P.sort(f):P}const N=o?String(e).replace(/\./g,"%2E"):String(e),T=s&&X(p)&&p.length===1?N+"[]":N;if(r&&X(p)&&p.length===0)return T+"[]";for(let P=0;P<x.length;++P){const O=x[P],G=typeof O=="object"&&typeof O.value<"u"?O.value:p[O];if(i&&G===null)continue;const Ee=u&&o?O.replace(/\./g,"%2E"):O,qt=X(p)?typeof t=="function"?t(T,Ee):T:T+(u?"."+Ee:"["+Ee+"]");b.set(n,_);const re=new WeakMap;re.set(en,b),Br(A,jr(G,qt,t,s,r,a,i,o,t==="comma"&&y&&X(p)?null:l,c,f,u,h,m,g,y,w,re))}return A}function xl(n=D){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||D.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=Lr;if(typeof n.format<"u"){if(!gn(Cs,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const s=Cs[t];let r=D.filter;(typeof n.filter=="function"||X(n.filter))&&(r=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in Dr?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=D.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:D.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:D.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:D.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:D.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?D.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:D.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:D.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:D.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:D.encodeValuesOnly,filter:r,format:t,formatter:s,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:D.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:D.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:D.strictNullHandling}}function Al(n,e={}){let t=n;const s=xl(e);let r,a;typeof s.filter=="function"?(a=s.filter,t=a("",t)):X(s.filter)&&(a=s.filter,r=a);const i=[];if(typeof t!="object"||t===null)return"";const o=Dr[s.arrayFormat],l=o==="comma"&&s.commaRoundTrip;r||(r=Object.keys(t)),s.sort&&r.sort(s.sort);const c=new WeakMap;for(let h=0;h<r.length;++h){const m=r[h];s.skipNulls&&t[m]===null||Br(i,jr(t[m],m,o,l,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,c))}const f=i.join(s.delimiter);let u=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?u+="utf8=%26%2310003%3B&":u+="utf8=%E2%9C%93&"),f.length>0?u+f:""}function Il(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let ks;function Nn(n){let e;return(ks??(e=new globalThis.TextEncoder,ks=e.encode.bind(e)))(n)}let Os;function $s(n){let e;return(Os??(e=new globalThis.TextDecoder,Os=e.decode.bind(e)))(n)}var V,K;class Ft{constructor(){V.set(this,void 0),K.set(this,void 0),E(this,V,new Uint8Array),E(this,K,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Nn(e):e;E(this,V,Il([d(this,V,"f"),t]));const s=[];let r;for(;(r=Cl(d(this,V,"f"),d(this,K,"f")))!=null;){if(r.carriage&&d(this,K,"f")==null){E(this,K,r.index);continue}if(d(this,K,"f")!=null&&(r.index!==d(this,K,"f")+1||r.carriage)){s.push($s(d(this,V,"f").subarray(0,d(this,K,"f")-1))),E(this,V,d(this,V,"f").subarray(d(this,K,"f"))),E(this,K,null);continue}const a=d(this,K,"f")!==null?r.preceding-1:r.preceding,i=$s(d(this,V,"f").subarray(0,a));s.push(i),E(this,V,d(this,V,"f").subarray(r.index)),E(this,K,null)}return s}flush(){return d(this,V,"f").length?this.decode(`
`):[]}}V=new WeakMap,K=new WeakMap;Ft.NEWLINE_CHARS=new Set([`
`,"\r"]);Ft.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Cl(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Rl(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}class se{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;async function*r(){if(s)throw new R("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const i of El(e,t))if(!a){if(i.data.startsWith("[DONE]")){a=!0;continue}if(i.event===null||i.event.startsWith("response.")||i.event.startsWith("transcript.")){let o;try{o=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(o&&o.error)throw new U(void 0,o.error,void 0,e.headers);yield o}else{let o;try{o=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(i.event=="error")throw new U(void 0,o.error,o.message,void 0);yield{event:i.event,data:o}}}a=!0}catch(i){if(mn(i))return;throw i}finally{a||t.abort()}}return new se(r,t)}static fromReadableStream(e,t){let s=!1;async function*r(){const i=new Ft,o=Mr(e);for await(const l of o)for(const c of i.decode(l))yield c;for(const l of i.flush())yield l}async function*a(){if(s)throw new R("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let i=!1;try{for await(const o of r())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(mn(o))return;throw o}finally{i||t.abort()}}return new se(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=a=>({next:()=>{if(a.length===0){const i=s.next();e.push(i),t.push(i)}return a.shift()}});return[new se(()=>r(e),this.controller),new se(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;return Pr({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:a}=await t.next();if(a)return s.close();const i=Nn(JSON.stringify(r)+`
`);s.enqueue(i)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)==null?void 0:s.call(t))}})}}async function*El(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new R("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new R("Attempted to iterate over a response with no body");const t=new Ol,s=new Ft,r=Mr(n.body);for await(const a of kl(r))for(const i of s.decode(a)){const o=t.decode(i);o&&(yield o)}for(const a of s.flush()){const i=t.decode(a);i&&(yield i)}}async function*kl(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Nn(t):t;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let a;for(;(a=Rl(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class Ol{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=$l(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function $l(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const Ct={off:0,error:200,warn:300,info:400,debug:500},Ts=(n,e,t)=>{if(n){if(ll(Ct,n))return n;W(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Ct))}`)}};function Le(){}function nt(n,e,t){return!e||Ct[n]>Ct[t]?Le:e[n].bind(e)}const Tl={error:Le,warn:Le,info:Le,debug:Le};let Ps=new WeakMap;function W(n){const e=n.logger,t=n.logLevel??"off";if(!e)return Tl;const s=Ps.get(e);if(s&&s[0]===t)return s[1];const r={error:nt("error",e,t),warn:nt("warn",e,t),info:nt("info",e,t),debug:nt("debug",e,t)};return Ps.set(e,[t,r]),r}const fe=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);async function Ur(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:a}=e,i=await(async()=>{var u;if(e.options.stream)return W(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):se.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const o=t.headers.get("content-type"),l=(u=o==null?void 0:o.split(";")[0])==null?void 0:u.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const h=await t.json();return Wr(h,t)}return await t.text()})();return W(n).debug(`[${s}] response parsed`,fe({retryOfRequestLogID:r,url:t.url,status:t.status,body:i,durationMs:Date.now()-a})),i}function Wr(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Fe;class Dt extends Promise{constructor(e,t,s=Ur){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,Fe.set(this,void 0),E(this,Fe,e)}_thenUnwrap(e){return new Dt(d(this,Fe,"f"),this.responsePromise,async(t,s)=>Wr(e(await this.parseResponse(t,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(d(this,Fe,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Fe=new WeakMap;var st;class qr{constructor(e,t,s,r){st.set(this,void 0),E(this,st,e),this.options=r,this.response=t,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new R("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await d(this,st,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(st=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Pl extends Dt{constructor(e,t,s){super(e,t,async(r,a)=>new s(r,a.response,await Ur(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class Bt extends qr{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class L extends qr{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),t=(s=e[e.length-1])==null?void 0:s.id;return t?{...this.options,query:{...il(this.options.query),after:t}}:null}}const Hr=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xe(n,e,t){return Hr(),new File(n,e??"unknown_file",t)}function dt(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const Jr=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",_e=async(n,e)=>({...n,body:await Ml(n.body,e)}),Ns=new WeakMap;function Nl(n){const e=typeof n=="function"?n:n.fetch,t=Ns.get(e);if(t)return t;const s=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return Ns.set(e,s),s}const Ml=async(n,e)=>{if(!await Nl(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([s,r])=>_n(t,s,r))),t},Ll=n=>n instanceof Blob&&"name"in n,_n=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,Xe([await t.blob()],dt(t)));else if(Jr(t))n.append(e,Xe([await new Response(Nr(t)).blob()],dt(t)));else if(Ll(t))n.append(e,t,dt(t));else if(Array.isArray(t))await Promise.all(t.map(s=>_n(n,e+"[]",s)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([s,r])=>_n(n,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},Xr=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Fl=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Xr(n),Dl=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Bl(n,e,t){if(Hr(),n=await n,Fl(n))return n instanceof File?n:Xe([await n.arrayBuffer()],n.name);if(Dl(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Xe(await yn(r),e,t)}const s=await yn(n);if(e||(e=dt(n)),!(t!=null&&t.type)){const r=s.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t={...t,type:r})}return Xe(s,e,t)}async function yn(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(Xr(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(Jr(n))for await(const s of n)e.push(...await yn(s));else{const s=(t=n==null?void 0:n.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof n}${s?`; constructor: ${s}`:""}${jl(n)}`)}return e}function jl(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class k{constructor(e){this._client=e}}function Vr(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ul=(n=Vr)=>function(t,...s){if(t.length===1)return t[0];let r=!1;const a=t.reduce((f,u,h)=>(/[?#]/.test(u)&&(r=!0),f+u+(h===s.length?"":(r?encodeURIComponent:n)(String(s[h])))),""),i=a.split(/[?#]/,1)[0],o=[],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(i))!==null;)o.push({start:c.index,length:c[0].length});if(o.length>0){let f=0;const u=o.reduce((h,m)=>{const g=" ".repeat(m.start-f),y="^".repeat(m.length);return f=m.start+m.length,h+g+y},"");throw new R(`Path parameters result in path with invalid segments:
${a}
${u}`)}return a},S=Ul(Vr);let Kr=class extends k{list(e,t={},s){return this._client.getAPIList(S`/chat/completions/${e}/messages`,L,{query:t,...s})}};function Wl(n){return typeof n.parse=="function"}const Rt=n=>(n==null?void 0:n.role)==="assistant",Qr=n=>(n==null?void 0:n.role)==="tool";var wn,ht,mt,De,Be,pt,je,ie,Ue,Et,kt,Se,zr;class Mn{constructor(){wn.add(this),this.controller=new AbortController,ht.set(this,void 0),mt.set(this,()=>{}),De.set(this,()=>{}),Be.set(this,void 0),pt.set(this,()=>{}),je.set(this,()=>{}),ie.set(this,{}),Ue.set(this,!1),Et.set(this,!1),kt.set(this,!1),Se.set(this,!1),E(this,ht,new Promise((e,t)=>{E(this,mt,e,"f"),E(this,De,t,"f")})),E(this,Be,new Promise((e,t)=>{E(this,pt,e,"f"),E(this,je,t,"f")})),d(this,ht,"f").catch(()=>{}),d(this,Be,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},d(this,wn,"m",zr).bind(this))},0)}_connected(){this.ended||(d(this,mt,"f").call(this),this._emit("connect"))}get ended(){return d(this,Ue,"f")}get errored(){return d(this,Et,"f")}get aborted(){return d(this,kt,"f")}abort(){this.controller.abort()}on(e,t){return(d(this,ie,"f")[e]||(d(this,ie,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=d(this,ie,"f")[e];if(!s)return this;const r=s.findIndex(a=>a.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(d(this,ie,"f")[e]||(d(this,ie,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{E(this,Se,!0),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){E(this,Se,!0),await d(this,Be,"f")}_emit(e,...t){if(d(this,Ue,"f"))return;e==="end"&&(E(this,Ue,!0),d(this,pt,"f").call(this));const s=d(this,ie,"f")[e];if(s&&(d(this,ie,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!d(this,Se,"f")&&!(s!=null&&s.length)&&Promise.reject(r),d(this,De,"f").call(this,r),d(this,je,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!d(this,Se,"f")&&!(s!=null&&s.length)&&Promise.reject(r),d(this,De,"f").call(this,r),d(this,je,"f").call(this,r),this._emit("end")}}_emitFinal(){}}ht=new WeakMap,mt=new WeakMap,De=new WeakMap,Be=new WeakMap,pt=new WeakMap,je=new WeakMap,ie=new WeakMap,Ue=new WeakMap,Et=new WeakMap,kt=new WeakMap,Se=new WeakMap,wn=new WeakSet,zr=function(e){if(E(this,Et,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Z),e instanceof Z)return E(this,kt,!0),this._emit("abort",e);if(e instanceof R)return this._emit("error",e);if(e instanceof Error){const t=new R(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new R(String(e)))};function Ln(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Ye(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function ql(n,e){return!e||!Gr(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:Fn(n,e)}function Fn(n,e){const t=n.choices.map(s=>{var r;if(s.finish_reason==="length")throw new $r;if(s.finish_reason==="content_filter")throw new Tr;return{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((r=s.message.tool_calls)==null?void 0:r.map(a=>Jl(e,a)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?Hl(e,s.message.content):null}}});return{...n,choices:t}}function Hl(n,e){var t,s;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((s=n.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function Jl(n,e){var s;const t=(s=n.tools)==null?void 0:s.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Ye(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function Xl(n,e){var s;if(!n)return!1;const t=(s=n.tools)==null?void 0:s.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return Ye(t)||(t==null?void 0:t.function.strict)||!1}function Gr(n){var e;return Ln(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>Ye(t)||t.type==="function"&&t.function.strict===!0))??!1}function Vl(n){for(const e of n??[]){if(e.type!=="function")throw new R(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new R(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var H,bn,Ot,vn,Sn,xn,Yr,Zr;const Kl=10;class ea extends Mn{constructor(){super(...arguments),H.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(s=e.choices[0])==null?void 0:s.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),Qr(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Rt(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new R("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),d(this,H,"m",bn).call(this)}async finalMessage(){return await this.done(),d(this,H,"m",Ot).call(this)}async finalFunctionToolCall(){return await this.done(),d(this,H,"m",vn).call(this)}async finalFunctionToolCallResult(){return await this.done(),d(this,H,"m",Sn).call(this)}async totalUsage(){return await this.done(),d(this,H,"m",xn).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=d(this,H,"m",Ot).call(this);t&&this._emit("finalMessage",t);const s=d(this,H,"m",bn).call(this);s&&this._emit("finalContent",s);const r=d(this,H,"m",vn).call(this);r&&this._emit("finalFunctionToolCall",r);const a=d(this,H,"m",Sn).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",d(this,H,"m",xn).call(this))}async _createChatCompletion(e,t,s){const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),d(this,H,"m",Yr).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Fn(a,t))}async _runChatCompletion(e,t,s){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,s)}async _runTools(e,t,s){var m,g,y;const r="tool",{tool_choice:a="auto",stream:i,...o}=t,l=typeof a!="string"&&((m=a==null?void 0:a.function)==null?void 0:m.name),{maxChatCompletions:c=Kl}=s||{},f=t.tools.map(w=>{if(Ye(w)){if(!w.$callback)throw new R("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),u={};for(const w of f)w.type==="function"&&(u[w.function.name||w.function.function.name]=w.function);const h="tools"in t?f.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of t.messages)this._addMessage(w,!1);for(let w=0;w<c;++w){const p=(g=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:h,messages:[...this.messages]},s)).choices[0])==null?void 0:g.message;if(!p)throw new R("missing message in ChatCompletion response");if(!((y=p.tool_calls)!=null&&y.length))return;for(const v of p.tool_calls){if(v.type!=="function")continue;const _=v.id,{name:C,arguments:A}=v.function,x=u[C];if(x){if(l&&l!==C){const O=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:_,content:O});continue}}else{const O=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(u).map(G=>JSON.stringify(G)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:_,content:O});continue}let N;try{N=Wl(x)?await x.parse(A):A}catch(O){const G=O instanceof Error?O.message:String(O);this._addMessage({role:r,tool_call_id:_,content:G});continue}const T=await x.function(N,this),P=d(this,H,"m",Zr).call(this,T);if(this._addMessage({role:r,tool_call_id:_,content:P}),l)return}}}}H=new WeakSet,bn=function(){return d(this,H,"m",Ot).call(this).content??null},Ot=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Rt(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new R("stream ended without producing a ChatCompletionMessage with role=assistant")},vn=function(){var e,t;for(let s=this.messages.length-1;s>=0;s--){const r=this.messages[s];if(Rt(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},Sn=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Qr(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(s=>{var r;return s.role==="assistant"&&((r=s.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},xn=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Yr=function(e){if(e.n!=null&&e.n>1)throw new R("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Zr=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Dn extends ea{static runTools(e,t,s){const r=new Dn,a={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),Rt(e)&&e.content&&this._emit("content",e.content)}}const ta=1,na=2,sa=4,ra=8,aa=16,ia=32,oa=64,la=128,ca=256,ua=la|ca,fa=aa|ia|ua|oa,da=ta|na|fa,ha=sa|ra,Ql=da|ha,B={STR:ta,NUM:na,ARR:sa,OBJ:ra,NULL:aa,BOOL:ia,NAN:oa,INFINITY:la,MINUS_INFINITY:ca,INF:ua,SPECIAL:fa,ATOM:da,COLLECTION:ha,ALL:Ql};class zl extends Error{}class Gl extends Error{}function Yl(n,e=B.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return Zl(n.trim(),e)}const Zl=(n,e)=>{const t=n.length;let s=0;const r=h=>{throw new zl(`${h} at position ${s}`)},a=h=>{throw new Gl(`${h} at position ${s}`)},i=()=>(u(),s>=t&&r("Unexpected end of input"),n[s]==='"'?o():n[s]==="{"?l():n[s]==="["?c():n.substring(s,s+4)==="null"||B.NULL&e&&t-s<4&&"null".startsWith(n.substring(s))?(s+=4,null):n.substring(s,s+4)==="true"||B.BOOL&e&&t-s<4&&"true".startsWith(n.substring(s))?(s+=4,!0):n.substring(s,s+5)==="false"||B.BOOL&e&&t-s<5&&"false".startsWith(n.substring(s))?(s+=5,!1):n.substring(s,s+8)==="Infinity"||B.INFINITY&e&&t-s<8&&"Infinity".startsWith(n.substring(s))?(s+=8,1/0):n.substring(s,s+9)==="-Infinity"||B.MINUS_INFINITY&e&&1<t-s&&t-s<9&&"-Infinity".startsWith(n.substring(s))?(s+=9,-1/0):n.substring(s,s+3)==="NaN"||B.NAN&e&&t-s<3&&"NaN".startsWith(n.substring(s))?(s+=3,NaN):f()),o=()=>{const h=s;let m=!1;for(s++;s<t&&(n[s]!=='"'||m&&n[s-1]==="\\");)m=n[s]==="\\"?!m:!1,s++;if(n.charAt(s)=='"')try{return JSON.parse(n.substring(h,++s-Number(m)))}catch(g){a(String(g))}else if(B.STR&e)try{return JSON.parse(n.substring(h,s-Number(m))+'"')}catch{return JSON.parse(n.substring(h,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},l=()=>{s++,u();const h={};try{for(;n[s]!=="}";){if(u(),s>=t&&B.OBJ&e)return h;const m=o();u(),s++;try{const g=i();Object.defineProperty(h,m,{value:g,writable:!0,enumerable:!0,configurable:!0})}catch(g){if(B.OBJ&e)return h;throw g}u(),n[s]===","&&s++}}catch{if(B.OBJ&e)return h;r("Expected '}' at end of object")}return s++,h},c=()=>{s++;const h=[];try{for(;n[s]!=="]";)h.push(i()),u(),n[s]===","&&s++}catch{if(B.ARR&e)return h;r("Expected ']' at end of array")}return s++,h},f=()=>{if(s===0){n==="-"&&B.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(m){if(B.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(m))}}const h=s;for(n[s]==="-"&&s++;n[s]&&!",]}".includes(n[s]);)s++;s==t&&!(B.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(h,s))}catch{n.substring(h,s)==="-"&&B.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(h,n.lastIndexOf("e")))}catch(g){a(String(g))}}},u=()=>{for(;s<t&&` 
\r	`.includes(n[s]);)s++};return i()},Ms=n=>Yl(n,B.ALL^B.NUM);var F,ae,ye,oe,tn,rt,nn,sn,rn,at,an,Ls;class ze extends ea{constructor(e){super(),F.add(this),ae.set(this,void 0),ye.set(this,void 0),oe.set(this,void 0),E(this,ae,e),E(this,ye,[])}get currentChatCompletionSnapshot(){return d(this,oe,"f")}static fromReadableStream(e){const t=new ze(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,s){const r=new ze(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,s){var i;super._createChatCompletion;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),d(this,F,"m",tn).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const o of a)d(this,F,"m",nn).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new Z;return this._addChatCompletion(d(this,F,"m",at).call(this))}async _fromReadableStream(e,t){var i;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),d(this,F,"m",tn).call(this),this._connected();const r=se.fromReadableStream(e,this.controller);let a;for await(const o of r)a&&a!==o.id&&this._addChatCompletion(d(this,F,"m",at).call(this)),d(this,F,"m",nn).call(this,o),a=o.id;if((i=r.controller.signal)!=null&&i.aborted)throw new Z;return this._addChatCompletion(d(this,F,"m",at).call(this))}[(ae=new WeakMap,ye=new WeakMap,oe=new WeakMap,F=new WeakSet,tn=function(){this.ended||E(this,oe,void 0)},rt=function(t){let s=d(this,ye,"f")[t.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},d(this,ye,"f")[t.index]=s,s)},nn=function(t){var r,a,i,o,l,c,f,u,h,m,g,y,w,b,p;if(this.ended)return;const s=d(this,F,"m",Ls).call(this,t);this._emit("chunk",t,s);for(const v of t.choices){const _=s.choices[v.index];v.delta.content!=null&&((r=_.message)==null?void 0:r.role)==="assistant"&&((a=_.message)!=null&&a.content)&&(this._emit("content",v.delta.content,_.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:_.message.content,parsed:_.message.parsed})),v.delta.refusal!=null&&((i=_.message)==null?void 0:i.role)==="assistant"&&((o=_.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:_.message.refusal}),((l=v.logprobs)==null?void 0:l.content)!=null&&((c=_.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=v.logprobs)==null?void 0:f.content,snapshot:((u=_.logprobs)==null?void 0:u.content)??[]}),((h=v.logprobs)==null?void 0:h.refusal)!=null&&((m=_.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(g=v.logprobs)==null?void 0:g.refusal,snapshot:((y=_.logprobs)==null?void 0:y.refusal)??[]});const C=d(this,F,"m",rt).call(this,_);_.finish_reason&&(d(this,F,"m",rn).call(this,_),C.current_tool_call_index!=null&&d(this,F,"m",sn).call(this,_,C.current_tool_call_index));for(const A of v.delta.tool_calls??[])C.current_tool_call_index!==A.index&&(d(this,F,"m",rn).call(this,_),C.current_tool_call_index!=null&&d(this,F,"m",sn).call(this,_,C.current_tool_call_index)),C.current_tool_call_index=A.index;for(const A of v.delta.tool_calls??[]){const x=(w=_.message.tool_calls)==null?void 0:w[A.index];x!=null&&x.type&&((x==null?void 0:x.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(b=x.function)==null?void 0:b.name,index:A.index,arguments:x.function.arguments,parsed_arguments:x.function.parsed_arguments,arguments_delta:((p=A.function)==null?void 0:p.arguments)??""}):(x==null||x.type,void 0))}}},sn=function(t,s){var i,o,l;if(d(this,F,"m",rt).call(this,t).done_tool_calls.has(s))return;const a=(i=t.message.tool_calls)==null?void 0:i[s];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(o=d(this,ae,"f"))==null?void 0:o.tools)==null?void 0:l.find(f=>f.type==="function"&&f.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:s,arguments:a.function.arguments,parsed_arguments:Ye(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},rn=function(t){var r,a;const s=d(this,F,"m",rt).call(this,t);if(t.message.content&&!s.content_done){s.content_done=!0;const i=d(this,F,"m",an).call(this);this._emit("content.done",{content:t.message.content,parsed:i?i.$parseRaw(t.message.content):null})}t.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},at=function(){if(this.ended)throw new R("stream has ended, this shouldn't happen");const t=d(this,oe,"f");if(!t)throw new R("request ended without sending any chunks");return E(this,oe,void 0),E(this,ye,[]),ec(t,d(this,ae,"f"))},an=function(){var s;const t=(s=d(this,ae,"f"))==null?void 0:s.response_format;return Ln(t)?t:null},Ls=function(t){var s,r,a,i;let o=d(this,oe,"f");const{choices:l,...c}=t;o?Object.assign(o,c):o=E(this,oe,{...c,choices:[]});for(const{delta:f,finish_reason:u,index:h,logprobs:m=null,...g}of t.choices){let y=o.choices[h];if(y||(y=o.choices[h]={finish_reason:u,index:h,message:{},logprobs:m,...g}),m)if(!y.logprobs)y.logprobs=Object.assign({},m);else{const{content:A,refusal:x,...N}=m;Object.assign(y.logprobs,N),A&&((s=y.logprobs).content??(s.content=[]),y.logprobs.content.push(...A)),x&&((r=y.logprobs).refusal??(r.refusal=[]),y.logprobs.refusal.push(...x))}if(u&&(y.finish_reason=u,d(this,ae,"f")&&Gr(d(this,ae,"f")))){if(u==="length")throw new $r;if(u==="content_filter")throw new Tr}if(Object.assign(y,g),!f)continue;const{content:w,refusal:b,function_call:p,role:v,tool_calls:_,...C}=f;if(Object.assign(y.message,C),b&&(y.message.refusal=(y.message.refusal||"")+b),v&&(y.message.role=v),p&&(y.message.function_call?(p.name&&(y.message.function_call.name=p.name),p.arguments&&((a=y.message.function_call).arguments??(a.arguments=""),y.message.function_call.arguments+=p.arguments)):y.message.function_call=p),w&&(y.message.content=(y.message.content||"")+w,!y.message.refusal&&d(this,F,"m",an).call(this)&&(y.message.parsed=Ms(y.message.content))),_){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:A,id:x,type:N,function:T,...P}of _){const O=(i=y.message.tool_calls)[A]??(i[A]={});Object.assign(O,P),x&&(O.id=x),N&&(O.type=N),T&&(O.function??(O.function={name:T.name??"",arguments:""})),T!=null&&T.name&&(O.function.name=T.name),T!=null&&T.arguments&&(O.function.arguments+=T.arguments,Xl(d(this,ae,"f"),O)&&(O.function.parsed_arguments=Ms(O.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new se(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function ec(n,e){const{id:t,choices:s,created:r,model:a,system_fingerprint:i,...o}=n,l={...o,id:t,choices:s.map(({message:c,finish_reason:f,index:u,logprobs:h,...m})=>{if(!f)throw new R(`missing finish_reason for choice ${u}`);const{content:g=null,function_call:y,tool_calls:w,...b}=c,p=c.role;if(!p)throw new R(`missing role for choice ${u}`);if(y){const{arguments:v,name:_}=y;if(v==null)throw new R(`missing function_call.arguments for choice ${u}`);if(!_)throw new R(`missing function_call.name for choice ${u}`);return{...m,message:{content:g,function_call:{arguments:v,name:_},role:p,refusal:c.refusal??null},finish_reason:f,index:u,logprobs:h}}return w?{...m,index:u,finish_reason:f,logprobs:h,message:{...b,role:p,content:g,refusal:c.refusal??null,tool_calls:w.map((v,_)=>{const{function:C,type:A,id:x,...N}=v,{arguments:T,name:P,...O}=C||{};if(x==null)throw new R(`missing choices[${u}].tool_calls[${_}].id
${it(n)}`);if(A==null)throw new R(`missing choices[${u}].tool_calls[${_}].type
${it(n)}`);if(P==null)throw new R(`missing choices[${u}].tool_calls[${_}].function.name
${it(n)}`);if(T==null)throw new R(`missing choices[${u}].tool_calls[${_}].function.arguments
${it(n)}`);return{...N,id:x,type:A,function:{...O,name:P,arguments:T}}})}}:{...m,message:{...b,content:g,role:p,refusal:c.refusal??null},finish_reason:f,index:u,logprobs:h}}),created:r,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return ql(l,e)}function it(n){return JSON.stringify(n)}class $t extends ze{static fromReadableStream(e){const t=new $t(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,s){const r=new $t(t),a={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let Bn=class extends k{constructor(){super(...arguments),this.messages=new Kr(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(S`/chat/completions/${e}`,t)}update(e,t,s){return this._client.post(S`/chat/completions/${e}`,{body:t,...s})}list(e={},t){return this._client.getAPIList("/chat/completions",L,{query:e,...t})}delete(e,t){return this._client.delete(S`/chat/completions/${e}`,t)}parse(e,t){return Vl(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>Fn(s,e))}runTools(e,t){return e.stream?$t.runTools(this._client,e,t):Dn.runTools(this._client,e,t)}stream(e,t){return ze.createChatCompletion(this._client,e,t)}};Bn.Messages=Kr;class jn extends k{constructor(){super(...arguments),this.completions=new Bn(this._client)}}jn.Completions=Bn;const ma=Symbol("brand.privateNullableHeaders");function*tc(n){if(!n)return;if(ma in n){const{values:s,nulls:r}=n;yield*s.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Ss(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=Ss(s[1])?s[1]:[s[1]];let i=!1;for(const o of a)o!==void 0&&(e&&!i&&(i=!0,yield[r,null]),yield[r,o])}}const I=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[a,i]of tc(s)){const o=a.toLowerCase();r.has(o)||(e.delete(a),r.add(o)),i===null?(e.delete(a),t.add(o)):(e.append(a,i),t.delete(o))}}return{[ma]:!0,values:e,nulls:t}};class pa extends k{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:I([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class ga extends k{create(e,t){return this._client.post("/audio/transcriptions",_e({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class _a extends k{create(e,t){return this._client.post("/audio/translations",_e({body:e,...t,__metadata:{model:e.model}},this._client))}}class Ze extends k{constructor(){super(...arguments),this.transcriptions=new ga(this._client),this.translations=new _a(this._client),this.speech=new pa(this._client)}}Ze.Transcriptions=ga;Ze.Translations=_a;Ze.Speech=pa;class ya extends k{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(S`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",L,{query:e,...t})}cancel(e,t){return this._client.post(S`/batches/${e}/cancel`,t)}}class wa extends k{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(S`/assistants/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(S`/assistants/${e}`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},t){return this._client.getAPIList("/assistants",L,{query:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(S`/assistants/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class ba extends k{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class va extends k{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class jt extends k{constructor(){super(...arguments),this.sessions=new ba(this._client),this.transcriptionSessions=new va(this._client)}}jt.Sessions=ba;jt.TranscriptionSessions=va;class Sa extends k{create(e,t,s){return this._client.post(S`/threads/${e}/messages`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{thread_id:r}=t;return this._client.get(S`/threads/${r}/messages/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{thread_id:r,...a}=t;return this._client.post(S`/threads/${r}/messages/${e}`,{body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(S`/threads/${e}/messages`,L,{query:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t,s){const{thread_id:r}=t;return this._client.delete(S`/threads/${r}/messages/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class xa extends k{retrieve(e,t,s){const{thread_id:r,run_id:a,...i}=t;return this._client.get(S`/threads/${r}/runs/${a}/steps/${e}`,{query:i,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t,s){const{thread_id:r,...a}=t;return this._client.getAPIList(S`/threads/${r}/runs/${e}/steps`,L,{query:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const nc=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,s=new Uint8Array(t);for(let r=0;r<t;r++)s[r]=e.charCodeAt(r);return Array.from(new Float32Array(s.buffer))}};var on={};const we=n=>{var e,t,s,r;if(typeof globalThis.process<"u")return((e=on==null?void 0:on[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(r=(s=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:s.call(t,n))==null?void 0:r.trim()};var j,pe,An,ne,gt,ee,ge,Ae,he,Tt,Q,_t,yt,Ve,We,qe,Fs,Ds,Bs,js,Us,Ws,qs;class Ke extends Mn{constructor(){super(...arguments),j.add(this),An.set(this,[]),ne.set(this,{}),gt.set(this,{}),ee.set(this,void 0),ge.set(this,void 0),Ae.set(this,void 0),he.set(this,void 0),Tt.set(this,void 0),Q.set(this,void 0),_t.set(this,void 0),yt.set(this,void 0),Ve.set(this,void 0)}[(An=new WeakMap,ne=new WeakMap,gt=new WeakMap,ee=new WeakMap,ge=new WeakMap,Ae=new WeakMap,he=new WeakMap,Tt=new WeakMap,Q=new WeakMap,_t=new WeakMap,yt=new WeakMap,Ve=new WeakMap,j=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new pe;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=se.fromReadableStream(e,this.controller);for await(const i of r)d(this,j,"m",We).call(this,i);if((a=r.controller.signal)!=null&&a.aborted)throw new Z;return this._addRun(d(this,j,"m",qe).call(this))}toReadableStream(){return new se(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,s,r){const a=new pe;return a._run(()=>a._runToolAssistantStream(e,t,s,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,t,s,r){var l;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},o=await e.submitToolOutputs(t,i,{...r,signal:this.controller.signal});this._connected();for await(const c of o)d(this,j,"m",We).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new Z;return this._addRun(d(this,j,"m",qe).call(this))}static createThreadAssistantStream(e,t,s){const r=new pe;return r._run(()=>r._threadAssistantStream(e,t,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,s,r){const a=new pe;return a._run(()=>a._runAssistantStream(e,t,s,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return d(this,_t,"f")}currentRun(){return d(this,yt,"f")}currentMessageSnapshot(){return d(this,ee,"f")}currentRunStepSnapshot(){return d(this,Ve,"f")}async finalRunSteps(){return await this.done(),Object.values(d(this,ne,"f"))}async finalMessages(){return await this.done(),Object.values(d(this,gt,"f"))}async finalRun(){if(await this.done(),!d(this,ge,"f"))throw Error("Final run was not received.");return d(this,ge,"f")}async _createThreadAssistantStream(e,t,s){var o;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},i=await e.createAndRun(a,{...s,signal:this.controller.signal});this._connected();for await(const l of i)d(this,j,"m",We).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new Z;return this._addRun(d(this,j,"m",qe).call(this))}async _createAssistantStream(e,t,s,r){var l;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},o=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const c of o)d(this,j,"m",We).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new Z;return this._addRun(d(this,j,"m",qe).call(this))}static accumulateDelta(e,t){for(const[s,r]of Object.entries(t)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let a=e[s];if(a==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Yt(a)&&Yt(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...r);continue}for(const i of r){if(!Yt(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=a[o];l==null?a.push(i):a[o]=this.accumulateDelta(l,i)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${a}`);e[s]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,s){return await this._createThreadAssistantStream(t,e,s)}async _runAssistantStream(e,t,s,r){return await this._createAssistantStream(t,e,s,r)}async _runToolAssistantStream(e,t,s,r){return await this._createToolAssistantStream(t,e,s,r)}}pe=Ke,We=function(e){if(!this.ended)switch(E(this,_t,e),d(this,j,"m",Bs).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":d(this,j,"m",qs).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":d(this,j,"m",Ds).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":d(this,j,"m",Fs).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},qe=function(){if(this.ended)throw new R("stream has ended, this shouldn't happen");if(!d(this,ge,"f"))throw Error("Final run has not been received");return d(this,ge,"f")},Fs=function(e){const[t,s]=d(this,j,"m",Us).call(this,e,d(this,ee,"f"));E(this,ee,t),d(this,gt,"f")[t.id]=t;for(const r of s){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,i=t.content[r.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=d(this,Ae,"f")){if(d(this,he,"f"))switch(d(this,he,"f").type){case"text":this._emit("textDone",d(this,he,"f").text,d(this,ee,"f"));break;case"image_file":this._emit("imageFileDone",d(this,he,"f").image_file,d(this,ee,"f"));break}E(this,Ae,r.index)}E(this,he,t.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(d(this,Ae,"f")!==void 0){const r=e.data.content[d(this,Ae,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,d(this,ee,"f"));break;case"text":this._emit("textDone",r.text,d(this,ee,"f"));break}}d(this,ee,"f")&&this._emit("messageDone",e.data),E(this,ee,void 0)}},Ds=function(e){const t=d(this,j,"m",js).call(this,e);switch(E(this,Ve,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of s.step_details.tool_calls)a.index==d(this,Tt,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(d(this,Q,"f")&&this._emit("toolCallDone",d(this,Q,"f")),E(this,Tt,a.index),E(this,Q,t.step_details.tool_calls[a.index]),d(this,Q,"f")&&this._emit("toolCallCreated",d(this,Q,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":E(this,Ve,void 0),e.data.step_details.type=="tool_calls"&&d(this,Q,"f")&&(this._emit("toolCallDone",d(this,Q,"f")),E(this,Q,void 0)),this._emit("runStepDone",e.data,t);break}},Bs=function(e){d(this,An,"f").push(e),this._emit("event",e)},js=function(e){switch(e.event){case"thread.run.step.created":return d(this,ne,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=d(this,ne,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=pe.accumulateDelta(t,s.delta);d(this,ne,"f")[e.data.id]=r}return d(this,ne,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":d(this,ne,"f")[e.data.id]=e.data;break}if(d(this,ne,"f")[e.data.id])return d(this,ne,"f")[e.data.id];throw new Error("No snapshot available")},Us=function(e,t){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let i=t.content[a.index];t.content[a.index]=d(this,j,"m",Ws).call(this,a,i)}else t.content[a.index]=a,s.push(a);return[t,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Ws=function(e,t){return pe.accumulateDelta(t,e)},qs=function(e){switch(E(this,yt,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":E(this,ge,e.data),d(this,Q,"f")&&(this._emit("toolCallDone",d(this,Q,"f")),E(this,Q,void 0));break}};let Un=class extends k{constructor(){super(...arguments),this.steps=new xa(this._client)}create(e,t,s){const{include:r,...a}=t;return this._client.post(S`/threads/${e}/runs`,{query:{include:r},body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:t.stream??!1})}retrieve(e,t,s){const{thread_id:r}=t;return this._client.get(S`/threads/${r}/runs/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{thread_id:r,...a}=t;return this._client.post(S`/threads/${r}/runs/${e}`,{body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(S`/threads/${e}/runs`,L,{query:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,t,s){const{thread_id:r}=t;return this._client.post(S`/threads/${r}/runs/${e}/cancel`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const r=await this.create(e,t,s);return await this.poll(r.id,{thread_id:e},s)}createAndStream(e,t,s){return Ke.createAssistantStream(e,this._client.beta.threads.runs,t,s)}async poll(e,t,s){var a;const r=I([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=s==null?void 0:s.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:i,response:o}=await this.retrieve(e,t,{...s,headers:{...s==null?void 0:s.headers,...r}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(s!=null&&s.pollIntervalMs)l=s.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(l=f)}}await Ge(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,t,s){return Ke.createAssistantStream(e,this._client.beta.threads.runs,t,s)}submitToolOutputs(e,t,s){const{thread_id:r,...a}=t;return this._client.post(S`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,s){const r=await this.submitToolOutputs(e,t,s);return await this.poll(r.id,t,s)}submitToolOutputsStream(e,t,s){return Ke.createToolAssistantStream(e,this._client.beta.threads.runs,t,s)}};Un.Steps=xa;class Ut extends k{constructor(){super(...arguments),this.runs=new Un(this._client),this.messages=new Sa(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(S`/threads/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(S`/threads/${e}`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t){return this._client.delete(S`/threads/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const s=await this.createAndRun(e,t);return await this.runs.poll(s.id,{thread_id:s.thread_id},t)}createAndRunStream(e,t){return Ke.createThreadAssistantStream(e,this._client.beta.threads,t)}}Ut.Runs=Un;Ut.Messages=Sa;class et extends k{constructor(){super(...arguments),this.realtime=new jt(this._client),this.assistants=new wa(this._client),this.threads=new Ut(this._client)}}et.Realtime=jt;et.Assistants=wa;et.Threads=Ut;class Aa extends k{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Ia extends k{retrieve(e,t,s){const{container_id:r}=t;return this._client.get(S`/containers/${r}/files/${e}/content`,{...s,headers:I([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}let Wn=class extends k{constructor(){super(...arguments),this.content=new Ia(this._client)}create(e,t,s){return this._client.post(S`/containers/${e}/files`,_e({body:t,...s},this._client))}retrieve(e,t,s){const{container_id:r}=t;return this._client.get(S`/containers/${r}/files/${e}`,s)}list(e,t={},s){return this._client.getAPIList(S`/containers/${e}/files`,L,{query:t,...s})}delete(e,t,s){const{container_id:r}=t;return this._client.delete(S`/containers/${r}/files/${e}`,{...s,headers:I([{Accept:"*/*"},s==null?void 0:s.headers])})}};Wn.Content=Ia;class qn extends k{constructor(){super(...arguments),this.files=new Wn(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(S`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",L,{query:e,...t})}delete(e,t){return this._client.delete(S`/containers/${e}`,{...t,headers:I([{Accept:"*/*"},t==null?void 0:t.headers])})}}qn.Files=Wn;class Ca extends k{create(e,t){const s=!!e.encoding_format;let r=s?e.encoding_format:"base64";s&&W(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return s?a:(W(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(i=>(i&&i.data&&i.data.forEach(o=>{const l=o.embedding;o.embedding=nc(l)}),i)))}}class Ra extends k{retrieve(e,t,s){const{eval_id:r,run_id:a}=t;return this._client.get(S`/evals/${r}/runs/${a}/output_items/${e}`,s)}list(e,t,s){const{eval_id:r,...a}=t;return this._client.getAPIList(S`/evals/${r}/runs/${e}/output_items`,L,{query:a,...s})}}class Hn extends k{constructor(){super(...arguments),this.outputItems=new Ra(this._client)}create(e,t,s){return this._client.post(S`/evals/${e}/runs`,{body:t,...s})}retrieve(e,t,s){const{eval_id:r}=t;return this._client.get(S`/evals/${r}/runs/${e}`,s)}list(e,t={},s){return this._client.getAPIList(S`/evals/${e}/runs`,L,{query:t,...s})}delete(e,t,s){const{eval_id:r}=t;return this._client.delete(S`/evals/${r}/runs/${e}`,s)}cancel(e,t,s){const{eval_id:r}=t;return this._client.post(S`/evals/${r}/runs/${e}`,s)}}Hn.OutputItems=Ra;class Jn extends k{constructor(){super(...arguments),this.runs=new Hn(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(S`/evals/${e}`,t)}update(e,t,s){return this._client.post(S`/evals/${e}`,{body:t,...s})}list(e={},t){return this._client.getAPIList("/evals",L,{query:e,...t})}delete(e,t){return this._client.delete(S`/evals/${e}`,t)}}Jn.Runs=Hn;let Ea=class extends k{create(e,t){return this._client.post("/files",_e({body:e,...t},this._client))}retrieve(e,t){return this._client.get(S`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",L,{query:e,...t})}delete(e,t){return this._client.delete(S`/files/${e}`,t)}content(e,t){return this._client.get(S`/files/${e}/content`,{...t,headers:I([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:s=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await Ge(t),i=await this.retrieve(e),Date.now()-a>s)throw new Pn({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return i}};class ka extends k{}let Oa=class extends k{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Xn extends k{constructor(){super(...arguments),this.graders=new Oa(this._client)}}Xn.Graders=Oa;class $a extends k{create(e,t,s){return this._client.getAPIList(S`/fine_tuning/checkpoints/${e}/permissions`,Bt,{body:t,method:"post",...s})}retrieve(e,t={},s){return this._client.get(S`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...s})}delete(e,t,s){const{fine_tuned_model_checkpoint:r}=t;return this._client.delete(S`/fine_tuning/checkpoints/${r}/permissions/${e}`,s)}}let Vn=class extends k{constructor(){super(...arguments),this.permissions=new $a(this._client)}};Vn.Permissions=$a;class Ta extends k{list(e,t={},s){return this._client.getAPIList(S`/fine_tuning/jobs/${e}/checkpoints`,L,{query:t,...s})}}class Kn extends k{constructor(){super(...arguments),this.checkpoints=new Ta(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(S`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",L,{query:e,...t})}cancel(e,t){return this._client.post(S`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},s){return this._client.getAPIList(S`/fine_tuning/jobs/${e}/events`,L,{query:t,...s})}pause(e,t){return this._client.post(S`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(S`/fine_tuning/jobs/${e}/resume`,t)}}Kn.Checkpoints=Ta;class Re extends k{constructor(){super(...arguments),this.methods=new ka(this._client),this.jobs=new Kn(this._client),this.checkpoints=new Vn(this._client),this.alpha=new Xn(this._client)}}Re.Methods=ka;Re.Jobs=Kn;Re.Checkpoints=Vn;Re.Alpha=Xn;class Pa extends k{}class Qn extends k{constructor(){super(...arguments),this.graderModels=new Pa(this._client)}}Qn.GraderModels=Pa;class Na extends k{createVariation(e,t){return this._client.post("/images/variations",_e({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",_e({body:e,...t},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Ma extends k{retrieve(e,t){return this._client.get(S`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Bt,e)}delete(e,t){return this._client.delete(S`/models/${e}`,t)}}class La extends k{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function sc(n,e){return!e||!ac(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(s=>({...s,parsed:null}))}:t)}:Fa(n,e)}function Fa(n,e){const t=n.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:lc(e,r)};if(r.type==="message"){const a=r.content.map(i=>i.type==="output_text"?{...i,parsed:rc(e,i.text)}:i);return{...r,content:a}}return r}),s=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||In(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const r of s.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),s}function rc(n,e){var t,s,r,a;return((s=(t=n.text)==null?void 0:t.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((r=n.text)==null?void 0:r.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function ac(n){var e;return!!Ln((e=n.text)==null?void 0:e.format)}function ic(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function oc(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function lc(n,e){const t=oc(n.tools??[],e.name);return{...e,...e,parsed_arguments:ic(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function In(n){const e=[];for(const t of n.output)if(t.type==="message")for(const s of t.content)s.type==="output_text"&&e.push(s.text);n.output_text=e.join("")}var be,ot,le,lt,Hs,Js,Xs,Vs;class zn extends Mn{constructor(e){super(),be.add(this),ot.set(this,void 0),le.set(this,void 0),lt.set(this,void 0),E(this,ot,e)}static createResponse(e,t,s){const r=new zn(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,s){var o;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),d(this,be,"m",Hs).call(this);let a,i=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),i=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const l of a)d(this,be,"m",Js).call(this,l,i);if((o=a.controller.signal)!=null&&o.aborted)throw new Z;return d(this,be,"m",Xs).call(this)}[(ot=new WeakMap,le=new WeakMap,lt=new WeakMap,be=new WeakSet,Hs=function(){this.ended||E(this,le,void 0)},Js=function(t,s){if(this.ended)return;const r=(i,o)=>{(s==null||o.sequence_number>s)&&this._emit(i,o)},a=d(this,be,"m",Vs).call(this,t);switch(r("event",t),t.type){case"response.output_text.delta":{const i=a.output[t.output_index];if(!i)throw new R(`missing output at index ${t.output_index}`);if(i.type==="message"){const o=i.content[t.content_index];if(!o)throw new R(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new R(`expected content to be 'output_text', got ${o.type}`);r("response.output_text.delta",{...t,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const i=a.output[t.output_index];if(!i)throw new R(`missing output at index ${t.output_index}`);i.type==="function_call"&&r("response.function_call_arguments.delta",{...t,snapshot:i.arguments});break}default:r(t.type,t);break}},Xs=function(){if(this.ended)throw new R("stream has ended, this shouldn't happen");const t=d(this,le,"f");if(!t)throw new R("request ended without sending any events");E(this,le,void 0);const s=cc(t,d(this,ot,"f"));return E(this,lt,s),s},Vs=function(t){let s=d(this,le,"f");if(!s){if(t.type!=="response.created")throw new R(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return s=E(this,le,t.response),s}switch(t.type){case"response.output_item.added":{s.output.push(t.item);break}case"response.content_part.added":{const r=s.output[t.output_index];if(!r)throw new R(`missing output at index ${t.output_index}`);r.type==="message"&&r.content.push(t.part);break}case"response.output_text.delta":{const r=s.output[t.output_index];if(!r)throw new R(`missing output at index ${t.output_index}`);if(r.type==="message"){const a=r.content[t.content_index];if(!a)throw new R(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new R(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const r=s.output[t.output_index];if(!r)throw new R(`missing output at index ${t.output_index}`);r.type==="function_call"&&(r.arguments+=t.delta);break}case"response.completed":{E(this,le,t.response);break}}return s},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=d(this,lt,"f");if(!e)throw new R("stream ended without producing a ChatCompletion");return e}}function cc(n,e){return sc(n,e)}class Da extends k{list(e,t={},s){return this._client.getAPIList(S`/responses/${e}/input_items`,L,{query:t,...s})}}class Gn extends k{constructor(){super(...arguments),this.inputItems=new Da(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&In(s),s))}retrieve(e,t={},s){return this._client.get(S`/responses/${e}`,{query:t,...s,stream:(t==null?void 0:t.stream)??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&In(r),r))}delete(e,t){return this._client.delete(S`/responses/${e}`,{...t,headers:I([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(s=>Fa(s,e))}stream(e,t){return zn.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(S`/responses/${e}/cancel`,t)}}Gn.InputItems=Da;class Ba extends k{create(e,t,s){return this._client.post(S`/uploads/${e}/parts`,_e({body:t,...s},this._client))}}class Yn extends k{constructor(){super(...arguments),this.parts=new Ba(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(S`/uploads/${e}/cancel`,t)}complete(e,t,s){return this._client.post(S`/uploads/${e}/complete`,{body:t,...s})}}Yn.Parts=Ba;const uc=async n=>{const e=await Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};class ja extends k{create(e,t,s){return this._client.post(S`/vector_stores/${e}/file_batches`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{vector_store_id:r}=t;return this._client.get(S`/vector_stores/${r}/file_batches/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,t,s){const{vector_store_id:r}=t;return this._client.post(S`/vector_stores/${r}/file_batches/${e}/cancel`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const r=await this.create(e,t);return await this.poll(e,r.id,s)}listFiles(e,t,s){const{vector_store_id:r,...a}=t;return this._client.getAPIList(S`/vector_stores/${r}/file_batches/${e}/files`,L,{query:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,t,s){var a;const r=I([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=s==null?void 0:s.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:i,response:o}=await this.retrieve(t,{vector_store_id:e},{...s,headers:r}).withResponse();switch(i.status){case"in_progress":let l=5e3;if(s!=null&&s.pollIntervalMs)l=s.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(l=f)}}await Ge(l);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:t,fileIds:s=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(r==null?void 0:r.maxConcurrency)??5,i=Math.min(a,t.length),o=this._client,l=t.values(),c=[...s];async function f(h){for(let m of h){const g=await o.files.create({file:m,purpose:"assistants"},r);c.push(g.id)}}const u=Array(i).fill(l).map(f);return await uc(u),await this.createAndPoll(e,{file_ids:c})}}class Ua extends k{create(e,t,s){return this._client.post(S`/vector_stores/${e}/files`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{vector_store_id:r}=t;return this._client.get(S`/vector_stores/${r}/files/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{vector_store_id:r,...a}=t;return this._client.post(S`/vector_stores/${r}/files/${e}`,{body:a,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(S`/vector_stores/${e}/files`,L,{query:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t,s){const{vector_store_id:r}=t;return this._client.delete(S`/vector_stores/${r}/files/${e}`,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const r=await this.create(e,t,s);return await this.poll(e,r.id,s)}async poll(e,t,s){var a;const r=I([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=s==null?void 0:s.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const i=await this.retrieve(t,{vector_store_id:e},{...s,headers:r}).withResponse(),o=i.data;switch(o.status){case"in_progress":let l=5e3;if(s!=null&&s.pollIntervalMs)l=s.pollIntervalMs;else{const c=i.response.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(l=f)}}await Ge(l);break;case"failed":case"completed":return o}}}async upload(e,t,s){const r=await this._client.files.create({file:t,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,t,s){const r=await this.upload(e,t,s);return await this.poll(e,r.id,s)}content(e,t,s){const{vector_store_id:r}=t;return this._client.getAPIList(S`/vector_stores/${r}/files/${e}/content`,Bt,{...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class Wt extends k{constructor(){super(...arguments),this.files=new Ua(this._client),this.fileBatches=new ja(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(S`/vector_stores/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(S`/vector_stores/${e}`,{body:t,...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",L,{query:e,...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(S`/vector_stores/${e}`,{...t,headers:I([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,s){return this._client.getAPIList(S`/vector_stores/${e}/search`,Bt,{body:t,method:"post",...s,headers:I([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}Wt.Files=Ua;Wt.FileBatches=ja;var xe,Wa,wt;class qa extends k{constructor(){super(...arguments),xe.add(this)}async unwrap(e,t,s=this._client.webhookSecret,r=300){return await this.verifySignature(e,t,s,r),JSON.parse(e)}async verifySignature(e,t,s=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");d(this,xe,"m",Wa).call(this,s);const a=I([t]).values,i=d(this,xe,"m",wt).call(this,a,"webhook-signature"),o=d(this,xe,"m",wt).call(this,a,"webhook-timestamp"),l=d(this,xe,"m",wt).call(this,a,"webhook-id"),c=parseInt(o,10);if(isNaN(c))throw new Me("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-c>r)throw new Me("Webhook timestamp is too old");if(c>f+r)throw new Me("Webhook timestamp is too new");const u=i.split(" ").map(y=>y.startsWith("v1,")?y.substring(3):y),h=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),m=l?`${l}.${o}.${e}`:`${o}.${e}`,g=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const y of u)try{const w=Buffer.from(y,"base64");if(await crypto.subtle.verify("HMAC",g,w,new TextEncoder().encode(m)))return}catch{continue}throw new Me("The given webhook signature does not match the expected signature")}}xe=new WeakSet,Wa=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},wt=function(e,t){if(!e)throw new Error("Headers are required");const s=e.get(t);if(s==null)throw new Error(`Missing required header: ${t}`);return s};var Cn,Zn,bt,Ha;class ${constructor({baseURL:e=we("OPENAI_BASE_URL"),apiKey:t=we("OPENAI_API_KEY"),organization:s=we("OPENAI_ORG_ID")??null,project:r=we("OPENAI_PROJECT_ID")??null,webhookSecret:a=we("OPENAI_WEBHOOK_SECRET")??null,...i}={}){if(Cn.add(this),bt.set(this,void 0),this.completions=new Aa(this),this.chat=new jn(this),this.embeddings=new Ca(this),this.files=new Ea(this),this.images=new Na(this),this.audio=new Ze(this),this.moderations=new La(this),this.models=new Ma(this),this.fineTuning=new Re(this),this.graders=new Qn(this),this.vectorStores=new Wt(this),this.webhooks=new qa(this),this.beta=new et(this),this.batches=new ya(this),this.uploads=new Yn(this),this.responses=new Gn(this),this.evals=new Jn(this),this.containers=new qn(this),t===void 0)throw new R("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:s,project:r,webhookSecret:a,...i,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&fl())throw new R(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??Zn.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=Ts(o.logLevel,"ClientOptions.logLevel",this)??Ts(we("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??gl(),E(this,bt,yl),this._options=o,this.apiKey=t,this.organization=s,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}authHeaders(e){return I([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Al(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${ve}`}defaultIdempotencyKey(){return`stainless-node-retry-${Sr()}`}makeStatusError(e,t,s,r){return U.generate(e,t,s,r)}buildURL(e,t,s){const r=!d(this,Cn,"m",Ha).call(this)&&s||this.baseURL,a=al(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return ol(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new Dt(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var b,p;const r=await e,a=r.maxRetries??this.maxRetries;t==null&&(t=a),await this.prepareOptions(r);const{req:i,url:o,timeout:l}=this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(i,{url:o,options:r});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=s===void 0?"":`, retryOf: ${s}`,u=Date.now();if(W(this).debug(`[${c}] sending request`,fe({retryOfRequestLogID:s,method:r.method,url:o,options:r,headers:i.headers})),(b=r.signal)!=null&&b.aborted)throw new Z;const h=new AbortController,m=await this.fetchWithTimeout(o,i,l,h).catch(pn),g=Date.now();if(m instanceof Error){const v=`retrying, ${t} attempts remaining`;if((p=r.signal)!=null&&p.aborted)throw new Z;const _=mn(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return W(this).info(`[${c}] connection ${_?"timed out":"failed"} - ${v}`),W(this).debug(`[${c}] connection ${_?"timed out":"failed"} (${v})`,fe({retryOfRequestLogID:s,url:o,durationMs:g-u,message:m.message})),this.retryRequest(r,t,s??c);throw W(this).info(`[${c}] connection ${_?"timed out":"failed"} - error; no more retries left`),W(this).debug(`[${c}] connection ${_?"timed out":"failed"} (error; no more retries left)`,fe({retryOfRequestLogID:s,url:o,durationMs:g-u,message:m.message})),_?new Pn:new Lt({cause:m})}const y=[...m.headers.entries()].filter(([v])=>v==="x-request-id").map(([v,_])=>", "+v+": "+JSON.stringify(_)).join(""),w=`[${c}${f}${y}] ${i.method} ${o} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${g-u}ms`;if(!m.ok){const v=this.shouldRetry(m);if(t&&v){const T=`retrying, ${t} attempts remaining`;return await _l(m.body),W(this).info(`${w} - ${T}`),W(this).debug(`[${c}] response error (${T})`,fe({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,durationMs:g-u})),this.retryRequest(r,t,s??c,m.headers)}const _=v?"error; no more retries left":"error; not retryable";W(this).info(`${w} - ${_}`);const C=await m.text().catch(T=>pn(T).message),A=ul(C),x=A?void 0:C;throw W(this).debug(`[${c}] response error (${_})`,fe({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,message:x,durationMs:Date.now()-u})),this.makeStatusError(m.status,A,x,m.headers)}return W(this).info(w),W(this).debug(`[${c}] response start`,fe({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,durationMs:g-u})),{response:m,options:r,controller:h,requestLogID:c,retryOfRequestLogID:s,startTime:u}}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}requestAPIList(e,t){const s=this.makeRequest(t,null,void 0);return new Pl(this,s,e)}async fetchWithTimeout(e,t,s,r){const{signal:a,method:i,...o}=t||{};a&&a.addEventListener("abort",()=>r.abort());const l=setTimeout(()=>r.abort(),s),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:r.signal,...c?{duplex:"half"}:{},method:"GET",...o};i&&(f.method=i.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(l)}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){let a;const i=r==null?void 0:r.get("retry-after-ms");if(i){const l=parseFloat(i);Number.isNaN(l)||(a=l)}const o=r==null?void 0:r.get("retry-after");if(o&&!a){const l=parseFloat(o);Number.isNaN(l)?a=Date.parse(o)-Date.now():a=l*1e3}if(!(a&&0<=a&&a<60*1e3)){const l=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,l)}return await Ge(a),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}buildRequest(e,{retryCount:t=0}={}){const s={...e},{method:r,path:a,query:i,defaultBaseURL:o}=s,l=this.buildURL(a,i,o);"timeout"in s&&cl("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:c,body:f}=this.buildBody({options:s}),u=this.buildHeaders({options:e,method:r,bodyHeaders:c,retryCount:t});return{req:{method:r,headers:u,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...s.fetchOptions??{}},url:l,timeout:s.timeout}}buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const i=I([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...pl(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=I([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Nr(e)}:d(this,bt,"f").call(this,{body:e,headers:s})}}Zn=$,bt=new WeakMap,Cn=new WeakSet,Ha=function(){return this.baseURL!=="https://api.openai.com/v1"};$.OpenAI=Zn;$.DEFAULT_TIMEOUT=6e5;$.OpenAIError=R;$.APIError=U;$.APIConnectionError=Lt;$.APIConnectionTimeoutError=Pn;$.APIUserAbortError=Z;$.NotFoundError=Cr;$.ConflictError=Rr;$.RateLimitError=kr;$.BadRequestError=xr;$.AuthenticationError=Ar;$.InternalServerError=Or;$.PermissionDeniedError=Ir;$.UnprocessableEntityError=Er;$.InvalidWebhookSignatureError=Me;$.toFile=Bl;$.Completions=Aa;$.Chat=jn;$.Embeddings=Ca;$.Files=Ea;$.Images=Na;$.Audio=Ze;$.Moderations=La;$.Models=Ma;$.FineTuning=Re;$.Graders=Qn;$.VectorStores=Wt;$.Webhooks=qa;$.Beta=et;$.Batches=ya;$.Uploads=Yn;$.Responses=Gn;$.Evals=Jn;$.Containers=qn;const fc=new $({apiKey:"test",dangerouslyAllowBrowser:!0});var dc=Ce("<option> </option>"),hc=Ce('<select class="mb-2 w-28 rounded border border-gray-600 bg-gray-800 px-2 py-1 text-white"></select>');function Ks(n,e){let t=as(e,"value",12),s=as(e,"onChange",8),r=[{name:"English"},{name:"Spanish"},{name:"French"},{name:"German"},{name:"Italian"},{name:"Portuguese"},{name:"Russian"},{name:"Chinese"},{name:"Japanese"},{name:"Arabic"}];var a=hc();St(()=>{t(),Ai(()=>{s()})}),a.__change=function(...i){var o;(o=s())==null||o.apply(this,i)},Mi(a,5,()=>r,({name:i})=>i,(i,o)=>{let l=()=>M(o).name;var c=dc(),f=z(c,!0);J(c);var u={};St(()=>{sr(f,l()),u!==(u=l())&&(c.value=(c.__value=l())??"")}),Y(i,c)}),J(a),Xi(a,t),Y(n,a)}kn(["change"]);function mc(n,e,t,s){const r=M(e);ue(e,M(t),!0),ue(t,r,!0),s()}var pc=Ce('<div class="flex w-full max-w-5xl gap-2"><div class="flex flex-1 flex-col"><!> <div class=" rounded-md border border-gray-600 bg-transparent p-4 shadow-md"><textarea rows="4" class="w-full resize-none border-none bg-transparent text-lg text-white outline-none focus:ring-0 focus:outline-none" placeholder="Enter text"></textarea></div></div> <div class="flex flex-1 flex-col"><div class="relative flex items-center justify-start"><button class="absolute left-[-21px] rounded-full p-1 text-white hover:bg-gray-700" aria-label="Swap languages"><!></button> <div class="ml-6"><!></div></div> <div class="h-42 rounded-md border border-gray-600 bg-transparent p-4 shadow"><div class="flex-1 text-lg whitespace-pre-wrap text-white"><p class="mb-1 text-lg text-white"><!></p></div></div></div></div>');function gc(n,e){er(e,!0);const t=2;let s=me(""),r=me(""),a=me("Spanish"),i=me("English"),o;const l=()=>{M(s).length>t?(clearTimeout(o),o=setTimeout(c,1e3)):clearTimeout(o)},c=async()=>{const O=`Translate the following text from ${M(a)} to ${M(i)}: ${M(s)}`,G=await fc.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"user",content:O}]});ue(r,G.choices[0].message.content||"",!0)};var f=pc(),u=z(f),h=z(u);Ks(h,{onChange:l,get value(){return M(a)},set value(O){ue(a,O,!0)}});var m=Ne(h,2),g=z(m);Ti(g),g.__input=l,J(m),J(u);var y=Ne(u,2),w=z(y),b=z(w);b.__click=[mc,a,i,c];var p=z(b);sl(p,{icon:"mdi:swap-horizontal",width:"28",height:"28"}),J(b);var v=Ne(b,2),_=z(v);Ks(_,{onChange:l,get value(){return M(i)},set value(O){ue(i,O,!0)}}),J(v),J(w);var C=Ne(w,2),A=z(C),x=z(A),N=z(x);{var T=O=>{var G=Jt("Translating...");Y(O,G)},P=(O,G)=>{{var Ee=re=>{var tt=Jt("Translation");Y(re,tt)},qt=re=>{var tt=Jt();St(()=>sr(tt,M(r))),Y(re,tt)};xt(O,re=>{M(r).length===0?re(Ee):re(qt,!1)},G)}};xt(N,O=>{M(s).length>t&&M(r)===""?O(T):O(P,!1)})}J(x),J(A),J(C),J(y),J(f),Qi(g,()=>M(s),O=>ue(s,O)),Y(n,f),tr()}kn(["input","click"]);var _c=Ce('<div class="flex min-h-screen flex-col items-center justify-center bg-gray-900 py-12 font-[Quicksand]"><!> <!></div>');function Oc(n){var e=_c(),t=z(e);Gi(t);var s=Ne(t,2);gc(s,{}),J(e),Y(n,e)}export{Oc as component};
